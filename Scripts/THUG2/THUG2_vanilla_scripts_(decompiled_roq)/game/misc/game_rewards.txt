
:i $story_game_complete_rewards$ = 
:i :a{
	:i :s{$flags$ = :a{$GAME_COMPLETED_BEGINNER$
			:i $LEVEL_UNLOCKED_SE$
			:i $LEVEL_SEEN_SE$
			:i $MOVIE_UNLOCKED_WDT$
			:i $SKATER_UNLOCKED_SHREK$
			:i $SKATER_UNLOCKED_PHIL$
			:i $SKATER_UNLOCKED_PRICE_PC$
			:i $SKATER_UNLOCKED_PEDGROUP1$
			:i :a}
		:i $movie$ = %s(10,"movies\wdt")
		:i $play_credits$
		:i $message$ = %s(417,"\n\c5STORY MODE COMPLETE!\n\nYou've unlocked the \c5Pro Skater \c0level!\nYou've also unlocked playable secret skaters:\n\c5Shrek, Phil Margera, Alien,\n\c5Geeky Kid, and Space Monkey 1!\n\nWhere did all of the footage for the\nWorld Destruction Tour video go? Take a look...\n\n\n\n\n\c8Shrek is a registered trademark of DreamWorks L.L.C.\n\c8Shrek 2, Shrek Ear Design, Shrek 'S' TM & (c) 2004\n\c8DreamWorks L.L.C.")
		:i $use_shrek_logo$ = $use_shrek_logo$
	:i :s}
	:i :s{$flags$ = :a{$GAME_COMPLETED_NORMAL$
			:i $LEVEL_UNLOCKED_SE$
			:i $LEVEL_SEEN_SE$
			:i $MOVIE_UNLOCKED_WDT$
			:i $SKATER_UNLOCKED_HAND$
			:i $SKATER_UNLOCKED_PAULIE$
			:i $SKATER_UNLOCKED_PEDGROUP2$
			:i :a}
		:i $movie$ = %s(10,"movies\wdt")
		:i $play_credits$
		:i $message$ = %s(353,"\n\c5STORY MODE COMPLETE!\n\nYou've completed Story Mode on Normal difficulty\n and unlocked the \c5Pro Skater \c0level!\n\nYou've also unlocked playable secret skaters:\n\c5The Hand, Paulie 'Wheels of Fury' Ryan,\n\c5Alien Doctor, Boat Captain, and Lost Soul 1!\n\nWhere did all of the footage for the\nWorld Destruction Tour video go? Take a look...\n")
	:i :s}
	:i :s{$flags$ = :a{$GAME_COMPLETED_SICK$
			:i $LEVEL_UNLOCKED_SE$
			:i $LEVEL_SEEN_SE$
			:i $MOVIE_UNLOCKED_WDT$
			:i $SKATER_UNLOCKED_SOLDIER$
			:i $SKATER_UNLOCKED_NIGEL$
			:i $SKATER_UNLOCKED_PEDGROUP3$
			:i :a}
		:i $movie$ = %s(10,"movies\wdt")
		:i $play_credits$
		:i $message$ = %s(342,"\n\c5STORY MODE COMPLETE!\n\nYou've completed Story Mode on Sick difficulty and unlocked the \c5Pro Skater \c0level!\n\nYou've also unlocked playable secret skaters:\n\c5Call of Duty Soldier, Nigel Beaverhausen,\n\c5German Drunk 1, Mime, and Zombie 1!\n\nWhere did all of the footage for the\nWorld Destruction Tour video go? Take a look...\n")
	:i :s}
	:i :a}
:i $classic_game_complete_rewards$ = 
:i :a{
	:i :s{$flags$ = :a{$GAME_COMPLETED_CLASSIC_NORMAL$
			:i $MOVIE_UNLOCKED_PRO_BAILS$
			:i $SKATER_UNLOCKED_THPS$
			:i $SKATER_UNLOCKED_STEVEO$
			:i $SKATER_UNLOCKED_SECRETPC2$
			:i $SKATER_UNLOCKED_PEDGROUP4$
			:i :a}
		:i $movie$ = %s(15,"movies\probail1")
		:i $message$ = %s(199,"\n\c5CLASSIC MODE COMPLETE!\n\nYou've completed Classic Mode on Normal difficulty\nand unlocked playable secret skaters:\n\c5THPS1 Tony Hawk, Steve-O, Alien Leader,\n\c5Inline Skater, and Ramp Kid!\n")
	:i :s}
	:i :s{$flags$ = :a{$GAME_COMPLETED_CLASSIC_SICK$
			:i $MOVIE_UNLOCKED_PRO_BAILS$
			:i $SKATER_UNLOCKED_JESSEJAMES$
			:i $SKATER_UNLOCKED_NATAS$
			:i $SKATER_UNLOCKED_PEDGROUP5$
			:i :a}
		:i $movie$ = %s(15,"movies\probail1")
		:i $message$ = %s(193,"\n\c5CLASSIC MODE COMPLETE!\n\nYou've completed Classic Mode on Sick difficulty\nand unlocked playable secret skaters:\n\c5Jesse James, Natas Kaupas, Bigfoot, The Imp,\n\c5and Space Monkey 2!\n")
	:i :s}
	:i :a}
:i $story_goal_complete_rewards$ = 
:i :s{
	:i $flags$ = :a{$CAREER_GOALS_COMPLETE$
		:i $MOVIE_UNLOCKED_PRO_BAILS2$
		:i $SKATER_UNLOCKED_PEDGROUP6$
		:i :a}
	:i $movie$ = %s(15,"movies\probail2")
	:i $message$ = %s(324,"\n\c5ALL STORY MODE GOALS COMPLETE!\n\nYou've completed every possible goal in Story Mode!\n\nYou've unlocked new playable secret skaters:\n\c5Aborigine, Camera Man, Construction Worker,\n\c5Cut Chemist, German Drunk 2, Graffiti Punk,\n\c5Hospital Attendant, Lifeguard, Mayan,\n\c5Revolutionary Soldier, and Voodoo Doctor!\n")
	:i $already_got_message$ = %s(126,"\n\c5ALL STORY MODE GOALS COMPLETE!\n\nYou've completed every possible goal in Story Mode!\n\nYou should work for Neversoft!\n")
:i :s}
:i $classic_goal_complete_rewards$ = 
:i :s{
	:i $flags$ = :a{$CLASSIC_GOALS_COMPLETE$
		:i $MOVIE_UNLOCKED_NS_BAILS$
		:i $SKATER_UNLOCKED_PEDGROUP7$
		:i :a}
	:i $movie$ = %s(14,"movies\nsbails")
	:i $message$ = %s(318,"\n\c5ALL CLASSIC MODE GOALS COMPLETE!\n\nYou've completed every possible goal in Classic Mode!\n\nYou've unlocked new playable secret skaters:\n\c5Australian Cop, Bratwurst Vendor, Corn Vendor,\n\c5German Cop, German Drunk 3, Horn Player,\n\c5Lost Soul 2, Metal Detector Guy, Pirate,\n\c5Skatopia Punk, and Zombie 2!\n")
	:i $already_got_message$ = %s(130,"\n\c5ALL CLASSIC MODE GOALS COMPLETE!\n\nYou've completed every possible goal in Classic Mode!\n\nYou should work for Neversoft!\n")
:i :s}
:i $all_gaps_complete_rewards$ = 
:i :s{
	:i $flags$ = :a{$GOT_ALL_GAPS$
		:i $SKATER_UNLOCKED_PEDGROUP8$
		:i :a}
	:i $message$ = %s(346,"\n\c5ALL GAPS COMPLETE!\n\nAmazing! You've completed all the gaps in this game! You are one of the best Tony Hawk players ever!\n\nYou've unlocked new playable secret skaters:\n\c5Boxer, Flute Player, Guitar Player,\n\c5Lounge Singer, Lost Soul 3, Mayan with Tiki\n\c5Mask, Paramedic, Security Guard, Skaboto,\n\c5Space Monkey 3 and Wiener Man!\n")
:i :s}
:i $want_game_complete_message$ = %i(0,00000000)
:i $want_goal_complete_message$ = %i(0,00000000)
:i $want_gaps_complete_message$ = %i(0,00000000)
:i $want_goal_alt_message$ = %i(0,00000000)
:i $want_completion_movie$ = %i(0,00000000)
:i function $SetRewardFlagArray$
	:i $GetArraySize$%GLOBAL%$flags$
	:i $index$ = %i(0,00000000)
	:i while
		
		:i if NOT $GetGlobalFlag$$flag$ =  (%GLOBAL%$flags$:a{%GLOBAL%$index$:a}) 
			:i $SetGlobalFlag$$flag$ =  (%GLOBAL%$flags$:a{%GLOBAL%$index$:a}) 
			:i $new_reward$ = %i(1,00000001)
		:i endif
		:i $index$ =  (%GLOBAL%$index$ + %i(1,00000001)) 
	:i loop_to %GLOBAL%$array_size$
	:i return
	$new_reward$ = %GLOBAL%$new_reward$
:i endfunction
:i function $GetDifficultyLevelRewards$
	:i $GoalManager_GetDifficultyLevel$
	:i if $GameModeEquals$$is_career$
		:i return
		 ($story_game_complete_rewards$:a{%GLOBAL%$difficulty_level$:a}) 
	:i else 
		:i return
		 ($classic_game_complete_rewards$:a{%GLOBAL%$difficulty_level$:a}) 
	:i endif
:i endfunction
:i function $GetGoalRewards$
	:i $GoalManager_GetDifficultyLevel$
	:i if $GameModeEquals$$is_career$
		:i return
		 ($story_goal_complete_rewards$) 
	:i else 
		:i return
		 ($classic_goal_complete_rewards$) 
	:i endif
:i endfunction
:i function $ProcessGameRewards$
	:i $printf$%s(23,"Processing Game Rewards")
	:i if $GameModeEquals$$is_career$
		:i if $GetGlobalFlag$$flag$ = $CAREER_SEEN_GAME_COMPLETE_MESSAGE$
			:i return
			
		:i endif
		:i $GetArraySize$$CHAPTER_STATUS$
		:i $GetCurrentChapter$
		:i if NOT  (%GLOBAL%$chapter$ =  (%GLOBAL%$array_size$%i(4294967295,ffffffff)) ) 
			:i return
			
		:i endif
		:i $GoalManager_GetActiveRewardPoints$
		:i $GetCurrentPointsToAdvance$
		:i if  (%GLOBAL%$active_points$ < %GLOBAL%$points_to_advance$) 
			:i return
			
		:i endif
		:i $SetGlobalFlag$$flag$ = $CAREER_SEEN_GAME_COMPLETE_MESSAGE$
	:i else 
		:i if $GetGlobalFlag$$flag$ = $CLASSIC_SEEN_GAME_COMPLETE_MESSAGE$
			:i return
			
		:i endif
		:i if NOT $LevelIs$$load_se2$
			:i return
			
		:i endif
		:i $GetClassicLevelGoalCount$
		:i $GetClassicModeTargetGoalsComplete$
		:i if  (%GLOBAL%$classic_goal_count$ < %GLOBAL%$target_goals_complete$) 
			:i return
			
		:i endif
		:i $SetGlobalFlag$$flag$ = $CLASSIC_SEEN_GAME_COMPLETE_MESSAGE$
	:i endif
	:i $GetDifficultyLevelRewards$
	:i $SetRewardFlagArray$$flags$ = %GLOBAL%$flags$
	:i $change$$want_game_complete_message$ = %i(1,00000001)
	:i $change$$want_completion_movie$ = %i(1,00000001)
	:i $kill_start_key_binding$
:i endfunction
:i function $ProcessGoalRewards$
	:i if $GameModeEquals$$is_career$
		:i if $GetGlobalFlag$$flag$ = $CAREER_SEEN_GOAL_COMPLETE_MESSAGE$
			:i return
			
		:i endif
		:i $GetCareerLevelScore$$get_total$
		:i if  (%GLOBAL%$total_score$ < %i(11000,00002af8)) 
			:i return
			
		:i endif
		:i $SetGlobalFlag$$flag$ = $CAREER_SEEN_GOAL_COMPLETE_MESSAGE$
	:i else 
		:i if $GetGlobalFlag$$flag$ = $CLASSIC_SEEN_GOAL_COMPLETE_MESSAGE$
			:i return
			
		:i endif
		:i $GetClassicLevelGoalCount$$get_total$
		:i if  (%GLOBAL%$total_goals_complete$ < %i(140,0000008c)) 
			:i return
			
		:i endif
		:i $SetGlobalFlag$$flag$ = $CLASSIC_SEEN_GOAL_COMPLETE_MESSAGE$
	:i endif
	:i $GetGoalRewards$
	:i $SetRewardFlagArray$$flags$ = %GLOBAL%$flags$
	:i $change$$want_goal_complete_message$ = %i(1,00000001)
	:i $change$$want_completion_movie$ = %i(1,00000001)
	:i $kill_start_key_binding$
	:i if $GotParam$$new_reward$
		:i $change$$want_goal_alt_message$ = %i(0,00000000)
	:i else 
		:i $change$$want_goal_alt_message$ = %i(1,00000001)
	:i endif
:i endfunction
:i function $ProcessAllGapsReward$
	:i if $GetGlobalFlag$$flag$ = $GOT_ALL_GAPS$
		:i return
		
	:i endif
	:i $unlock_all_gameplay_cheat_codes$
	:i $SetRewardFlagArray$$flags$ =  ($all_gaps_complete_rewards$->$flags$) 
	:i if $InNetGame$
		:i $AllGapsCompleteMessage$
	:i else 
		:i $change$$want_gaps_complete_message$ = %i(1,00000001)
		:i $kill_start_key_binding$
		:i $wait$%i(1,00000001)$seconds$
		:i $DoCompletionMessages$
	:i endif
:i endfunction
:i function $CheckNeedCompletionMessages$
	:i if NOT $IsTrue$$want_game_complete_message$
		:i if NOT $IsTrue$$want_goal_complete_message$
			:i if NOT $IsTrue$$want_gaps_complete_message$
				:i return
				
			:i endif
		:i endif
	:i endif
	:i return
	$need_completion_messages$ = $need_completion_messages$
:i endfunction
:i $waiting_for_complete_message$ = %i(0,00000000)
:i function $DoCompletionMessages$
	:i $CheckNeedCompletionMessages$
	:i if $GotParam$$need_completion_messages$
		:i if NOT $IsTrue$$waiting_for_complete_message$
			:i $change$$waiting_for_complete_message$ = %i(1,00000001)
			:i $SpawnScript$$WaitUntilScreenClear$$params$ = :s{$callback$ = $DoCompletionMessagesNow$:s}
		:i endif
	:i endif
:i endfunction
:i function $DoCompletionMessagesNow$
	:i $PauseGame$
	:i $PauseStream$%i(1,00000001)
	:i $hide_all_hud_items$
	:i if $IsTrue$$want_gaps_complete_message$
		:i $AllGapsCompleteMessage$
		:i $WaitForEvent$$type$ = $message_accept$
		:i $change$$want_gaps_complete_message$ = %i(0,00000000)
	:i endif
	:i if $IsTrue$$want_goal_complete_message$
		:i $GoalCompleteMessage$
		:i $WaitForEvent$$type$ = $message_accept$
	:i endif
	:i if $IsTrue$$want_game_complete_message$
		:i $GameCompleteMessage$
		:i $WaitForEvent$$type$ = $message_accept$
	:i endif
	:i $change$$waiting_for_complete_message$ = %i(0,00000000)
	:i if NOT $IsTrue$$want_completion_movie$
		:i $KillChapterMenu$$inside_run$$need_unpause_streams$
		:i return
		
	:i endif
	:i $EndCurrentChapter$$dont_check_outtros$
	:i $ingame_pre_movie_cleanup$
	:i if $IsTrue$$want_game_complete_message$
		:i $GetEndMovieParams$
		:i if $GotParam$$movie$
			:i $PlayMovie$%GLOBAL%$movie$
			:i $last_movie$ = %GLOBAL%$movie$
		:i endif
	:i endif
	:i if $IsTrue$$want_goal_complete_message$
		:i $GetGoalMovieParams$
		:i if $GotParam$$last_movie$
			:i if $StringEquals$$a$ = %GLOBAL%$movie$$b$ = %GLOBAL%$last_movie$
				:i $RemoveParameter$$movie$
			:i endif
		:i endif
		:i if $GotParam$$movie$
			:i $PlayMovie$%GLOBAL%$movie$
		:i endif
	:i endif
	:i $MaybePlayCreditsMovie$
	:i $change$$want_game_complete_message$ = %i(0,00000000)
	:i $change$$want_goal_complete_message$ = %i(0,00000000)
	:i $change$$want_completion_movie$ = %i(0,00000000)
	:i $ingame_post_movie_cleanup$ isNull 
:i endfunction
:i function $MaybePlayCreditsMovie$
	:i if $IsTrue$$want_game_complete_message$
		:i $GetDifficultyLevelRewards$
		:i if $GotParam$$play_credits$
			:i $PlayMovie$%s(14,"movies\credits")
		:i endif
	:i endif
:i endfunction
:i function $GameCompleteMessage$
	:i $StopStream$
	:i $PlayStream$$FoundAllGaps$$vol$ = %i(150,00000096)
	:i $GetDifficultyLevelRewards$
	:i if $GameModeEquals$$is_career$
		:i $title$ = %s(16,"CONGRATULATIONS!")
	:i else 
		:i $title$ = %s(16,"CONGRATULATIONS!")
	:i endif
	:i $create_snazzy_dialog_box$:s{
		:i $title$ = %GLOBAL%$title$
		:i $text$ = %GLOBAL%$message$
		:i $text_dims$ = %vec2(500.000000,0.000000)
		:i $no_bg$
		:i $buttons$ = :a{:s{$font$ = $small$$text$ = %sc(8,"Continue")$pad_choose_script$ = $dialog_box_accept$:s}:a}
		:i $style$ = $special_dialog_style$
		:i $delay_input$
		:i $use_shrek_logo$ = %GLOBAL%$use_shrek_logo$
	:i :s}
:i endfunction
:i function $GoalCompleteMessage$
	:i $StopStream$
	:i $PlayStream$$FoundAllGaps$$vol$ = %i(150,00000096)
	:i $GetGoalRewards$
	:i if $IsTrue$$want_goal_alt_message$
		:i $message$ = %GLOBAL%$already_got_message$
	:i endif
	:i if $GameModeEquals$$is_career$
		:i $title$ = %s(16,"CONGRATULATIONS!")
	:i else 
		:i $title$ = %s(16,"CONGRATULATIONS!")
	:i endif
	:i $create_snazzy_dialog_box$:s{
		:i $title$ = %GLOBAL%$title$
		:i $text$ = %GLOBAL%$message$
		:i $text_dims$ = %vec2(500.000000,0.000000)
		:i $no_bg$
		:i $buttons$ = :a{:s{$font$ = $small$$text$ = %sc(8,"Continue")$pad_choose_script$ = $dialog_box_accept$:s}:a}
		:i $delay_input$
		:i $style$ = $special_dialog_style$
	:i :s}
:i endfunction
:i function $AllGapsCompleteMessage$
	:i $StopStream$
	:i $PlayStream$$FoundAllGaps$$vol$ = %i(150,00000096)
	:i $create_dialog_box$:s{$title$ = %s(16,"CONGRATULATIONS!")
		:i $text$ =  ($all_gaps_complete_rewards$->$message$) 
		:i $pos$ = %vec2(320.000000,240.000000)
		:i $just$ = :a{$center$$center$:a}
		:i $text_rgba$ = :a{%i(88,00000058)%i(105,00000069)%i(112,00000070)%i(128,00000080):a}
		:i $text_dims$ = %vec2(440.000000,0.000000)
		:i $style$ = $special_dialog_style$
		:i $buttons$ = :a{:s{$font$ = $small$$text$ = %s(8,"Continue")$pad_choose_script$ = $dialog_box_accept$:s}:a}
		:i $delay_input$
	:i :s}
:i endfunction
:i function $GetEndMovieParams$
	:i $GetDifficultyLevelRewards$
	:i if $GameModeEquals$$is_career$
		:i $level$ = $load_se$
	:i else 
		:i $level$ = $load_se2$
	:i endif
	:i return
	:s{$movie$ = %GLOBAL%$movie$$level$ = %GLOBAL%$level$:s}
:i endfunction
:i function $GetGoalMovieParams$
	:i $GetGoalRewards$
	:i return
	$movie$ = %GLOBAL%$movie$
:i endfunction
:i :end
