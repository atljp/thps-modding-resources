
ST_Goal_Intro_Cameras = [{virtual_cam
        TargetID = world
        targetOffset = (-3387.199951171875, 7003.39990234375, -5627.2998046875)
        positionOffset = (560.4000244140625, 5707.7001953125, 3467.800048828125)
        frames = 300
        skippable = 1
        text = ST_Intro_Text1
        cam_start_script = ST_intro_Line1
        time = 5000
    }
    {virtual_cam
        TargetID = world
        targetOffset = (-3387.199951171875, 7003.39990234375, -5627.2998046875)
        positionOffset = (560.4000244140625, 5707.7001953125, 3467.800048828125)
        frames = 300
        skippable = 1
        text = ST_Intro_Text2
        cam_start_script = ST_intro_Line2
        time = 5000
    }
    {virtual_cam
        TargetID = world
        targetOffset = (-3387.199951171875, 7003.39990234375, -5627.2998046875)
        positionOffset = (560.4000244140625, 5707.7001953125, 3467.800048828125)
        frames = 300
        skippable = 1
        text = ST_Intro_Text3
        cam_start_script = ST_intro_Line3
        time = 5000
    }
    {virtual_cam
        TargetID = world
        targetOffset = (3991.699951171875, 10846.2001953125, 9970.400390625)
        positionOffset = (321.3999938964844, 7154.89990234375, 1432.5999755859375)
        frames = 300
        skippable = 1
        goal = ST_Goal_Gaps
        time = 5000
    }
    {virtual_cam
        TargetID = world
        targetOffset = (312.6000061035156, 11388.5, -7122.89990234375)
        positionOffset = (1079.9000244140625, 6249.0, 1420.300048828125)
        frames = 300
        skippable = 1
        goal = ST_Goal_Gaps7
        time = 5000
    }
    {virtual_cam
        TargetID = world
        targetOffset = (2948.800048828125, 8421.5, -6033.10009765625)
        positionOffset = (-165.3000030517578, 5683.2998046875, 3066.199951171875)
        frames = 300
        skippable = 1
        goal = ST_Goal_Gaps12
        time = 5000
    }
    {virtual_cam
        TargetID = world
        targetOffset = (9766.099609375, 7764.2001953125, -2718.199951171875)
        positionOffset = (654.2000122070312, 6564.89990234375, 1223.0999755859375)
        frames = 300
        skippable = 1
        goal = ST_Goal_Gaps2
        time = 5000
    }
    {virtual_cam
        TargetID = world
        targetOffset = (-2005.5999755859375, 6847.89990234375, 6783.2998046875)
        positionOffset = (1299.800048828125, 6821.39990234375, -2654.5)
        frames = 300
        skippable = 1
        goal = ST_Goal_Gaps10
        time = 5000
    }
    {virtual_cam
        TargetID = world
        targetOffset = (-3277.300048828125, 6877.0, -3596.699951171875)
        positionOffset = (1610.699951171875, 5516.10009765625, 5020.39990234375)
        frames = 350
        skippable = 1
        text = 'When you little dirtbags have scored all you can, find me.  We\'ll total things up, then you can crown my team champion.'
        cam_start_script = ST_intro_Line4
        time = 5250
    }
]
ST_Pro_Goal_Intro_Cameras = [{virtual_cam
        TargetID = world
        targetOffset = (-3272.0, 5064.5, -5698.60009765625)
        positionOffset = (601.2999877929688, 5708.10009765625, 3498.199951171875)
        frames = 300
        skippable = 1
        text = 'New goal list unlocked.'
        cam_start_script = FirstSwap_VO
        time = 5000
    }
    {virtual_cam
        TargetID = world
        targetOffset = (-2215.39990234375, -2631.0, 4313.7001953125)
        positionOffset = (724.7000122070312, 6613.89990234375, 1888.5)
        frames = 300
        skippable = 1
        goal = ST_Goal_Gaps3
        time = 5000
    }
    {virtual_cam
        TargetID = world
        targetOffset = (8476.599609375, 5735.39990234375, -5760.2998046875)
        positionOffset = (687.7000122070312, 6682.7998046875, 439.0)
        frames = 300
        skippable = 1
        goal = ST_Goal_Gaps5
        time = 5000
    }
    {virtual_cam
        TargetID = world
        targetOffset = (4978.5, 7524.39990234375, 5548.10009765625)
        positionOffset = (-584.9000244140625, 6286.10009765625, -2668.699951171875)
        frames = 300
        skippable = 1
        goal = ST_Goal_trickobjects
        time = 5000
    }
    {virtual_cam
        TargetID = world
        targetOffset = (405.8999938964844, -2823.0, 1418.300048828125)
        positionOffset = (184.10000610351562, 7174.2998046875, 1376.0)
        frames = 300
        skippable = 1
        goal = ST_Goal_Gaps6
        time = 5000
    }
    {virtual_cam
        TargetID = world
        targetOffset = (7333.7998046875, 10954.400390625, 5190.7001953125)
        positionOffset = (-805.7000122070312, 6288.0, 1731.0999755859375)
        frames = 300
        skippable = 1
        goal = ST_Goal_Gaps11
        time = 5000
    }
    {virtual_cam
        TargetID = world
        targetOffset = (5033.7998046875, 10375.900390625, -5246.89990234375)
        positionOffset = (1289.800048828125, 5611.60009765625, 2708.10009765625)
        frames = 300
        skippable = 1
        goal = ST_Goal_SkatetheLine2
        time = 5000
    }
    {virtual_cam
        TargetID = world
        targetOffset = (1385.5, 6659.60009765625, 7649.10009765625)
        positionOffset = (1399.5, 6281.60009765625, -2343.5)
        frames = 300
        skippable = 1
        goal = ST_Goal_SkatetheLine4
        time = 5000
    }
    {virtual_cam
        TargetID = world
        targetOffset = (3448.199951171875, 10536.099609375, 5835.5)
        positionOffset = (1863.699951171875, 6309.89990234375, -3087.300048828125)
        frames = 300
        skippable = 1
        goal = ST_Goal_Gaps14
        time = 5000
    }
]
ST_Bigfoot_Goal_Intro_Cameras = [{virtual_cam
        TargetID = world
        targetOffset = (-2730.89990234375, 7994.2001953125, 11191.2001953125)
        positionOffset = (661.4000244140625, 5610.2998046875, 2092.5)
        frames = 300
        skippable = 1
        text = 'New goal list unlocked.  Secret goals!'
        cam_start_script = FirstSwap_VO
        time = 5000
    }
    {virtual_cam
        TargetID = world
        targetOffset = (-2997.39990234375, 6167.89990234375, 12625.400390625)
        positionOffset = (1666.5, 5503.7001953125, 3804.60009765625)
        frames = 300
        skippable = 1
        goal = ST_Goal_Gaps16
        time = 5000
    }
    {virtual_cam
        TargetID = world
        targetOffset = (-3373.300048828125, 2445.699951171875, -5055.60009765625)
        positionOffset = (-437.3999938964844, 5683.5, 3938.39990234375)
        frames = 300
        skippable = 1
        goal = ST_Goal_Gaps17
        time = 5000
    }
    {virtual_cam
        TargetID = world
        targetOffset = (5897.5, 2040.9000244140625, 6581.39990234375)
        positionOffset = (-463.20001220703125, 6864.39990234375, 558.7999877929688)
        frames = 300
        skippable = 1
        goal = ST_Goal_Gaps18
        time = 5000
    }
    {virtual_cam
        TargetID = world
        targetOffset = (-5901.39990234375, 8948.7998046875, -5210.39990234375)
        positionOffset = (-200.3000030517578, 5654.89990234375, 2315.89990234375)
        frames = 300
        skippable = 1
        goal = ST_Goal_Gaps19
        time = 5000
    }
]
ST_Sheckler_Goal_Intro_Cameras = [{virtual_cam
        TargetID = world
        targetOffset = (5491.39990234375, 9034.900390625, -11289.5)
        positionOffset = (1201.4000244140625, 6456.7998046875, -2632.300048828125)
        frames = 300
        skippable = 1
        text = 'New goal list unlocked.  Guest goals!\nNew Special Trick - Swimming with sharks'
        cam_start_script = FirstSwap_VO
        time = 5000
    }
    {virtual_cam
        TargetID = world
        targetOffset = (1667.300048828125, 7245.60009765625, -9577.900390625)
        positionOffset = (789.2999877929688, 6896.2001953125, 377.0)
        frames = 300
        skippable = 1
        goal = ST_Goal_Gaps4
        time = 5000
    }
    {virtual_cam
        TargetID = world
        targetOffset = (-1644.199951171875, 1239.699951171875, -3806.199951171875)
        positionOffset = (1039.800048828125, 5953.7998046875, 4594.39990234375)
        frames = 300
        skippable = 1
        goal = ST_Goal_Gaps8
        time = 5000
    }
    {virtual_cam
        TargetID = world
        targetOffset = (-3251.800048828125, 8481.7001953125, 10888.7998046875)
        positionOffset = (720.5999755859375, 5619.7001953125, 2170.300048828125)
        frames = 300
        skippable = 1
        goal = ST_Goal_Gaps9
        time = 5000
    }
    {virtual_cam
        TargetID = world
        targetOffset = (-3230.60009765625, 7023.60009765625, 9652.099609375)
        positionOffset = (-326.6000061035156, 6857.2998046875, 84.5999984741211)
        frames = 300
        skippable = 1
        goal = ST_Goal_SkatetheLine3
        time = 5000
    }
]
ST_EndGoal_Bam_Cameras = [{virtual_cam
        TargetID = world
        targetOffset = (-3923.89990234375, 6815.0, -3024.0)
        positionOffset = (1587.800048828125, 5513.7998046875, 5217.89990234375)
        frames = 300
        skippable = 1
        text = 'To celebrate our complete domination I\'m gonna blow this hell-hole sky high !'
        cam_start_script = ST_bam_bombs1_VO
        time = 5000
    }
    {virtual_cam
        TargetID = world
        targetOffset = (6966.2998046875, 122.0, 6289.7998046875)
        positionOffset = (121.0999984741211, 6524.7998046875, 2804.89990234375)
        frames = 300
        skippable = 1
        goal = ST_Goal_Gaps20
        time = 5000
    }
    {virtual_cam
        TargetID = world
        targetOffset = (4529.2998046875, 9196.599609375, -6772.10009765625)
        positionOffset = (1154.199951171875, 5725.2001953125, 1977.699951171875)
        frames = 300
        skippable = 1
        goal = ST_Goal_Gaps22
        time = 5000
    }
    {virtual_cam
        TargetID = world
        targetOffset = (-84.69999694824219, 5253.5, 7831.60009765625)
        positionOffset = (2188.0, 6455.10009765625, -1832.0999755859375)
        frames = 300
        skippable = 1
        goal = ST_Goal_Gaps23
        time = 5000
    }
    {virtual_cam
        TargetID = world
        targetOffset = (-2330.60009765625, -57.900001525878906, -8615.900390625)
        positionOffset = (675.0999755859375, 6536.10009765625, -1725.4000244140625)
        frames = 300
        skippable = 1
        goal = ST_Goal_Gaps24
        time = 5000
    }
    {virtual_cam
        TargetID = world
        targetOffset = (-5915.5, 8112.7998046875, 7342.10009765625)
        positionOffset = (1038.5999755859375, 6686.7998046875, 299.20001220703125)
        frames = 300
        skippable = 1
        goal = ST_Goal_Gaps25
        time = 5000
    }
]
ST_EndGoal_Hawk_Cameras = [{virtual_cam
        TargetID = world
        targetOffset = (-6036.60009765625, 8735.5, 7476.7998046875)
        positionOffset = (917.2999877929688, 6661.89990234375, 596.2999877929688)
        frames = 200
        skippable = 1
        text = 'We gotta get outta here, but let\'s take the critters with us!'
        cam_start_script = ST_hawk_dogs_VO
    }
    {virtual_cam
        TargetID = world
        targetOffset = (-7718.10009765625, 7256.2001953125, -673.7000122070312)
        positionOffset = (1037.5999755859375, 5468.2998046875, 3812.89990234375)
        frames = 120
        skippable = 1
        text = ''
    }
    {virtual_cam
        TargetID = world
        targetOffset = (2976.5, 6150.10009765625, -9431.2998046875)
        positionOffset = (1601.300048828125, 5875.10009765625, 469.70001220703125)
        frames = 60
        skippable = 1
        text = ''
    }
]
ST_EndGoal_End_Cameras = [
    {virtual_cam
        TargetID = world
        targetOffset = (405.3999938964844, 9646.900390625, 12930.900390625)
        positionOffset = (1037.5999755859375, 5503.10009765625, 3851.89990234375)
        frames = 150
        skippable = 1
        text = 'Alright, it\'s time for the grand finale!'
        cam_start_script = ST_bam_final_VO
        time = 2500
    }
    {virtual_cam
        TargetID = world
        targetOffset = (8270.0, 2799.199951171875, -4426.5)
        positionOffset = (1141.199951171875, 5759.5, 1929.0999755859375)
        frames = 115
        skippable = 1
        text = 'This place is gettin\' torched!'
        time = 1800
    }
    {virtual_cam
        TargetID = world
        targetOffset = (405.3999938964844, 9646.900390625, 12930.900390625)
        positionOffset = (1037.5999755859375, 5503.10009765625, 3851.89990234375)
        frames = 150
        skippable = 1
        text = 'Yo, what\'s that rookie still doin\' way up there?!'
        time = 2500
    }
    {virtual_cam
        TargetID = world
        targetOffset = (5192.7001953125, -2079.699951171875, -444.29998779296875)
        positionOffset = (1694.9000244140625, 7286.0, -505.1000061035156)
        frames = 180
        skippable = 1
        text = 'Hey loser, let\'s make this interesting!'
        time = 3000
    }
    {virtual_cam
        TargetID = world
        targetOffset = (7677.60009765625, 11429.7001953125, 1188.0)
        positionOffset = (-349.79998779296875, 5803.39990234375, 3156.199951171875)
        frames = 250
        skippable = 1
        text = 'We\'re up, but if you can bust Skatopia in one combo, you get 1000 points!'
        time = 5000
    }
    {virtual_cam
        TargetID = world
        targetOffset = (-4491.7001953125, 9291.2001953125, -2620.10009765625)
        positionOffset = (1188.0, 5522.60009765625, 4694.7998046875)
        frames = 210
        skippable = 1
        text = 'You know why? Cause it\'ll never happen. .ahaaha aha! hah!!'
        time = 3500
    }
]

script ST_setup 
    ST_vertcheck_init
    ST_manualcheck_init
    ST_wallcheck_init
    ST_walkcheck_init
    ST_combo_checkinit
    ST_Initializer
    ST_particles
endscript


script ST_Startup 
    LoadAsset 'models\gameobjects\projectiles\SmokeBomb\SmokeBomb.tex'
    LoadAsset 'models\gameobjects\projectiles\SmokeBomb\SmokeBomb.mdl' parent = `models\gameobjects\projectiles\smokebomb\smokebomb.tex`
endscript

FLAG_FLAME = 1
FLAG_PROPANE = 2
FLAG_SPLASH = 3
FLAG_COON = 4
FLAG_VERT = 7
FLAG_MANUAL = 9
FLAG_ZIP2 = 10
FLAG_ZIP = 11
FLAG_WALL = 12
Flag_Walk = 13
FLAG_BIGTRICK = 14
FLAG_BIGRAMP1 = 15
FLAG_SPLODE = 17
FLAG_COMBO = 18
FLAG_COMBO2 = 19
FLAG_COMBO3 = 20
FLAG_COMBO4 = 21
FLAG_COMBO5 = 16
FLAG_ROCKET = 22
flag_green = 23
flag_red = 24
FLAG_PURPLE = 27
flag_yellow = 28
FLAG_ROCKET2 = 29
FLAG_SPINGRIND = 30
FLAG_CRITTER = 31
FLAG_CRITTER2 = 32

script ST_goals 
    if NOT InMultiPlayerGame
    endif
    if InMultiPlayerGame
        add_multiplayer_mode_goals
    endif
    if NOT InSplitScreenGame
        if ((GameModeEquals is_classic)|| (InNetGame))
            printf 'adding classic goals'
            AddGoal_HighScore {
                unlimited_time
                classic_mode_goal
                difficulty_level_params = [
                    {
                        Score = ST_Classic_Easy_HighScore
                        goal_text = ST_Classic_Easy_HighScore_Text
                        view_goals_text = ST_Classic_Easy_HighScore_Text
                    }
                    {
                        Score = ST_Classic_HighScore
                        goal_text = ST_Classic_HighScore_Text
                        view_goals_text = ST_Classic_HighScore_Text
                    }
                ]
                view_goals_cameras = [
                    {
                        virtual_cam
                        name = CAM_Classic_Intro01
                        frames = 500
                        skippable = 1
                    }
                ]
            }
            AddGoal_ProScore {
                unlimited_time
                classic_mode_goal
                difficulty_level_params = [
                    {
                        Score = ST_Classic_Easy_ProScore
                        goal_text = ST_Classic_Easy_ProScore_Text
                        view_goals_text = ST_Classic_Easy_ProScore_Text
                    }
                    {
                        Score = ST_Classic_ProScore
                        goal_text = ST_Classic_ProScore_Text
                        view_goals_text = ST_Classic_ProScore_Text
                    }
                ]
            }
            AddGoal_SickScore {
                unlimited_time
                classic_mode_goal
                difficulty_level_params = [
                    {
                        Score = ST_Classic_Easy_SickScore
                        goal_text = ST_Classic_Easy_SickScore_Text
                        view_goals_text = ST_Classic_Easy_SickScore_Text
                    }
                    {
                        Score = ST_Classic_SickScore
                        goal_text = ST_Classic_SickScore_Text
                        view_goals_text = ST_Classic_SickScore_Text
                    }
                ]
            }
            AddGoal_HighCombo {
                unlimited_time
                classic_mode_goal
                difficulty_level_params = [
                    {
                        Score = ST_Classic_Easy_HighCombo
                        goal_text = ST_Classic_Easy_HighCombo_Text
                        view_goals_text = ST_Classic_Easy_HighCombo_Text
                    }
                    {
                        Score = ST_Classic_HighCombo
                        goal_text = ST_Classic_HighCombo_Text
                        view_goals_text = ST_Classic_HighCombo_Text
                    }
                ]
            }
            AddGoal_Skate {
                unlimited_time
                classic_mode_goal
                S_obj_id = TRG_SKATE_S
                K_obj_id = TRG_SKATE_K
                A_obj_id = TRG_SKATE_A
                T_obj_id = TRG_SKATE_T
                E_obj_id = TRG_SKATE_E
                view_goals_cameras = [
                    {
                        virtual_cam
                        TargetID = world
                        targetOffset = (1362.5, 1391.5999755859375, 4359.60009765625)
                        positionOffset = (1835.699951171875, 6783.7001953125, -4048.699951171875)
                        frames = 200
                        skippable = 1
                    }
                ]
            }
            AddGoal_Combo {
                unlimited_time
                classic_mode_goal
                letter_info = [
                    {obj_id = TRG_COMBO_C text = 'C'}
                    {obj_id = TRG_COMBO_O text = 'O'}
                    {obj_id = TRG_COMBO_M text = 'M'}
                    {obj_id = TRG_COMBO_B text = 'B'}
                    {obj_id = TRG_COMBO_O01 text = 'O'}
                ]
                view_goals_cameras = [
                    {
                        virtual_cam
                        TargetID = world
                        targetOffset = (2172.800048828125, 1420.5999755859375, 11141.400390625)
                        positionOffset = (1610.4000244140625, 5850.7001953125, 2194.10009765625)
                        frames = 200
                        skippable = 1
                    }
                ]
            }
            AddGoal_Collect {
                unlimited_time
                classic_mode_goal
                collect_type = 'Dog Food'
                goal_text = 'Get 5 Bags of Dog Food'
                view_goals_text = 'Get 5 Bags of Dog Food'
                use_hud_counter
                hud_counter_caption = 'Dog Food'
                goal_flags = [
                    got_1
                    got_2
                    got_3
                    got_4
                    got_5
                ]
                goal_deactivate_script = ST_Classic_Dogfood_Kill
                init_script = ST_Goal_Classic_Dogfood_Init
                view_goals_cameras = [
                    {
                        virtual_cam
                        TargetID = world
                        targetOffset = (-6132.0, 2109.89990234375, -2591.89990234375)
                        positionOffset = (1088.4000244140625, 5727.0, 3305.60009765625)
                        frames = 200
                        skippable = 1
                    }
                ]
            }
            AddGoal_SecretTape {
                goal_text = 'Get the secret tape'
                classic_mode_goal
                view_goals_text = 'Get the secret tape'
                goal_description = 'Get the secret tape'
                secret_tape_id = ST_Secret_Tape
                view_goals_cameras = [
                    {
                        virtual_cam
                        TargetID = world
                        targetOffset = (-1178.699951171875, 4552.39990234375, 10873.099609375)
                        positionOffset = (-694.9000244140625, 6838.0, 1150.0)
                        frames = 200
                        skippable = 1
                    }
                ]
            }
            AddGoal_Gaps {
                unlimited_time
                classic_mode_goal
                version = 13
                goal_text = 'Get Special, then Bust a FrontFlip over the Skatopia sign'
                view_goals_text = 'Front Flip (\b2+\b7+\b7) the Skatopia Sign'
                goal_description = 'Front Flip (\b2+\b7+\b7) the SKatopia Sign'
                goal_flags = [ got_1 ]
                view_goals_cameras = [
                    {
                        virtual_cam
                        TargetID = world
                        targetOffset = (8948.2001953125, 8240.2001953125, 131.89999389648438)
                        positionOffset = (437.70001220703125, 5478.5, 4597.39990234375)
                        frames = 200
                        skippable = 1
                    }
                ]
            }
            AddGoal_Collect {
                unlimited_time
                classic_mode_goal
                version = 2
                collect_type = 'Skunk Grinds'
                use_hud_counter
                hud_counter_caption = 'skunks'
                goal_text = 'Hit the 5 skunk grinds'
                view_goals_text = 'Hit the 5 skunk grinds'
                goal_description = 'Hit the 5 skunk grinds'
                goal_flags = [
                    got_1
                    got_2
                    got_3
                    got_4
                    got_5
                ]
                goal_deactivate_script = ST_Classic_Skunks_Kill
                init_script = ST_Goal_Classic_Skunks_Init
                view_goals_cameras = [
                    {
                        virtual_cam
                        TargetID = world
                        targetOffset = (8436.5, 5611.89990234375, -4195.60009765625)
                        positionOffset = (477.79998779296875, 6355.39990234375, 1813.199951171875)
                        frames = 200
                        skippable = 1
                    }
                ]
            }
        else
            if NOT ((GameModeEquals is_singlesession)|| (GameModeEquals is_creategoals))
                if NOT InNetGame
                endif
            endif
        endif
    endif
endscript


script ST_Main_Story_goals 
    ST_AddGoal_TimedScoreRun
    ST_AddGoal_ChainSaw
    ST_AddGoal_Secret
    ST_AddGoal_TreeBomb
    ST_AddGoal_HugeElecWire
    ST_AddGoal_HugeManual
    ST_AddGoal_TrickTheLogs
    ST_AddGoal_MineSpine
    ST_AddGoal_ZipDrop
    ST_AddGoal_ShackCombo
    ST_AddGoal_JumptheHouse
    ST_AddGoal_SpineSeries1
    ST_AddGoal_ZiplineDrop
    ST_AddGoal_BigFireworks
    ST_AddGoal_DownhillGrindCombo
    ST_AddGoal_HittheKite
    ST_AddGoal_Masterpiece
    ST_AddGoal_Tags
    ST_AddGoal_Hives
    ST_AddGoal_Guest
    ST_AddGoal_SignTransfer
    ST_AddGoal_BigTRICK
    ST_AddGoal_BigRampManual
    ST_AddGoal_BigManual
endscript


script ST_Capstone_Story_goals 
    ST_AddGoal_End_SpinBomb
    ST_AddGoal_End_Rockets
    ST_AddGoal_End_Fountain
    ST_AddGoal_End_BoxBombs
    ST_AddGoal_End_TopBomb
endscript


script ST_Capstone_Story_goals_part2 
    ST_AddGoal_End_Hawk
endscript


script ST_Capstone_Story_goals_part3 
    ST_AddGoal_End_Escape2
endscript


script ST_CreateCars 
    <vehicle> = Random (@ 1 @ 2)
    switch <vehicle>
        case 1
        Create name = TRG_veh_jihad
        TRG_veh_jihad ::CreateFlexibleParticleSystem name = jihadsmoke01 params_script = apm_ST_CarDust01_particle_params
        case 2
        Create name = TRG_veh_suburban
        TRG_veh_suburban ::CreateFlexibleParticleSystem name = SubUrban01 params_script = apm_ST_CarDust01_particle_params
    endswitch
endscript


script ST_CreatePeds 
    if NOT IsAlive name = trg_ped_dog_01
        Create prefix = 'trg_ped_dog_'
    endif
    if NOT IsAlive name = TRG_ped_randomized_01
        Create prefix = 'trg_ped_randomized_'
    endif
    if NOT IsAlive name = TRG_ped_skater_01
        Create name = TRG_ped_skater_01
    endif
    if NOT IsAlive name = TRG_ped_skater_barnpool
        Create name = TRG_ped_skater_barnpool
    endif
endscript


script ST_KillCars 
    if IsAlive name = TRG_veh_jihad
        TRG_veh_jihad ::DestroyFlexibleParticleSystem name = jihadsmoke01
        Kill name = TRG_veh_jihad
    endif
    if IsAlive name = TRG_veh_suburban
        TRG_veh_suburban ::DestroyFlexibleParticleSystem name = SubUrban01
        Kill name = TRG_veh_suburban
    endif
endscript


script ST_KillPeds 
    if NOT IsAlive name = TRG_Ped_Bam
        Kill prefix = 'TRG_ped_'
    endif
    Kill prefix = 'trg_endgoal_dog'
    Kill prefix = 'trg_ped_dog_'
    Kill prefix = 'trg_ped_randomized_'
    Kill prefix = 'trg_ped_skater_'
    if IsAlive name = TRG_ped_JesseJames
        Kill name = TRG_ped_JesseJames
    endif
    if NOT IsAlive name = TRG_ped_skatopiaguy
        Kill name = TRG_ped_skatopiaguy
    endif
endscript


script ST_sound_chicken 
    SpawnScript ST_SFX_Chicken_Hit01
endscript


script ST_Initializer 
    if GameModeEquals is_career
        if NOT IsAlive name = TRG_hawkfound
            ST_CreatePeds
            ST_CreateCars
            Create name = TRG_hawkfound
            Create name = TRG_Gaps2_ShecklerFound
            if NOT IsAlive name = TRG_Ped_Bam
                Create name = TRG_Ped_Bam
            endif
            if NOT IsAlive name = TRG_Ped_Guest
                Create name = TRG_Ped_Guest
            endif
            if NOT IsAlive name = TRG_Ped_TeammatePro
                Create name = TRG_Ped_TeammatePro
            endif
            if NOT IsAlive name = TRG_ped_skatopiaguy
                Create name = TRG_ped_skatopiaguy
            endif
            if NOT IsAlive name = TRG_ped_pinkcat
                Create name = TRG_ped_pinkcat
            endif
            if GoalManager_GoalExists name = ST_Goal_Gaps
                if NOT GoalManager_HasWonGoal name = ST_Goal_Gaps
                    if NOT IsAlive name = TRG_ped_JesseJames
                        Create name = TRG_ped_JesseJames
                    endif
                endif
            endif
            if NOT IsAlive name = TRG_ped_hint_01
                Create prefix = 'TRG_ped_hint_'
            endif
            if GoalManager_GoalExists name = ST_Goal_Gaps3
                if NOT GoalManager_GoalIsLocked name = ST_Goal_Gaps3
                    if NOT IsAlive name = TRG_ped_hawkhint_01
                        Create name = TRG_ped_hawkhint_01
                    endif
                    if NOT IsAlive name = TRG_ped_hawkhint_02
                        Create name = TRG_ped_hawkhint_02
                    endif
                endif
            endif
            if GoalManager_GoalExists name = ST_Goal_Gaps2
                if NOT GoalManager_HasWonGoal name = ST_Goal_Gaps2
                    if NOT IsAlive name = TRG_ped_hidden_bigfoot_01
                        Create name = TRG_ped_hidden_bigfoot_01
                    endif
                endif
            endif
            if GoalManager_GoalExists name = ST_Goal_Gaps2
                if GoalManager_HasWonGoal name = ST_Goal_Gaps2
                    if NOT IsAlive name = TRG_ped_bigfoot01
                        Create name = TRG_ped_bigfoot01
                    endif
                endif
            endif
            if NOT IsAlive name = g_trig_firework
                Create name = g_trig_firework
            endif
            if GoalManager_GoalExists name = ST_Goal_Gaps
                if NOT GoalManager_HasWonGoal name = ST_Goal_Gaps
                    if NOT IsAlive name = g_object_chainsaw
                        Create name = g_object_chainsaw
                    endif
                endif
            endif
            if GoalManager_GoalExists name = ST_Goal_Gaps
                if GoalManager_HasWonGoal name = ST_Goal_Gaps
                    Kill prefix = 'g_bigfoot_trees_'
                    Kill prefix = 'TRG_rail_bigfoot_tree'
                    Kill prefix = 'g_bigfoot_tree_shadow_'
                    Create name = g_trig_bigfoot_camchange
                    Create prefix = 'trg_rail_hugeramp_'
                    Create prefix = 'g_trig_hugeramp_jump_'
                endif
            endif
            if GoalManager_GoalExists name = ST_Goal_Gaps
                if GoalManager_HasWonGoal name = ST_Goal_Gaps
                    if NOT GoalManager_HasWonGoal name = ST_Goal_Gaps2
                        if NOT IsAlive name = TRG_ped_bigfoot
                            Create name = TRG_ped_bigfoot
                            Create name = TRG_Gaps2_bigfootfound
                        endif
                    endif
                endif
            endif
            if GoalManager_GoalExists name = ST_Goal_Gaps14
                if NOT GoalManager_GoalIsLocked name = ST_Goal_Gaps14
                    if NOT GoalManager_HasWonGoal name = ST_Goal_Gaps14
                        Create prefix = 'g_trig_hive_'
                    endif
                endif
            endif
            if GoalManager_GoalExists name = ST_Goal_Gaps12
                if NOT GoalManager_GoalIsLocked name = ST_Goal_Gaps12
                    if GoalManager_HasWonGoal name = ST_Goal_Gaps12
                        Create name = ST_AS_MasterPiece_final01
                    endif
                endif
            endif
            if GoalManager_HasWonGoal name = ST_goal_gaps13
                Create prefix = 'g_spat_cover_'
                Kill prefix = 'g_trigger_spat_'
            else
                Create prefix = 'g_trigger_spat_'
                Kill prefix = 'g_spat_cover_'
            endif
            TRG_veh_zip_01 ::CreateFlexibleParticleSystem name = zip01 params_script = apm_ST_OILYsmoke_ZIP_particle_params
            TRG_veh_zip2_01 ::CreateFlexibleParticleSystem name = zip02 params_script = apm_ST_OILYsmoke_ZIP2_particle_params
        endif
    endif
    if GameModeEquals is_classic
        TRG_veh_zip_01 ::CreateFlexibleParticleSystem name = zip01 params_script = apm_ST_OILYsmoke_ZIP_particle_params
        TRG_veh_zip2_01 ::CreateFlexibleParticleSystem name = zip02 params_script = apm_ST_OILYsmoke_ZIP2_particle_params
        ST_CreateCars
        Create prefix = 'trg_ped_randomized_'
        Create prefix = 'trg_ped_skater_'
        if NOT IsAlive name = TRG_ped_hidden_bigfoot_01
            Create name = TRG_ped_hidden_bigfoot_01
        endif
        if NOT IsAlive name = TRG_ped_skatopiaguy
            Create name = TRG_ped_skatopiaguy
        endif
        if NOT IsAlive name = TRG_ped_pinkcat
            Create name = TRG_ped_pinkcat
        endif
        if NOT IsAlive name = trg_ped_dog_01
            Create prefix = 'TRG_ped_dog_'
        endif
    endif
endscript


script ST_intro_Line1 
    TRG_Ped_TeammatePro ::obj_playfam ST_Intro_01_Lip vol = 160 priority = StreamPriorityHighest
endscript


script ST_intro_Line2 
    TRG_Ped_TeammatePro ::obj_playfam ST_Intro_02_Lip vol = 160 priority = StreamPriorityHighest
endscript


script ST_intro_Line3 
    TRG_Ped_TeammatePro ::obj_playfam ST_Intro_03_Lip vol = 160 priority = StreamPriorityHighest
endscript


script ST_intro_Line4 
    TRG_Ped_TeammatePro ::obj_stoplastfam
    TRG_Ped_Bam ::obj_playfam ST_Intro_04_Lip vol = 160 priority = StreamPriorityHighest
endscript


script ST_bam_bombs1_VO 
    TRG_Ped_Endgoal_Bam1 ::obj_playfam Bam_Domination_lip vol = 160 priority = StreamPriorityHighest
endscript


script ST_bam_final_VO 
    TRG_Ped_Endgoal_Bam2 ::obj_playfam Bam_GrandFinale_lip vol = 160 priority = StreamPriorityHighest
endscript


script ST_hawk_dogs_VO 
    TRG_Ped_Endgoal_Hawk1 ::obj_playfam Hawk_ST_Outro_lip vol = 160 priority = StreamPriorityHighest
endscript


script ST_Goal_Classic_Skunks_Init 
    if NOT GoalManager_HasWonGoal name = st_classic_goal_collect2
        Create prefix = 'TRG_Classic_Skunk_'
        Create prefix = 'G_Classic_Skunk_Trig_'
    endif
endscript


script ST_Goal_Classic_Dogfood_Init 
    if NOT GoalManager_HasWonGoal name = st_classic_goal_collect
        Create prefix = 'trg_classic_dogfood_'
    endif
endscript


script ST_Classic_Skunks_Kill 
    Kill prefix = 'TRG_Classic_Skunk_'
    Kill prefix = 'G_Classic_Skunk_Trig_'
endscript


script ST_Classic_Dogfood_Kill 
    Kill prefix = 'trg_classic_dogfood_'
endscript


script ST_EndGoal_Bam_intro_setup 
    if NOT IsAlive name = TRG_Ped_Endgoal_Bam1
        Create name = TRG_Ped_Endgoal_Bam1
    endif
endscript


script ST_EndGoal_Bam_intro_cleanup 
    if IsAlive name = TRG_Ped_Endgoal_Bam1
        Kill name = TRG_Ped_Endgoal_Bam1
    endif
endscript


script ST_EndGoal_Hawk_intro_setup 
    destroy_digital_timer
    if NOT IsAlive name = TRG_Ped_Endgoal_Hawk1
        Create name = TRG_Ped_Endgoal_Hawk1
    endif
endscript


script ST_EndGoal_Hawk_intro_cleanup 
    if NOT IsAlive name = TRG_ped_endgoal_escape_01
        Create prefix = 'TRG_ped_endgoal_escape_'
    endif
    if IsAlive name = TRG_Ped_Endgoal_Hawk1
        Kill name = TRG_Ped_Endgoal_Hawk1
    endif
    GoalManager_ActivateGoal name = ST_goal_gaps21
endscript


script ST_EndGoal_End_setup 
    if NOT IsAlive name = TRG_Ped_Endgoal_Bam2
        Create name = TRG_Ped_Endgoal_Bam2
    endif
    if GoalManager_GoalExists name = ST_goal_gaps26
        if GoalManager_GoalIsLocked name = ST_goal_gaps26
            GoalManager_UnlockGoal name = ST_goal_gaps26
        endif
        if NOT GoalManager_GoalIsLocked name = ST_goal_gaps26
            if NOT GoalManager_HasWonGoal name = ST_goal_gaps26
                GoalManager_ActivateGoal name = ST_goal_gaps26
                if IsAlive name = TRG_ped_pinkcat
                    Kill name = TRG_ped_pinkcat
                endif
            endif
        endif
    endif
    Kill prefix = 'trg_endgoal_dog'
    Kill prefix = 'g_endgoal_dog_trig'
endscript


script ST_EndGoal_End_cleanup 
    if IsAlive name = TRG_Ped_Endgoal_Bam2
        Kill name = TRG_Ped_Endgoal_Bam2
    endif
endscript


script ST_init_end_part3 
    GoalManager_UnlockGoal name = ST_Goal_Gaps22
    if NOT IsAlive name = g_end_firewall_00
        Create prefix = 'g_end_firewall_'
    endif
    if NOT IsAlive name = g_trig_explosion_01
        Create name = g_trig_explosion_01
    endif
    if NOT IsAlive name = g_trig_end_success
        Create name = g_trig_end_success
    endif
endscript


script ST_Ped_JesseJames 
    Ped_Utils_SetupHintSpeech {
        ped_id = TRG_ped_JesseJames
        accept_text = 'Press \m5 to talk.'
        hint_text = 'Hey holmes I\'m riggin up this sick off-road skateboard, but as always I wanted too much engine and this thing turned into a fireball. Find me something with some serious power and I\'ll let you skate it.'
        hint_text_time = 15
        vo = Ped_JesseJames_Hint_VO
        volume = 350
        inner_radius = 8
        outer_radius = 24
        dont_deactivate_goals
    }
    obj_setattentionradius 40
    Ped_InitAI stand fall GetAttention
endscript


script ST_Hint_ZipToss 
    Ped_Utils_SetupHintSpeech {
        ped_id = TRG_ped_hint_01
        accept_text = 'Press \m5 to talk.'
        hint_text = 'Climb this ladder to get to the Zipline Toss. Jump and grab on. While you\'re flying through the air, Spine Transfer to bomb the pool up there'
        hint_text_time = 15
        vo = VertZip_Hint_VO
        volume = 250
        inner_radius = 4
        outer_radius = 8
        dont_deactivate_goals
    }
    obj_setattentionradius 40
    Ped_InitAI stand fall GetAttention
endscript


script ST_Hint_Firework 
    Ped_Utils_SetupHintSpeech {
        ped_id = TRG_ped_hint_02
        accept_text = 'Press \m5 to talk.'
        hint_text = 'The combination of propane and burning garbage will help kick you up to the Barn roof. Just Ride in there and jump. Have fun with it.'
        hint_text_time = 15
        vo = Propane_Hint_VO
        volume = 250
        inner_radius = 4
        outer_radius = 8
        dont_deactivate_goals
    }
    obj_setattentionradius 40
    Ped_InitAI stand fall GetAttention
endscript


script ST_Hint_ZipLine 
    Ped_Utils_SetupHintSpeech {
        ped_id = TRG_ped_hint_03
        accept_text = 'Press \m5 to talk.'
        hint_text = 'Get off yer board, then jump and grab those bars to hit the zipline. Grind when you get up top.'
        hint_text_time = 15
        vo = RegZip_Hint_VO
        volume = 250
        inner_radius = 4
        outer_radius = 8
        dont_deactivate_goals
    }
    obj_setattentionradius 40
    Ped_InitAI stand fall GetAttention
endscript


script ST_Hint_treetopspin 
    Ped_Utils_SetupHintSpeech {
        ped_id = TRG_ped_hawkhint_01
        accept_text = 'Press \m5 to talk.'
        hint_text = 'Try a Skatopia TreeBomb. Climb a tree, Natas Spin the top, aim for a quarterpipe and Spine Transfer into it.'
        hint_text_time = 15
        vo = TreeBomb_Hint_VO
        volume = 250
        inner_radius = 4
        outer_radius = 8
        dont_deactivate_goals
    }
    obj_setattentionradius 40
    Ped_InitAI stand fall GetAttention
endscript


script ST_Hint_balloon 
    Ped_Utils_SetupHintSpeech {
        ped_id = TRG_ped_hawkhint_02
        accept_text = 'Press \m5 to talk.'
        hint_text = 'Now and then I\'ll Spine Transfer that lil quarter pipe and jump to the balloon. In the air switch to walk and grab the rope.'
        hint_text_time = 15
        vo = Balloon_Hint_VO
        volume = 250
        inner_radius = 4
        outer_radius = 8
        dont_deactivate_goals
    }
    obj_setattentionradius 40
    Ped_InitAI stand fall GetAttention
endscript


script ST_Hint_Shacks 
    Ped_Utils_SetupHintSpeech {
        ped_id = TRG_ped_hint_04
        accept_text = 'Press \m5 to talk.'
        hint_text = 'These Shacks are exits to the tunnel system that runs through Skatopia. Red Shack goes to the Chicken Coop, Green Shack to the Schoolbus Park.'
        hint_text_time = 15
        vo = Shacks_Hint_VO
        volume = 250
        inner_radius = 4
        outer_radius = 8
        dont_deactivate_goals
    }
    obj_setattentionradius 40
    Ped_InitAI stand fall GetAttention
endscript


script ST_AddGoal_TimedScoreRun 
    AddGoal_TimedScoreRun {
        reward_points = 25
        dont_kill_trigger_on_success
        view_goals_text = ST_Arcade_View_Goal_Text
        goal_description = ST_Arcade_Description
        view_goals_cameras = [
            {
                targetOffset = (-8978.5, 7969.7001953125, 5079.2001953125)
                positionOffset = (167.1999969482422, 5960.89990234375, 1569.5999755859375)
            }
        ]
        time = 60
        skater = custom
        trigger_obj_id = TRG_Arcade_Machine
        pro = 'Arcade machine'
        trigger_wait_script = NullScript
        trigger_start_script = arcade_machine_start_goal
        trigger_success_script = NullScript
        restart_node = TRG_Restart_Arcade
        always_initialize_goal
        can_retry_goal
    }
endscript


script ST_AddGoal_ChainSaw 
    AddGoal_Gaps {
        silent_activation
        skater = custom
        reward_points = 25
        collect_type = 'Chainsaw'
        view_goals_text = ST_Chainsaw_View_Goal_Text
        goal_description = ST_Chainsaw_Description
        goal_success_script = ST_Goal_Chainsaw_Success
        success_node = TRG_Restart_GotChainsaw
        goal_flags = [ got_1 ]
        view_goals_cameras = [
            {
                targetOffset = (-6913.39990234375, 8294.7001953125, -7374.60009765625)
                positionOffset = (1426.4000244140625, 6232.10009765625, -2256.89990234375)
                time = 3
            }
            {
                targetOffset = (5197.7001953125, 10207.400390625, 9601.5)
                positionOffset = (310.0, 7148.2001953125, 1432.4000244140625)
                time = 3
            }
        ]
    }
endscript


script ST_AddGoal_Secret 
    AddGoal_Gaps {
        silent_activation
        skater = custom
        version = 2
        reward_points = 25
        success_node = TRG_restart_bigfoot
        view_goals_text = ST_BigFoot_View_Goal_Text
        goal_description = ST_BigFoot_Description
        goal_flags = [ got_1 ]
        view_goals_cameras = [
            {
                targetOffset = (9766.099609375, 7764.2001953125, -2718.199951171875)
                positionOffset = (654.2000122070312, 6564.89990234375, 1223.0999755859375)
                time = 3
            }
        ]
        success_cam_anims = [
            {
                virtual_cam
                TargetID = world
                targetOffset = (-8651.900390625, 6766.7998046875, -1411.699951171875)
                positionOffset = (597.0, 5663.2998046875, 2227.0)
                frames = 400
                loop
                skippable = 1
                pre_anim_script = ST_Goal_Bigfoot_Success
                cam_anim_text = [ 'I am Bigfoot.' ]
            }
        ]
    }
endscript


script ST_AddGoal_ZipDrop 
    AddGoal_Gaps {
        silent_activation
        skater = custom
        version = 7
        reward_points = 25
        view_goals_text = ST_ZipDrop_View_Goal_Text
        goal_description = ST_ZipDrop_Description
        goal_flags = [ got_1 ]
        view_goals_cameras = [
            {
                targetOffset = (312.6000061035156, 11388.5, -7122.89990234375)
                positionOffset = (1079.9000244140625, 6249.0, 1420.300048828125)
            }
        ]
    }
endscript


script ST_AddGoal_BigFireworks 
    AddGoal_Gaps {
        silent_activation
        skater = custom
        version = 10
        reward_points = 25
        view_goals_text = ST_BigFireworks_View_Goal_Text
        goal_description = ST_BigFireworks_Description
        goal_flags = [ got_1 ]
        view_goals_cameras = [
            {
                targetOffset = (9435.0, 5667.89990234375, -2937.0)
                positionOffset = (-389.20001220703125, 6483.2001953125, -1258.699951171875)
                time = 3
            }
            {
                targetOffset = (-1805.300048828125, 2249.10009765625, 5480.7001953125)
                positionOffset = (1278.0999755859375, 6934.2998046875, -2798.199951171875)
                time = 3
            }
        ]
        success_cam_anims = [
            {
                virtual_cam
                TargetID = world
                targetOffset = (-2005.5999755859375, 6847.89990234375, 6783.2998046875)
                positionOffset = (1299.800048828125, 6821.39990234375, -2654.5)
                frames = 400
                loop
                skippable = 1
                pre_anim_script = ST_Goal_BigFirework_Success
                post_anim_script = ST_Goal_BigFirework_Success2
                cam_anim_text = [ 'Wow!' ]
            }
        ]
    }
endscript


script ST_AddGoal_Masterpiece 
    AddGoal_Gaps {
        silent_activation
        skater = custom
        version = 12
        reward_points = 25
        goal_success_script = ST_Goal_MasterPiece_Success
        view_goals_text = ST_Masterpiece_View_Goal_Text
        goal_description = ST_Masterpiece_Description
        goal_flags = [ got_1 ]
        view_goals_cameras = [
            {
                targetOffset = (2948.800048828125, 8421.5, -6033.10009765625)
                positionOffset = (-165.3000030517578, 5683.2998046875, 3066.199951171875)
                time = 3
            }
        ]
    }
endscript


script ST_AddGoal_Tags 
    AddGoal_Gaps {
        silent_activation
        skater = custom
        version = 13
        collect_type = 'Spat Tags'
        reward_points = 25
        view_goals_text = ST_Tags_View_Goal_Text
        goal_description = ST_Tags_Description
        goal_success_script = ST_tags_success
        goal_flags = [
            got_1
            got_2
            got_3
            got_4
            got_5
        ]
        view_goals_cameras = [
            {
                targetOffset = (7605.10009765625, 11336.400390625, 2355.10009765625)
                positionOffset = (797.5, 6215.2001953125, -2882.0)
                time = 3
            }
        ]
    }
endscript


script ST_tags_success 
    skater ::disableplayerinput AllowCameraControl
endscript


script ST_AddGoal_Guest 
    AddGoal_Gaps {
        silent_activation
        skater = custom
        version = 15
        reward_points = 25
        view_goals_text = ST_Guest_View_Goal_Text
        goal_description = ST_Guest_Description
        goal_flags = [ got_1 ]
        view_goals_cameras = [
            {
                targetOffset = (-1717.9000244140625, -895.7000122070312, 3131.10009765625)
                positionOffset = (1281.699951171875, 6570.60009765625, -2805.300048828125)
            }
        ]
        success_cam_anims = [
            {
                virtual_cam
                TargetID = world
                targetOffset = (5491.39990234375, 9034.900390625, -11289.5)
                positionOffset = (1201.4000244140625, 6456.7998046875, -2632.300048828125)
                frames = 400
                loop
                skippable = 1
                pre_anim_script = ST_Goal_Shecklerfound
                cam_anim_text = [ 'Cool.' ]
            }
        ]
    }
endscript


script ST_AddGoal_TreeBomb 
    AddGoal_Gaps {
        silent_activation
        unlocked_by_another
        skater = pro
        version = 3
        reward_points = 25
        view_goals_text = ST_TreeBomb_View_Goal_Text
        view_goals_tip = ST_TreeBomb_View_Goal_Tip
        goal_description = ST_TreeBomb_Description
        goal_flags = [ got_1 ]
        view_goals_cameras = [
            {
                targetOffset = (-2215.39990234375, -2631.0, 4313.7001953125)
                positionOffset = (724.7000122070312, 6613.89990234375, 1888.5)
            }
        ]
    }
endscript


script ST_AddGoal_HugeManual 
    AddGoal_Gaps {
        silent_activation
        skater = pro
        unlocked_by_another
        version = 5
        reward_points = 50
        view_goals_text = ST_HugeManual_View_Goal_Text
        goal_description = ST_HugeManual_Description
        goal_flags = [ got_1 ]
        view_goals_cameras = [
            {
                targetOffset = (8476.599609375, 5735.39990234375, -5760.2998046875)
                positionOffset = (687.7000122070312, 6682.7998046875, 439.0)
            }
        ]
    }
endscript


script ST_AddGoal_TrickTheLogs 
    AddGoal_TrickTheObjects {
        skater = pro
        unlocked_by_another
        reward_points = 25
        view_goals_text = ST_TrickTheLogs_View_Goal_Text
        goal_description = ST_TrickTheLogs_Description
        view_goals_cameras = [
            {
                targetOffset = (4978.5, 7524.39990234375, 5548.10009765625)
                positionOffset = (-584.9000244140625, 6286.10009765625, -2668.699951171875)
            }
        ]
        goal_objects = [
            {cluster_id = g_log_10 flag = got_1}
            {cluster_id = g_log_08 flag = got_2}
            {cluster_id = g_log_80 flag = got_3}
        ]
        goal_flags = [
            got_1
            got_2
            got_3
        ]
        trick_object_prefix = 'g_log_combo_'
        trick_object_light_group = outdoor
        require_combo
        no_fail_messages
    }
endscript


script ST_AddGoal_MineSpine 
    AddGoal_Gaps {
        silent_activation
        unlocked_by_another
        skater = pro
        version = 6
        reward_points = 50
        view_goals_text = ST_MineSpine_View_Goal_Text
        goal_description = ST_MineSpine_Description
        goal_flags = [ got_1 ]
        view_goals_cameras = [
            {
                targetOffset = (405.8999938964844, -2823.0, 1418.300048828125)
                positionOffset = (184.10000610351562, 7174.2998046875, 1376.0)
            }
        ]
    }
endscript


script ST_AddGoal_HittheKite 
    AddGoal_Gaps {
        silent_activation
        unlocked_by_another
        skater = pro
        version = 11
        reward_points = 50
        view_goals_text = ST_HittheKite_View_Goal_Text
        goal_description = ST_HittheKite_Description
        goal_flags = [ got_1 ]
        view_goals_cameras = [
            {
                targetOffset = (7333.7998046875, 10954.400390625, 5190.7001953125)
                positionOffset = (-805.7000122070312, 6288.0, 1731.0999755859375)
                time = 3
            }
        ]
    }
endscript


script ST_AddGoal_SpineSeries1 
    AddGoal_SkateTheLine {
        reward_points = 50
        version = 2
        unlimited_time = 0
        unlocked_by_another
        skater = pro
        view_goals_text = ST_SpineSeries1_View_Goal_Text
        view_goals_tip = ST_SpineSeries1_View_Goal_Tip
        goal_description = ST_SpineSeries1_Description
        can_retry_goal
        restart_node = TRG_restart_spineseries
        view_goals_cameras = [
            {
                targetOffset = (2954.0, 1338.9000244140625, 8437.0)
                positionOffset = (1060.699951171875, 6924.2001953125, 361.29998779296875)
                time = 3
            }
            {
                targetOffset = (-308.70001220703125, -1412.4000244140625, 5218.60009765625)
                positionOffset = (1551.300048828125, 7008.5, 156.1999969482422)
                time = 3
            }
            {
                targetOffset = (-5821.2001953125, 8271.2998046875, 5995.39990234375)
                positionOffset = (2253.0, 6018.60009765625, 543.0)
                time = 3
            }
            {
                targetOffset = (-6457.5, 7932.10009765625, -829.0999755859375)
                positionOffset = (3080.39990234375, 5960.60009765625, 1436.4000244140625)
                time = 3
            }
        ]
        goal_objects = [
            {
                flag = got_1
                time = 15
                trick_objects = [
                    {name = g_spine_mtn_00 light_group = outdoor}
                ]
            }
            {
                flag = got_2
                time = 15
                trick_objects = [
                    {name = g_spine_garage_01 light_group = outdoor}
                    {name = g_spine_garage_02 light_group = outdoor}
                ]
            }
            {
                flag = got_3
                time = 15
                trick_objects = [
                    {name = g_spine_garage_03 light_group = outdoor}
                    {name = g_spine_garage_04 light_group = outdoor}
                ]
            }
        ]
        goal_flags = [
            got_1
            got_2
            got_3
        ]
        require_combo
    }
endscript


script ST_AddGoal_DownhillGrindCombo 
    AddGoal_SkateTheLine {
        reward_points = 50
        version = 4
        unlimited_time = 1
        unlocked_by_another
        skater = pro
        view_goals_text = ST_DownhillGrindCombo_View_Goal_Text
        goal_description = ST_DownhillGrindCombo_Description
        can_retry_goal
        restart_node = TRG_restart_goal_downhill
        view_goals_cameras = [
            {
                targetOffset = (-861.7000122070312, 3320.199951171875, -8530.0)
                positionOffset = (1217.0, 6781.39990234375, 618.7000122070312)
                time = 3
            }
            {
                targetOffset = (6324.7001953125, 6142.2998046875, 6266.89990234375)
                positionOffset = (760.5999755859375, 6359.10009765625, -2039.300048828125)
                time = 3
            }
            {
                targetOffset = (-699.0999755859375, 3248.0, 7618.2998046875)
                positionOffset = (2303.89990234375, 6352.2998046875, -1400.800048828125)
                time = 3
            }
            {
                targetOffset = (3514.60009765625, 1392.5, 9000.099609375)
                positionOffset = (1976.199951171875, 6224.5, 381.5)
                time = 3
            }
            {
                targetOffset = (4391.10009765625, 755.0999755859375, 10114.5)
                positionOffset = (2046.9000244140625, 6238.2998046875, 2087.5)
                time = 3
            }
            {
                targetOffset = (-4210.2001953125, 520.0999755859375, 9333.900390625)
                positionOffset = (2341.39990234375, 5797.7001953125, 3929.199951171875)
                time = 3
            }
            {
                targetOffset = (-3523.699951171875, 6467.39990234375, -4077.300048828125)
                positionOffset = (1196.9000244140625, 5589.5, 4693.89990234375)
                time = 3
            }
        ]
        goal_objects = [
            {
                flag = got_1
                time = 15
                trick_objects = [
                    {name = g_downline_pond_01 light_group = outdoor}
                    {name = g_downline_pond_01b light_group = outdoor}
                ]
            }
            {
                flag = got_2
                time = 15
                trick_objects = [
                    {name = g_downline_pond_01 light_group = outdoor}
                    {name = g_downline_pond_01b light_group = outdoor}
                ]
            }
            {
                flag = got_3
                time = 15
                trick_objects = [
                    {name = g_downline_pond_02 light_group = outdoor}
                ]
            }
            {
                flag = got_4
                time = 15
                trick_objects = [
                    {name = g_downline_pond_03 light_group = outdoor}
                    {name = g_downline_pond_03b light_group = outdoor}
                ]
            }
            {
                flag = got_5
                time = 15
                trick_objects = [
                    {name = g_downline_garage_01 light_group = outdoor}
                ]
            }
            {
                flag = got_6
                time = 15
                trick_objects = [
                    {name = g_downline_house_00 light_group = outdoor}
                ]
            }
            {
                flag = got_7
                time = 15
                trick_objects = [
                    {name = g_downline_house_01 light_group = outdoor}
                ]
            }
            {
                flag = got_8
                time = 15
                trick_objects = [
                    {name = g_downline_house_02 light_group = outdoor}
                ]
            }
        ]
        goal_flags = [
            got_1
            got_2
            got_3
            got_4
            got_5
            got_6
            got_7
            got_8
        ]
        require_combo
    }
endscript


script ST_AddGoal_Hives 
    AddGoal_Gaps {
        silent_activation
        unlocked_by_another
        skater = pro
        version = 14
        collect_type = 'Hives'
        reward_points = 50
        view_goals_text = ST_Hives_View_Goal_Text
        goal_description = ST_Hives_Description
        goal_flags = [
            got_1
            got_2
            got_3
            got_4
            got_5
        ]
        view_goals_cameras = [
            {
                targetOffset = (3448.199951171875, 10536.099609375, 5835.5)
                positionOffset = (1863.699951171875, 6309.89990234375, -3087.300048828125)
                time = 3
            }
        ]
    }
endscript


script ST_AddGoal_HugeElecWire 
    AddGoal_Gaps {
        silent_activation
        unlocked_by_another
        skater = sheckler
        version = 4
        reward_points = 50
        view_goals_text = ST_HugeElecWire_View_Goal_Text
        goal_description = ST_HugeElecWire_Description
        goal_flags = [ got_1 ]
        view_goals_cameras = [
            {
                targetOffset = (1667.300048828125, 7245.60009765625, -9577.900390625)
                positionOffset = (789.2999877929688, 6896.2001953125, 377.0)
            }
        ]
    }
endscript


script ST_AddGoal_ShackCombo 
    AddGoal_Gaps {
        silent_activation
        unlocked_by_another
        skater = sheckler
        version = 8
        reward_points = 50
        view_goals_text = ST_ShackCombo_View_Goal_Text
        goal_description = ST_ShackCombo_Description
        goal_flags = [ got_1 ]
        view_goals_cameras = [
            {
                targetOffset = (-8522.0, 5258.2001953125, -350.3999938964844)
                positionOffset = (497.79998779296875, 5561.10009765625, 3956.60009765625)
                time = 3
            }
            {
                targetOffset = (7731.60009765625, 4856.39990234375, -3786.60009765625)
                positionOffset = (1019.2999877929688, 5601.10009765625, 3588.300048828125)
                time = 3
            }
            {
                targetOffset = (-1391.199951171875, 1619.0999755859375, -4075.10009765625)
                positionOffset = (1005.2000122070312, 6075.39990234375, 4550.2001953125)
                time = 3
            }
        ]
    }
endscript


script ST_AddGoal_JumptheHouse 
    AddGoal_Gaps {
        silent_activation
        unlocked_by_another
        skater = sheckler
        version = 9
        reward_points = 50
        view_goals_text = ST_JumptheHouse_View_Goal_Text
        goal_description = ST_JumptheHouse_Description
        goal_flags = [ got_1 ]
        view_goals_cameras = [
            {
                targetOffset = (-3425.300048828125, -931.5, 5196.39990234375)
                positionOffset = (808.5999755859375, 7289.60009765625, 1394.0)
                time = 3
            }
            {
                targetOffset = (-3251.800048828125, 8481.7001953125, 10888.7998046875)
                positionOffset = (720.5999755859375, 5619.7001953125, 2170.300048828125)
                time = 3
            }
        ]
    }
endscript


script ST_AddGoal_ZiplineDrop 
    AddGoal_SkateTheLine {
        reward_points = 50
        version = 3
        silent_activation
        unlocked_by_another
        skater = sheckler
        view_goals_text = ST_ZiplineDrop_View_Goal_Text
        goal_description = ST_ZiplineDrop_Description
        view_goals_cameras = [
            {
                targetOffset = (-3230.60009765625, 7023.60009765625, 9652.099609375)
                positionOffset = (-326.6000061035156, 6857.2998046875, 84.5999984741211)
                time = 3
            }
            {
                targetOffset = (-4598.7998046875, 9662.7001953125, -5323.60009765625)
                positionOffset = (-206.8000030517578, 5607.0, 2692.39990234375)
                time = 3
            }
        ]
        goal_objects = [
            {
                flag = got_1
                time = 15
                trick_objects = [
                    {name = g_zipdrop_logrun_01 light_group = outdoor}
                ]
            }
            {
                flag = got_2
                time = 15
                trick_objects = [
                    {name = g_zipdrop_mtn_00 light_group = outdoor}
                    {name = g_zipdrop_mtn_01 light_group = outdoor}
                ]
            }
        ]
        goal_flags = [
            got_1
            got_2
        ]
    }
endscript


script ST_AddGoal_SignTransfer 
    AddGoal_Gaps {
        silent_activation
        skater = chainsawskater
        version = 16
        reward_points = 50
        unlocked_by_another
        view_goals_text = ST_SignTransfer_View_Goal_Text
        goal_description = ST_SignTransfer_Description
        goal_flags = [ got_1 ]
        view_goals_cameras = [
            {
                targetOffset = (-2180.699951171875, 1271.0, 11570.5)
                positionOffset = (1594.300048828125, 5870.60009765625, 3533.60009765625)
                time = 3
            }
            {
                targetOffset = (-2997.39990234375, 6167.89990234375, 12625.400390625)
                positionOffset = (1666.5, 5503.7001953125, 3804.60009765625)
                time = 3
            }
        ]
    }
endscript


script ST_AddGoal_BigTRICK 
    AddGoal_Gaps {
        silent_activation
        skater = chainsawskater
        version = 17
        reward_points = 50
        unlocked_by_another
        collect_type = 'plants'
        view_goals_text = ST_BigTRICK_View_Goal_Text
        goal_description = ST_BigTRICK_Description
        goal_flags = [
            got_1
            got_2
            got_3
        ]
        view_goals_cameras = [
            {
                targetOffset = (-3373.300048828125, 2445.699951171875, -5055.60009765625)
                positionOffset = (-437.3999938964844, 5683.5, 3938.39990234375)
                time = 3
            }
        ]
    }
endscript


script ST_AddGoal_BigRampManual 
    AddGoal_Gaps {
        silent_activation
        skater = chainsawskater
        unlocked_by_another
        version = 18
        reward_points = 50
        view_goals_text = ST_BigRampManual_View_Goal_Text
        goal_description = ST_BigRampManual_Description
        goal_flags = [ got_1 ]
        view_goals_cameras = [
            {
                targetOffset = (5897.5, 2040.9000244140625, 6581.39990234375)
                positionOffset = (-463.20001220703125, 6864.39990234375, 558.7999877929688)
            }
        ]
    }
endscript


script ST_AddGoal_BigManual 
    AddGoal_Gaps {
        silent_activation
        skater = chainsawskater
        unlocked_by_another
        version = 19
        reward_points = 100
        view_goals_text = ST_BigManual_View_Goal_Text
        goal_description = ST_BigManual_Description
        goal_flags = [ got_1 ]
        view_goals_cameras = [
            {
                targetOffset = (-5901.39990234375, 8948.7998046875, -5210.39990234375)
                positionOffset = (-200.3000030517578, 5654.89990234375, 2315.89990234375)
            }
        ]
    }
endscript


script ST_AddGoal_End_SpinBomb 
    AddGoal_Gaps {
        silent_activation
        skater = custom
        unlocked_by_another
        version = 20
        reward_points = 200
        view_goals_text = ST_SpinBomb_View_Goal_Text
        goal_description = ST_SpinBomb_Description
        goal_flags = [ got_1 ]
        view_goals_cameras = [
            {
                targetOffset = (-7945.39990234375, 7775.7001953125, 3397.39990234375)
                positionOffset = (1810.9000244140625, 5637.10009765625, 2921.89990234375)
            }
        ]
    }
endscript


script ST_AddGoal_End_Rockets 
    AddGoal_Gaps {
        silent_activation
        skater = custom
        unlocked_by_another
        version = 22
        reward_points = 200
        view_goals_text = ST_Rockets_View_Goal_Text
        difficulty_level_params = [
            { goal_description = ST_Rockets_Easy_Description }
            { goal_description = ST_Rockets_Description }
            { goal_description = ST_Rockets_Description }
        ]
        goal_flags = [ got_1 ]
        view_goals_cameras = [
            {
                targetOffset = (8912.5, 8851.0, -3162.199951171875)
                positionOffset = (886.5999755859375, 5731.2998046875, 1920.4000244140625)
            }
        ]
    }
endscript


script ST_AddGoal_End_Fountain 
    AddGoal_Gaps {
        silent_activation
        skater = custom
        unlocked_by_another
        version = 23
        reward_points = 200
        view_goals_text = ST_Fountain_View_Goal_Text
        goal_description = ST_Fountain_Description
        goal_flags = [ got_1 ]
        view_goals_cameras = [
            {
                targetOffset = (2258.39990234375, 10307.7998046875, 7928.89990234375)
                positionOffset = (1941.300048828125, 6278.7998046875, -1216.4000244140625)
            }
        ]
    }
endscript


script ST_AddGoal_End_BoxBombs 
    AddGoal_Gaps {
        silent_activation
        skater = custom
        unlocked_by_another
        version = 24
        reward_points = 200
        difficulty_level_params = [
            {
                view_goals_text = ST_Boxbombs_View_Goal_Text
                goal_description = ST_Boxbombs_Description_easy
            }
            {
                view_goals_text = ST_Boxbombs_View_Goal_Text
                goal_description = ST_Boxbombs_Description
            }
            {
                view_goals_text = ST_Boxbombs_View_Goal_Text
                goal_description = ST_Boxbombs_Description
            }
        ]
        goal_flags = [ got_1 ]
        view_goals_cameras = [
            {
                targetOffset = (-6628.10009765625, 1495.5999755859375, -6458.7001953125)
                positionOffset = (791.5, 6412.5, -1904.9000244140625)
            }
        ]
        goal_intro_script = ST_BoxBomb_Goal_Intro
    }
endscript


script ST_AddGoal_End_TopBomb 
    AddGoal_Gaps {
        silent_activation
        skater = custom
        unlocked_by_another
        version = 25
        reward_points = 200
        view_goals_text = ST_TopBomb_View_Goal_Text
        goal_description = ST_TopBomb_Description
        goal_flags = [ got_1 ]
        view_goals_cameras = [
            {
                targetOffset = (-3611.5, -1314.5, 3554.300048828125)
                positionOffset = (776.0, 7159.2001953125, 573.4000244140625)
            }
        ]
    }
endscript


script ST_AddGoal_End_Hawk 
    AddGoal_Gaps {
        silent_activation
        skater = custom
        unlocked_by_another
        can_retry_goal
        version = 21
        reward_points = 1000
        goal_fail_script = ST_Critter_Fail_Reset
        goal_deactivate_script = ST_Critter_deactivate
        goal_start_script = st_critter_start
        restart_node = TRG_restart_finalgoal2
        view_goals_text = ST_Critter_View_Goal_Text
        goal_description = ST_Critter_Description
        goal_text = ''
        goal_flags = [ got_1 ]
        view_goals_cameras = [
            {
                targetOffset = (-8027.10009765625, 8256.2998046875, 81.0)
                positionOffset = (1099.5, 5675.0, 3249.39990234375)
            }
        ]
    }
endscript


script ST_AddGoal_End_Escape2 
    AddGoal_Gaps {
        reward_points = 1000
        version = 26
        goal_text = ''
        goal_fail_script = ST_Escape_Deactivate
        difficulty_level_params = [
            {
                restart_node = TRG_restart_finalgoal4
            }
            {
                restart_node = TRG_restart_finalgoal3
            }
            {
                restart_node = TRG_restart_finalgoal3
            }
        ]
        can_retry_goal
        unlocked_by_another
        skater = custom
        view_goals_text = ST_Escape_View_Goal_Text
        goal_description = ST_Escape_Description
        view_goals_cameras = [
            {
                targetOffset = (8181.39990234375, 6747.7001953125, 720.9000244140625)
                positionOffset = (-683.0, 6337.0, -3889.199951171875)
                time = 3
            }
            {
                targetOffset = (-219.8000030517578, 6445.2001953125, 13420.599609375)
                positionOffset = (1115.4000244140625, 5547.89990234375, 3550.89990234375)
                time = 3
            }
        ]
        goal_flags = [ got_1 ]
    }
endscript


script ST_firewall1_death 
    ST_kill_zipline_scripts
    Sk3_KillSkater nodeName = TRG_restart_finalgoal3
endscript


script ST_Escape_Deactivate 
    printf 'ST_Escape_Deactivate'
    ClearExceptionGroup ST_escapecombo
    KillSpawnedScript name = ST_escape_incombo
    KillSpawnedScript name = ST_escape_combocheck
    if GoalManager_GoalExists name = ST_goal_gaps26
        if NOT GoalManager_HasWonGoal name = ST_goal_gaps26
            if NOT GotParam just_won_goal
                printf 'escape reset 2'
                ClearExceptionGroup ST_escapecombo
                KillSpawnedScript name = ST_escape_incombo
                KillSpawnedScript name = ST_escape_combocheck
                SpawnScript ST_Escape_Reactivate
            endif
        endif
    endif
endscript


script ST_Escape_LoseCombo 
    printf 'ST_Escape_LoseCombo'
    if NOT GoalManager_HasWonGoal name = ST_goal_gaps26
        GoalManager_LoseGoal name = ST_goal_gaps26
        kill_panel_message_if_it_exists id = escape_goal
    endif
endscript


script ST_Escape_Reactivate 
    printf 'ST_Escape_Reactivate'
    wait 30 frames
    GoalManager_GetDifficultyLevel
    ST_kill_zipline_scripts
    if (<difficulty_level> = 0)
        skater ::Sk3_KillSkater nodeName = TRG_restart_finalgoal4 NoMessage
    else
        skater ::Sk3_KillSkater nodeName = TRG_restart_finalgoal3 NoMessage
    endif
    if NOT GoalManager_HasWonGoal name = ST_goal_gaps26
        GoalManager_ActivateGoal name = ST_goal_gaps26
    endif
endscript


script ST_escape_combocheck 
    if NOT GetFlag flag = FLAG_COMBO
        FormatText textname = escape_text 'combo required'
        create_panel_message id = message_escape_nocombo text = <escape_text>
        SpawnScript ST_Escape_LoseCombo
        SpawnScript ST_escape_killcombochecktext
    else
        SpawnScript ST_escape_incombo
        create_panel_block id = escape_goal text = 'Combo to the Sign and Win the Tour!' style = panel_message_goal
    endif
endscript


script ST_escape_incombo 
    ClearExceptionGroup ST_escapecombo
    SetException Ex = SkaterExitCombo scr = ST_Escape_LoseCombo group = ST_escapecombo
    Block
endscript


script ST_escape_complete 
    if GetFlag flag = FLAG_COMBO
        if GoalManager_GoalExists name = ST_goal_gaps26
            if NOT GoalManager_GoalFlagSet name = ST_goal_gaps26 flag = got_1
                ClearExceptionGroup ST_escapecombo
                KillSpawnedScript name = ST_escape_incombo
                KillSpawnedScript name = ST_escape_combocheck
                kill_panel_message_if_it_exists id = message_escape_nocombo
                kill_panel_message_if_it_exists id = escape_goal
                GoalManager_WinGoal name = ST_goal_gaps26
            endif
        endif
    endif
endscript


script ST_escape_killcombochecktext 
    wait 1 seconds
    kill_panel_message_if_it_exists id = message_escape_nocombo
endscript


script ST_endgoal_topbomb 
    if GoalManager_GoalExists name = ST_Goal_Gaps25
        if NOT GoalManager_GoalFlagSet name = ST_Goal_Gaps25 flag = got_1
            GoalManager_SetGoalFlag name = ST_Goal_Gaps25 got_1 1
            Create name = g_endgoal_topbomb_on_01
            CreateFastParticleSystem name = radiowaves01 params_script = apm_st_radioWaves_fast_particle_params
            radiowaves01 ::obj_setposition position = (557.0, 7035.0, 636.0)
            SpawnScript ST_SFX_Bomb01_activated
        endif
    endif
endscript

jm_spinbomb = 0
jm_timesround = 0

script ST_SpinBomb_Grind 
    if NOT GetFlag flag = FLAG_SPINGRIND
        GetTriggerArray through
        if triggertype <trigger_array>
            if onrail
                change jm_spinbomb = (jm_spinbomb + 1)
                SpawnScript ST_SpinBomb_off
                if (jm_spinbomb = 8)
                    change jm_spinbomb = 0
                    change jm_timesround = (jm_timesround + 1)
                    FormatText textname = spinbomb_text 'Spinbomb %a Times' a = jm_timesround
                    create_panel_message {
                        id = message_spinbomb
                        text = <spinbomb_text>
                        style = style_ST_boxbomb
                    }
                    if (jm_timesround = 4)
                        if GoalManager_GoalExists name = ST_Goal_Gaps20
                            if NOT GoalManager_GoalFlagSet name = ST_Goal_Gaps20 flag = got_1
                                SetFlag flag = FLAG_SPINGRIND
                                if IsAlive name = g_endgoal_spinlight_red
                                    Kill name = g_endgoal_spinlight_red
                                    Kill name = g_endgoal_spinlight_red_glow
                                endif
                                if NOT IsAlive name = g_endgoal_spinlight_Green
                                    Create name = g_endgoal_spinlight_Green
                                    Create name = g_endgoal_spinlight_green_glow
                                endif
                                GoalManager_SetGoalFlag name = ST_Goal_Gaps20 got_1 1
                                CreateFastParticleSystem {
                                    name = radiowaves05
                                    params_script = apm_st_radioWaves_fast_particle_params
                                }
                                radiowaves05 ::obj_setposition position = (448.0, 6363.0, 2970.0)
                                Create name = APM_spinna_ghost01
                                Create name = APM_spinna_ghost02
                                Create name = APM_spinna_ghost03
                                Create name = APM_spinna_ghost04
                                SpawnScript Rocketshake01
                                SpawnScript Rocketshake02
                                SpawnScript Rocketshake03
                                SpawnScript Rocketshake04
                                SpawnScript ST_SFX_Bomb05_activated
                            endif
                        endif
                    endif
                    printf ' bench '
                endif
            endif
        endif
    endif
endscript


script Rocketshake01 
    begin 
    wait 0.0 second
    g_endgoal_spin_00 ::obj_applyscaling {y = 0.9000 z = 0.9000}
    g_endgoal_spin_00 ::obj_setorientation x = 5.0 y = -5.0 z = 0.0
    wait 0.0 second
    g_endgoal_spin_00 ::obj_applyscaling {y = 1.0 z = 1.0}
    wait 0.0 second
    g_endgoal_spin_00 ::obj_applyscaling {y = 0.9200 z = 0.9200}
    g_endgoal_spin_00 ::obj_setorientation x = -5.0 y = 5.0 z = 0.0
    wait 0.0 second
    g_endgoal_spin_00 ::obj_applyscaling {y = 1.0 z = 1.0}
    repeat 
endscript


script Rocketshake02 
    begin 
    wait 0.0 second
    g_endgoal_spin_05 ::obj_applyscaling {y = 0.9000 z = 0.9000}
    g_endgoal_spin_05 ::obj_setorientation x = 5.0 y = -5.0 z = 0.0
    wait 0.0 second
    g_endgoal_spin_05 ::obj_applyscaling {y = 1.0 z = 1.0}
    wait 0.0 second
    g_endgoal_spin_05 ::obj_applyscaling {y = 0.9200 z = 0.9200}
    g_endgoal_spin_05 ::obj_setorientation x = -5.0 y = 5.0 z = 0.0
    wait 0.0 second
    g_endgoal_spin_05 ::obj_applyscaling {y = 1.0 z = 1.0}
    repeat 
endscript


script Rocketshake03 
    begin 
    wait 0.0 second
    g_endgoal_spin_06 ::obj_applyscaling {y = 0.9000 z = 0.9000}
    g_endgoal_spin_06 ::obj_setorientation x = 5.0 y = -5.0 z = 0.0
    wait 0.0 second
    g_endgoal_spin_06 ::obj_applyscaling {y = 1.0 z = 1.0}
    wait 0.0 second
    g_endgoal_spin_06 ::obj_applyscaling {y = 0.9200 z = 0.9200}
    g_endgoal_spin_06 ::obj_setorientation x = -5.0 y = 5.0 z = 0.0
    wait 0.0 second
    g_endgoal_spin_06 ::obj_applyscaling {y = 1.0 z = 1.0}
    repeat 
endscript


script Rocketshake04 
    begin 
    wait 0.0 second
    g_endgoal_spin_08 ::obj_applyscaling {y = 0.9000 z = 0.9000}
    g_endgoal_spin_08 ::obj_setorientation x = 5.0 y = -5.0 z = 0.0
    wait 0.0 second
    g_endgoal_spin_08 ::obj_applyscaling {y = 1.0 z = 1.0}
    wait 0.0 second
    g_endgoal_spin_08 ::obj_applyscaling {y = 0.9200 z = 0.9200}
    g_endgoal_spin_08 ::obj_setorientation x = -5.0 y = 5.0 z = 0.0
    wait 0.0 second
    g_endgoal_spin_08 ::obj_applyscaling {y = 1.0 z = 1.0}
    repeat 
endscript


script ST_SpinBomb_off 
    ClearExceptionGroup ST_SpinBomb_grindcheck
    seteventhandler Ex = SkaterJump scr = ST_SpinBomb_reset group = ST_SpinBomb_grindcheck
    seteventhandler Ex = SkaterEnterBail scr = ST_SpinBomb_reset group = ST_SpinBomb_grindcheck
    seteventhandler Ex = SkaterExitRail scr = ST_SpinBomb_reset group = ST_SpinBomb_grindcheck
    Block
endscript


script ST_SpinBomb_reset 
    change jm_timesround = 0
    change jm_spinbomb = 0
    PlaySkaterCamAnim stop
    if NOT skater ::IsSkaterFocused
        setslomo 1
    endif
    ClearExceptionGroup ST_SpinBomb_grindcheck
    KillSpawnedScript name = ST_SpinBomb_off
    kill_panel_message_if_it_exists id = message_spinbomb
endscript

jm_rockets = 0

script ST_rocket_spin2 
    GetTriggerArray spin onto
    if triggertype <trigger_array>
        change natas_exit_speed = 200
        SetFlag flag = FLAG_ROCKET
        if NOT skater ::IsSkaterFocused
            setslomo 0.7000
        endif
        SpawnScript ST_spinoff_check params = <...> 
    endif
endscript


script ST_spinoff_check 
    ClearExceptionGroup ST_spinoff
    SetExceptionHandler Ex = SkaterJump scr = ST_spinoff group = ST_spinoff params = <...> 
    SetExceptionHandler Ex = SkaterEnterBail scr = ST_spinoff group = ST_spinoff params = <...> 
    Block
endscript


script ST_spinoff 
    SpawnScript ST_spinoff_combobreak params = <...> 
    ClearExceptionGroup ST_spinoff
    KillSpawnedScript name = ST_spinoff_check
    if GotParam rocket
        switch <rocket>
            case green
            SetFlag flag = flag_green
            Kill name = TRG_rail_endgoal_rocket_22
            Kill name = TRG_rail_endgoal_rocket_24
            Kill name = TRG_rail_endgoal_rocket_25
            Kill name = TRG_rail_endgoal_rocket_29
            Kill name = TRG_rail_endgoal_rocket_30
            Kill name = TRG_rail_endgoal_rocket_31
            Kill name = TRG_rail_endgoal_rocket_32
            Kill name = TRG_rail_endgoal_rocket_36
            Kill name = TRG_rail_endgoal_rocket_37
            Kill name = TRG_rail_endgoal_rocket_38
            Kill name = TRG_rail_endgoal_rocket_43
            Kill name = TRG_rail_endgoal_rocket_44
            Kill name = TRG_rail_endgoal_rocket_45
            g_endgoal_rocket_22 ::obj_movetorelpos (0.0, -25.0, 0.0) Speed = 50
            g_endgoal_rocket_24 ::obj_movetorelpos (0.0, -25.0, 0.0) Speed = 50
            g_endgoal_rocket_25 ::obj_movetorelpos (0.0, -25.0, 0.0) Speed = 50
            g_endgoal_rocket_29 ::obj_movetorelpos (0.0, -25.0, 0.0) Speed = 50
            g_endgoal_rocket_30 ::obj_movetorelpos (0.0, -25.0, 0.0) Speed = 50
            g_endgoal_rocket_31 ::obj_movetorelpos (0.0, -25.0, 0.0) Speed = 50
            g_endgoal_rocket_32 ::obj_movetorelpos (0.0, -25.0, 0.0) Speed = 50
            g_endgoal_rocket_36 ::obj_movetorelpos (0.0, -25.0, 0.0) Speed = 50
            g_endgoal_rocket_37 ::obj_movetorelpos (0.0, -25.0, 0.0) Speed = 50
            g_endgoal_rocket_38 ::obj_movetorelpos (0.0, -25.0, 0.0) Speed = 50
            g_endgoal_rocket_43 ::obj_movetorelpos (0.0, -25.0, 0.0) Speed = 50
            g_endgoal_rocket_44 ::obj_movetorelpos (0.0, -25.0, 0.0) Speed = 50
            g_endgoal_rocket_45 ::obj_movetorelpos (0.0, -25.0, 0.0) Speed = 50
            case red
            SetFlag flag = flag_red
            Kill name = TRG_rail_endgoal_rocket_01
            Kill name = TRG_rail_endgoal_rocket_02
            Kill name = TRG_rail_endgoal_rocket_03
            Kill name = TRG_rail_endgoal_rocket_08
            Kill name = TRG_rail_endgoal_rocket_09
            Kill name = TRG_rail_endgoal_rocket_10
            Kill name = TRG_rail_endgoal_rocket_11
            Kill name = TRG_rail_endgoal_rocket_15
            Kill name = TRG_rail_endgoal_rocket_16
            Kill name = TRG_rail_endgoal_rocket_17
            Kill name = TRG_rail_endgoal_rocket_23
            g_endgoal_rocket_01 ::obj_movetorelpos (0.0, -25.0, 0.0) Speed = 50
            g_endgoal_rocket_02 ::obj_movetorelpos (0.0, -25.0, 0.0) Speed = 50
            g_endgoal_rocket_03 ::obj_movetorelpos (0.0, -25.0, 0.0) Speed = 50
            g_endgoal_rocket_08 ::obj_movetorelpos (0.0, -25.0, 0.0) Speed = 50
            g_endgoal_rocket_09 ::obj_movetorelpos (0.0, -25.0, 0.0) Speed = 50
            g_endgoal_rocket_10 ::obj_movetorelpos (0.0, -25.0, 0.0) Speed = 50
            g_endgoal_rocket_11 ::obj_movetorelpos (0.0, -25.0, 0.0) Speed = 50
            g_endgoal_rocket_15 ::obj_movetorelpos (0.0, -25.0, 0.0) Speed = 50
            g_endgoal_rocket_16 ::obj_movetorelpos (0.0, -25.0, 0.0) Speed = 50
            g_endgoal_rocket_17 ::obj_movetorelpos (0.0, -25.0, 0.0) Speed = 50
            g_endgoal_rocket_23 ::obj_movetorelpos (0.0, -25.0, 0.0) Speed = 50
            case purple
            SetFlag flag = FLAG_PURPLE
            Kill name = TRG_rail_endgoal_rocket_28
            Kill name = TRG_rail_endgoal_rocket_33
            Kill name = TRG_rail_endgoal_rocket_34
            Kill name = TRG_rail_endgoal_rocket_35
            Kill name = TRG_rail_endgoal_rocket_39
            Kill name = TRG_rail_endgoal_rocket_40
            Kill name = TRG_rail_endgoal_rocket_41
            Kill name = TRG_rail_endgoal_rocket_42
            Kill name = TRG_rail_endgoal_rocket_46
            Kill name = TRG_rail_endgoal_rocket_47
            Kill name = TRG_rail_endgoal_rocket_48
            Kill name = TRG_rail_endgoal_rocket_49
            g_endgoal_rocket_28 ::obj_movetorelpos (0.0, -25.0, 0.0) Speed = 50
            g_endgoal_rocket_33 ::obj_movetorelpos (0.0, -25.0, 0.0) Speed = 50
            g_endgoal_rocket_34 ::obj_movetorelpos (0.0, -25.0, 0.0) Speed = 50
            g_endgoal_rocket_35 ::obj_movetorelpos (0.0, -25.0, 0.0) Speed = 50
            g_endgoal_rocket_39 ::obj_movetorelpos (0.0, -25.0, 0.0) Speed = 50
            g_endgoal_rocket_40 ::obj_movetorelpos (0.0, -25.0, 0.0) Speed = 50
            g_endgoal_rocket_41 ::obj_movetorelpos (0.0, -25.0, 0.0) Speed = 50
            g_endgoal_rocket_42 ::obj_movetorelpos (0.0, -25.0, 0.0) Speed = 50
            g_endgoal_rocket_46 ::obj_movetorelpos (0.0, -25.0, 0.0) Speed = 50
            g_endgoal_rocket_47 ::obj_movetorelpos (0.0, -25.0, 0.0) Speed = 50
            g_endgoal_rocket_48 ::obj_movetorelpos (0.0, -25.0, 0.0) Speed = 50
            g_endgoal_rocket_49 ::obj_movetorelpos (0.0, -25.0, 0.0) Speed = 50
            case yellow
            SetFlag flag = flag_yellow
            Kill name = TRG_rail_endgoal_rocket_04
            Kill name = TRG_rail_endgoal_rocket_05
            Kill name = TRG_rail_endgoal_rocket_06
            Kill name = TRG_rail_endgoal_rocket_07
            Kill name = TRG_rail_endgoal_rocket_12
            Kill name = TRG_rail_endgoal_rocket_13
            Kill name = TRG_rail_endgoal_rocket_14
            Kill name = TRG_rail_endgoal_rocket_18
            Kill name = TRG_rail_endgoal_rocket_19
            Kill name = TRG_rail_endgoal_rocket_20
            Kill name = TRG_rail_endgoal_rocket_21
            Kill name = TRG_rail_endgoal_rocket_26
            Kill name = TRG_rail_endgoal_rocket_27
            g_endgoal_rocket_04 ::obj_movetorelpos (0.0, -25.0, 0.0) Speed = 50
            g_endgoal_rocket_05 ::obj_movetorelpos (0.0, -25.0, 0.0) Speed = 50
            g_endgoal_rocket_06 ::obj_movetorelpos (0.0, -25.0, 0.0) Speed = 50
            g_endgoal_rocket_07 ::obj_movetorelpos (0.0, -25.0, 0.0) Speed = 50
            g_endgoal_rocket_12 ::obj_movetorelpos (0.0, -25.0, 0.0) Speed = 50
            g_endgoal_rocket_13 ::obj_movetorelpos (0.0, -25.0, 0.0) Speed = 50
            g_endgoal_rocket_14 ::obj_movetorelpos (0.0, -25.0, 0.0) Speed = 50
            g_endgoal_rocket_18 ::obj_movetorelpos (0.0, -25.0, 0.0) Speed = 50
            g_endgoal_rocket_19 ::obj_movetorelpos (0.0, -25.0, 0.0) Speed = 50
            g_endgoal_rocket_20 ::obj_movetorelpos (0.0, -25.0, 0.0) Speed = 50
            g_endgoal_rocket_21 ::obj_movetorelpos (0.0, -25.0, 0.0) Speed = 50
            g_endgoal_rocket_26 ::obj_movetorelpos (0.0, -25.0, 0.0) Speed = 50
            g_endgoal_rocket_27 ::obj_movetorelpos (0.0, -25.0, 0.0) Speed = 50
        endswitch
        change jm_rockets = (jm_rockets + 1)
        GoalManager_GetDifficultyLevel
        if (<difficulty_level> = 0)
            if (jm_rockets = 1)
                if GoalManager_GoalExists name = ST_Goal_Gaps22
                    if NOT GoalManager_GoalFlagSet name = ST_Goal_Gaps22 flag = got_1
                        SetFlag flag = FLAG_ROCKET2
                        GoalManager_SetGoalFlag name = ST_Goal_Gaps22 got_1 1
                        Kill prefix = 'trg_endgoal_rocket_fly_'
                        Create name = g_endgoal_rockets_complete
                        CreateFastParticleSystem name = radiowaves04 params_script = apm_st_radioWaves_fast_particle_params
                        radiowaves04 ::obj_setposition position = (1190.0, 5753.0, 1894.0)
                        SpawnScript ST_SFX_Bomb04_activated
                    endif
                endif
            endif
        else
            FormatText textname = rockets_text '%c/4 Spins' c = jm_rockets
            create_panel_message id = message_rockets text = <rockets_text> style = style_ST_boxbomb z_priority = -30
            if (jm_rockets = 4)
                if GoalManager_GoalExists name = ST_Goal_Gaps22
                    if NOT GoalManager_GoalFlagSet name = ST_Goal_Gaps22 flag = got_1
                        SetFlag flag = FLAG_ROCKET2
                        GoalManager_SetGoalFlag name = ST_Goal_Gaps22 got_1 1
                        Kill prefix = 'trg_endgoal_rocket_fly_'
                        Create name = g_endgoal_rockets_complete
                        CreateFastParticleSystem name = radiowaves04 params_script = apm_st_radioWaves_fast_particle_params
                        radiowaves04 ::obj_setposition position = (1190.0, 5753.0, 1894.0)
                        SpawnScript ST_SFX_Bomb04_activated
                    endif
                endif
            endif
        endif
    endif
endscript


script ST_spinoff_combobreak 
    ClearExceptionGroup ST_spinoff
    SetExceptionHandler Ex = SkaterExitCombo scr = ST_spin_cam_reset group = ST_spinoff params = <...> 
    SetExceptionHandler Ex = SkaterEnterBail scr = ST_spin_cam_reset group = ST_spinoff params = <...> 
    SetExceptionHandler Ex = SkaterEnterGround scr = ST_spin_cam_reset group = ST_spinoff params = <...> 
    SetExceptionHandler Ex = SkaterEnterManual scr = ST_spin_cam_reset group = ST_spinoff params = <...> 
    SetExceptionHandler Ex = SkaterPointRail scr = ST_spin_cam_reset group = ST_spinoff params = <...> 
    SetExceptionHandler Ex = SkaterEnterRail scr = ST_spin_cam_reset group = ST_spinoff params = <...> 
    SetExceptionHandler Ex = SkaterEnterLadder scr = ST_spin_cam_reset group = ST_spinoff params = <...> 
    Block
endscript


script ST_spin_cam_reset 
    if GetFlag flag = FLAG_ROCKET
        ClearExceptionGroup ST_spinoff
        KillSpawnedScript name = ST_spinoff_combobreak
        KillSpawnedScript name = ST_spinoff_check
        if NOT skater ::IsSkaterFocused
            setslomo 1
        endif
        UnSetFlag flag = FLAG_ROCKET
        if NOT GetFlag flag = FLAG_ROCKET2
            if GetFlag flag = flag_green
                wait 12 frames
                g_endgoal_rocket_22 ::obj_movetorelpos (0.0, 25.0, 0.0) Speed = 50
                g_endgoal_rocket_24 ::obj_movetorelpos (0.0, 25.0, 0.0) Speed = 50
                g_endgoal_rocket_25 ::obj_movetorelpos (0.0, 25.0, 0.0) Speed = 50
                g_endgoal_rocket_29 ::obj_movetorelpos (0.0, 25.0, 0.0) Speed = 50
                g_endgoal_rocket_30 ::obj_movetorelpos (0.0, 25.0, 0.0) Speed = 50
                g_endgoal_rocket_31 ::obj_movetorelpos (0.0, 25.0, 0.0) Speed = 50
                g_endgoal_rocket_32 ::obj_movetorelpos (0.0, 25.0, 0.0) Speed = 50
                g_endgoal_rocket_36 ::obj_movetorelpos (0.0, 25.0, 0.0) Speed = 50
                g_endgoal_rocket_37 ::obj_movetorelpos (0.0, 25.0, 0.0) Speed = 50
                g_endgoal_rocket_38 ::obj_movetorelpos (0.0, 25.0, 0.0) Speed = 50
                g_endgoal_rocket_43 ::obj_movetorelpos (0.0, 25.0, 0.0) Speed = 50
                g_endgoal_rocket_44 ::obj_movetorelpos (0.0, 25.0, 0.0) Speed = 50
                g_endgoal_rocket_45 ::obj_movetorelpos (0.0, 25.0, 0.0) Speed = 50
                Create name = TRG_rail_endgoal_rocket_22
                Create name = TRG_rail_endgoal_rocket_24
                Create name = TRG_rail_endgoal_rocket_25
                Create name = TRG_rail_endgoal_rocket_29
                Create name = TRG_rail_endgoal_rocket_30
                Create name = TRG_rail_endgoal_rocket_31
                Create name = TRG_rail_endgoal_rocket_32
                Create name = TRG_rail_endgoal_rocket_36
                Create name = TRG_rail_endgoal_rocket_37
                Create name = TRG_rail_endgoal_rocket_38
                Create name = TRG_rail_endgoal_rocket_43
                Create name = TRG_rail_endgoal_rocket_44
                Create name = TRG_rail_endgoal_rocket_45
            endif
            if GetFlag flag = flag_red
                wait 12 frames
                g_endgoal_rocket_01 ::obj_movetorelpos (0.0, 25.0, 0.0) Speed = 50
                g_endgoal_rocket_02 ::obj_movetorelpos (0.0, 25.0, 0.0) Speed = 50
                g_endgoal_rocket_03 ::obj_movetorelpos (0.0, 25.0, 0.0) Speed = 50
                g_endgoal_rocket_08 ::obj_movetorelpos (0.0, 25.0, 0.0) Speed = 50
                g_endgoal_rocket_09 ::obj_movetorelpos (0.0, 25.0, 0.0) Speed = 50
                g_endgoal_rocket_10 ::obj_movetorelpos (0.0, 25.0, 0.0) Speed = 50
                g_endgoal_rocket_11 ::obj_movetorelpos (0.0, 25.0, 0.0) Speed = 50
                g_endgoal_rocket_15 ::obj_movetorelpos (0.0, 25.0, 0.0) Speed = 50
                g_endgoal_rocket_16 ::obj_movetorelpos (0.0, 25.0, 0.0) Speed = 50
                g_endgoal_rocket_17 ::obj_movetorelpos (0.0, 25.0, 0.0) Speed = 50
                g_endgoal_rocket_23 ::obj_movetorelpos (0.0, 25.0, 0.0) Speed = 50
                Create name = TRG_rail_endgoal_rocket_01
                Create name = TRG_rail_endgoal_rocket_02
                Create name = TRG_rail_endgoal_rocket_03
                Create name = TRG_rail_endgoal_rocket_08
                Create name = TRG_rail_endgoal_rocket_09
                Create name = TRG_rail_endgoal_rocket_10
                Create name = TRG_rail_endgoal_rocket_11
                Create name = TRG_rail_endgoal_rocket_15
                Create name = TRG_rail_endgoal_rocket_16
                Create name = TRG_rail_endgoal_rocket_17
                Create name = TRG_rail_endgoal_rocket_23
            endif
            if GetFlag flag = FLAG_PURPLE
                wait 12 frames
                g_endgoal_rocket_28 ::obj_movetorelpos (0.0, 25.0, 0.0) Speed = 50
                g_endgoal_rocket_33 ::obj_movetorelpos (0.0, 25.0, 0.0) Speed = 50
                g_endgoal_rocket_34 ::obj_movetorelpos (0.0, 25.0, 0.0) Speed = 50
                g_endgoal_rocket_35 ::obj_movetorelpos (0.0, 25.0, 0.0) Speed = 50
                g_endgoal_rocket_39 ::obj_movetorelpos (0.0, 25.0, 0.0) Speed = 50
                g_endgoal_rocket_40 ::obj_movetorelpos (0.0, 25.0, 0.0) Speed = 50
                g_endgoal_rocket_41 ::obj_movetorelpos (0.0, 25.0, 0.0) Speed = 50
                g_endgoal_rocket_42 ::obj_movetorelpos (0.0, 25.0, 0.0) Speed = 50
                g_endgoal_rocket_46 ::obj_movetorelpos (0.0, 25.0, 0.0) Speed = 50
                g_endgoal_rocket_47 ::obj_movetorelpos (0.0, 25.0, 0.0) Speed = 50
                g_endgoal_rocket_48 ::obj_movetorelpos (0.0, 25.0, 0.0) Speed = 50
                g_endgoal_rocket_49 ::obj_movetorelpos (0.0, 25.0, 0.0) Speed = 50
                Create name = TRG_rail_endgoal_rocket_28
                Create name = TRG_rail_endgoal_rocket_33
                Create name = TRG_rail_endgoal_rocket_34
                Create name = TRG_rail_endgoal_rocket_35
                Create name = TRG_rail_endgoal_rocket_39
                Create name = TRG_rail_endgoal_rocket_40
                Create name = TRG_rail_endgoal_rocket_41
                Create name = TRG_rail_endgoal_rocket_42
                Create name = TRG_rail_endgoal_rocket_46
                Create name = TRG_rail_endgoal_rocket_47
                Create name = TRG_rail_endgoal_rocket_48
                Create name = TRG_rail_endgoal_rocket_49
            endif
            if GetFlag flag = flag_yellow
                wait 12 frames
                g_endgoal_rocket_04 ::obj_movetorelpos (0.0, 25.0, 0.0) Speed = 50
                g_endgoal_rocket_05 ::obj_movetorelpos (0.0, 25.0, 0.0) Speed = 50
                g_endgoal_rocket_06 ::obj_movetorelpos (0.0, 25.0, 0.0) Speed = 50
                g_endgoal_rocket_07 ::obj_movetorelpos (0.0, 25.0, 0.0) Speed = 50
                g_endgoal_rocket_12 ::obj_movetorelpos (0.0, 25.0, 0.0) Speed = 50
                g_endgoal_rocket_13 ::obj_movetorelpos (0.0, 25.0, 0.0) Speed = 50
                g_endgoal_rocket_14 ::obj_movetorelpos (0.0, 25.0, 0.0) Speed = 50
                g_endgoal_rocket_18 ::obj_movetorelpos (0.0, 25.0, 0.0) Speed = 50
                g_endgoal_rocket_19 ::obj_movetorelpos (0.0, 25.0, 0.0) Speed = 50
                g_endgoal_rocket_20 ::obj_movetorelpos (0.0, 25.0, 0.0) Speed = 50
                g_endgoal_rocket_21 ::obj_movetorelpos (0.0, 25.0, 0.0) Speed = 50
                g_endgoal_rocket_26 ::obj_movetorelpos (0.0, 25.0, 0.0) Speed = 50
                g_endgoal_rocket_27 ::obj_movetorelpos (0.0, 25.0, 0.0) Speed = 50
                Create name = TRG_rail_endgoal_rocket_04
                Create name = TRG_rail_endgoal_rocket_05
                Create name = TRG_rail_endgoal_rocket_06
                Create name = TRG_rail_endgoal_rocket_07
                Create name = TRG_rail_endgoal_rocket_12
                Create name = TRG_rail_endgoal_rocket_13
                Create name = TRG_rail_endgoal_rocket_14
                Create name = TRG_rail_endgoal_rocket_18
                Create name = TRG_rail_endgoal_rocket_19
                Create name = TRG_rail_endgoal_rocket_20
                Create name = TRG_rail_endgoal_rocket_21
                Create name = TRG_rail_endgoal_rocket_26
                Create name = TRG_rail_endgoal_rocket_27
            endif
            UnSetFlag flag = flag_green
            UnSetFlag flag = flag_red
            UnSetFlag flag = FLAG_PURPLE
            UnSetFlag flag = flag_yellow
            change jm_rockets = 0
            FormatText textname = rockets_text 'Rockets Reset' c = jm_rockets
            create_panel_message id = message_rockets text = <rockets_text> style = style_ST_boxbomb z_priority = -30
            change natas_exit_speed = 300
            wait 2 seconds
            kill_panel_message_if_it_exists id = message_rockets
        endif
        PlaySkaterCamAnim stop
        if NOT skater ::IsSkaterFocused
            setslomo 1
        endif
    endif
endscript

jm_boxbomb = 0

script st_bombbox 
    GetTriggerArray through
    if triggertype <trigger_array>
        if GetFlag flag = FLAG_COMBO
            if NOT GetFlag flag = FLAG_COMBO2
                SetFlag flag = FLAG_COMBO2
            endif
            if GetFlag flag = FLAG_COMBO3
                SetFlag flag = FLAG_COMBO4
            endif
            change jm_boxbomb = (jm_boxbomb + 1)
            FormatText textname = boxbomb_text '%c/8 boxbombs' c = jm_boxbomb
            create_panel_message id = message_boxbomb text = <boxbomb_text> style = style_ST_boxbomb z_priority = -30
            if (jm_boxbomb = 8)
                if GoalManager_GoalExists name = ST_Goal_Gaps24
                    if NOT GoalManager_GoalFlagSet name = ST_Goal_Gaps24 flag = got_1
                        UnSetFlag flag = FLAG_COMBO4
                        Create name = g_endgoal_bombbox_antenna_on01
                        CreateFastParticleSystem name = radiowaves02 params_script = apm_st_radioWaves_fast_particle_params
                        radiowaves02 ::obj_setposition position = (844.0, 6258.0, -2316.0)
                        GoalManager_SetGoalFlag name = ST_Goal_Gaps24 got_1 1
                        SpawnScript ST_SFX_Bomb02_activated
                    endif
                endif
            endif
            playsound ST_OldSchoolJump
            switch <boxNum>
                case 1
                Create name = g_endgoal_bombbox_on_01
                Kill name = g_endgoal_bombbox_trig_01
                case 2
                Create name = g_endgoal_bombbox_on_02
                Kill name = g_endgoal_bombbox_trig_02
                case 4
                Create name = g_endgoal_bombbox_on_04
                Kill name = g_endgoal_bombbox_trig_04
                case 7
                Create name = g_endgoal_bombbox_on_07
                Kill name = g_endgoal_bombbox_trig_07
                case 8
                Create name = g_endgoal_bombbox_on_08
                Kill name = g_endgoal_bombbox_trig_08
                case 9
                Create name = g_endgoal_bombbox_on_09
                Kill name = g_endgoal_bombbox_trig_09
                case 10
                Create name = g_endgoal_bombbox_on_10
                Kill name = g_endgoal_bombbox_trig_10
                case 12
                Create name = g_endgoal_bombbox_on_12
                Kill name = g_endgoal_bombbox_trig_12
            endswitch
        endif
    endif
endscript


script st_ez_bombbox 
    change jm_boxbomb = (jm_boxbomb + 1)
    FormatText textname = boxbomb_text '%c/8 boxbombs' c = jm_boxbomb
    create_panel_message id = message_boxbomb text = <boxbomb_text> style = style_ST_boxbomb z_priority = -30
    if (jm_boxbomb = 8)
        if GoalManager_GoalExists name = ST_Goal_Gaps24
            if NOT GoalManager_GoalFlagSet name = ST_Goal_Gaps24 flag = got_1
                Create name = g_endgoal_bombbox_antenna_on01
                CreateFastParticleSystem name = radiowaves02 params_script = apm_st_radioWaves_fast_particle_params
                radiowaves02 ::obj_setposition position = (844.0, 6258.0, -2316.0)
                GoalManager_SetGoalFlag name = ST_Goal_Gaps24 got_1 1
            endif
        endif
    endif
    playsound ST_OldSchoolJump
    switch <boxNum>
        case 1
        Create name = g_endgoal_bombbox_on_01
        Kill name = g_endgoal_bombbox_eztrig_01
        case 2
        Create name = g_endgoal_bombbox_on_02
        Kill name = g_endgoal_bombbox_eztrig_02
        case 4
        Create name = g_endgoal_bombbox_on_04
        Kill name = g_endgoal_bombbox_eztrig_04
        case 7
        Create name = g_endgoal_bombbox_on_07
        Kill name = g_endgoal_bombbox_eztrig_07
        case 8
        Create name = g_endgoal_bombbox_on_08
        Kill name = g_endgoal_bombbox_eztrig_08
        case 9
        Create name = g_endgoal_bombbox_on_09
        Kill name = g_endgoal_bombbox_eztrig_09
        case 10
        Create name = g_endgoal_bombbox_on_10
        Kill name = g_endgoal_bombbox_eztrig_10
        case 12
        Create name = g_endgoal_bombbox_on_12
        Kill name = g_endgoal_bombbox_eztrig_12
    endswitch
endscript


script ST_combo_checkinit 
    SpawnScript ST_combo_check
endscript


script ST_combo_check 
    if GetFlag flag = FLAG_COMBO4
        if (jm_boxbomb > 0)
            if NOT (jm_boxbomb = 15)
                UnSetFlag flag = FLAG_COMBO2
                UnSetFlag flag = FLAG_COMBO3
                UnSetFlag flag = FLAG_COMBO4
                change jm_boxbomb = 0
                Create prefix = 'g_endgoal_bombbox_trig_'
                Kill prefix = 'g_endgoal_bombbox_on_'
                FormatText textname = boxbomb_text 'box bombs reset'
                create_panel_message id = message_boxbomb text = <boxbomb_text> style = style_ST_boxbomb z_priority = -30
            endif
        endif
    endif
    if GetFlag flag = FLAG_COMBO2
        SetFlag flag = FLAG_COMBO3
    endif
    UnSetFlag flag = FLAG_COMBO
    ClearExceptionGroup ST_skaterincombo
    SetException Ex = SkaterEnterCombo scr = ST_incombo group = ST_skaterincombo
    Block
endscript


script ST_incombo 
    SetFlag flag = FLAG_COMBO
    ClearExceptionGroup ST_skaterincombo
    SetException Ex = SkaterExitCombo scr = ST_combo_check group = ST_skaterincombo
    Block
endscript


script style_ST_boxbomb 
    setprops just = [ center center ] rgba = [ 120 120 0 255 ]
    DoMorph time = 0.2000 Pos = (320.0, 80.0) Scale = 1.500 alpha = 0.8000
    DoMorph time = 0.1000 Scale = 1.200 alpha = 1
    wait 0.7000 seconds
    DoMorph time = 0.1000 Scale = 0 alpha = 0
    wait 60 frames
    kill_panel_message_if_it_exists id = message_boxbomb
endscript


script ST_bomb_tnt 
    if IsAlive name = <tnt_trig>
        Kill name = <tnt_trig>
    endif
    if NOT IsAlive name = <tnt_on>
        Create name = <tnt_on>
    endif
    if IsAlive name = <tnt_name>
        ShakeCamera {
            duration = 1
            vert_amp = 9.0
            horiz_amp = 3.0
            vert_vel = 10.27
            horiz_vel = 5.920
        }
        begin 
        wait 0.01000 second
        <tnt_name> ::obj_applyscaling {y = 0.9000 z = 0.9000}
        <tnt_name> ::obj_setorientation x = 5.0 y = -5.0 z = 0.0
        wait 0.01000 second
        <tnt_name> ::obj_applyscaling {y = 1.0 z = 1.0}
        wait 0.01000 second
        <tnt_name> ::obj_applyscaling {y = 0.9200 z = 0.9200}
        <tnt_name> ::obj_setorientation x = -5.0 y = 5.0 z = 0.0
        wait 0.01000 second
        <tnt_name> ::obj_applyscaling {y = 1.0 z = 1.0}
        repeat 10
        SpawnScript ST_SFX_ExplodingGarbage
        CreateFastParticleSystem name = tnt_xplode01 params_script = apm_ST_Xplode01_fast_particle_params attachobjid = <tnt_name>
        CreateFastParticleSystem name = tnt_xplode02 params_script = apm_ST_Xplode02_fast_particle_params attachobjid = <tnt_name>
        CreateFastParticleSystem name = tnt_xplode03 params_script = apm_ST_bigsparks01_fast_particle_params attachobjid = <tnt_name>
    endif
    if IsAlive name = <tnt_name>
        Kill name = <tnt_name>
    endif
    if IsAlive name = <tnt_on>
        Kill name = <tnt_on>
    endif
endscript


script ST_BAM_Advance 
    Obj_ClearExceptions
    setup_ped_speech {
        ped_id = TRG_Ped_Bam
        activation_script = ChapterAdvanceDialog
        accept_text = 'Bam Margera press \m5 to talk'
    }
    Ped_InitAI stand should_look_at_skater = 1
endscript


script ST_zip_engines1 
    TRG_veh_zip_01 ::CreateFlexibleParticleSystem name = zip01 params_script = apm_ST_OILYsmoke_ZIP_particle_params
    begin 
    wait 0.0 second
    obj_applyscaling {y = 0.9000 z = 0.9000}
    wait 0.0 second
    obj_applyscaling {y = 1.0 z = 1.0}
    wait 0.0 second
    obj_applyscaling {y = 0.9200 z = 0.9200}
    wait 0.0 second
    obj_applyscaling {y = 1.0 z = 1.0}
    wait 0.0 second
    repeat 
endscript


script ST_zip_engines2 
    begin 
    wait 0.0 second
    obj_applyscaling {y = 0.9800 z = 0.9800}
    wait 0.0 second
    obj_applyscaling {y = 1.0 z = 1.0}
    wait 0.0 second
    obj_applyscaling {y = 0.9800 z = 0.9800}
    wait 0.0 second
    obj_applyscaling {y = 1.0 z = 1.0}
    wait 0.0 second
    repeat 
endscript


script st_critter_start 
    SpawnScript ST_Critter_Timer
    if NOT GotParam just_won_goal
        if NOT IsAlive name = trg_endgoal_dog1
            Create prefix = 'trg_endgoal_dog'
        endif
        if NOT IsAlive name = g_endgoal_dog_trig1
            Create prefix = 'g_endgoal_dog_trig'
        endif
        if NOT IsAlive name = TRG_ped_endgoal_escape_01
            Create prefix = 'TRG_ped_endgoal_escape_'
        endif
        if NOT IsAlive name = TRG_ped_escape_pinkcat
            Create name = TRG_ped_escape_pinkcat
        endif
    endif
endscript


script ST_Critter_TimeExpire 
    printf 'st expire'
    Kill name = Box03
    GoalManager_LoseGoal name = ST_goal_gaps21
    ST_kill_zipline_scripts
    skater ::Sk3_KillSkater nodeName = TRG_restart_finalgoal2 NoMessage
    if IsAlive name = TRG_ped_escape_pinkcat
        Kill name = TRG_ped_escape_pinkcat
    endif
    wait 10 frames
    GoalManager_ActivateGoal name = ST_goal_gaps21
    Create name = Box03
endscript


script ST_Critter_deactivate 
    if NOT GotParam just_won_goal
        if IsAlive name = TRG_ped_escape_pinkcat
            Kill name = TRG_ped_escape_pinkcat
        endif
        if IsAlive name = trg_endgoal_dog1
            Kill prefix = 'trg_endgoal_dog'
        endif
        if IsAlive name = g_endgoal_dog_trig1
            Kill prefix = 'g_endgoal_dog_trig'
        endif
        if IsAlive name = TRG_ped_endgoal_escape_01
            Kill prefix = 'TRG_ped_endgoal_escape_'
        endif
    endif
    kill_panel_message_if_it_exists id = critter_goal
    kill_panel_message_if_it_exists id = message_critter
    KillSpawnedScript name = ST_Got_Critter
endscript


script ST_Critter_Fail_Reset 
    printf ' got critter fail reset'
endscript


script ST_ped_escape 
    <scape_vel> = Random (@ 10 @ 20 @ 30)
    obj_followpathlinked
    obj_setpathvelocity <scape_vel> mph
    obj_sticktoground on distabove = 10 distbelow = 10
    obj_setpathacceleration 20 mphps
    Obj_PlayAnim anim = run Cycle
endscript


script ST_Got_Critter 
    if IsAlive name = <dog>
        <dog> ::obj_spawnscript ST_SFX_Random_Dog_Whimper
        <dog> ::obj_followpathlinked
    endif
    if IsAlive name = <dog>
        <dog> ::Obj_PlayAnim anim = RunFromIdle
    endif
    if IsAlive name = <dog>
        <dog> ::Obj_WaitAnimFinished
    endif
    if IsAlive name = <dog>
        <dog> ::Obj_PlayAnim anim = run Cycle
    endif
    Kill name = <Trig>
    critter_timer_addtime frames = 50
    FormatText textname = critter3_text 'critter bonus!'
    create_panel_message id = message_critter3 text = <critter3_text> style = style_ST_critter3 z_priority = -29
endscript


script ST_Critter_Timer 
    create_critter_timer rgba = [ 80 255 80 128 ] mins = 0 secs = 5 frames = 10 callback = ST_Critter_TimeExpire
    create_panel_block id = critter_goal text = 'Save the Dogs and Exit Skatopia Before Time Reaches Zero!' style = panel_message_goal
endscript


script ST_Critter_Success 
    printf 'st success'
    if GoalManager_GoalExists name = ST_goal_gaps21
        kill_panel_message_if_it_exists id = message_critter
        kill_panel_message_if_it_exists id = critter_goal
        KillSpawnedScript name = ST_Critter_Timer
        KillSpawnedScript name = critter_count_down
        GoalManager_SetGoalFlag name = ST_goal_gaps21 got_1 1
        destroy_digital_timer
    endif
endscript


script critter_count_down 
    mins ::gettags
    GetElapsedTime starttime = <time>
    if NOT GotParam no_recalc
        endtime = ((<mins> * 60000)+ (<secs> * 1000)+ ((<frames> * 50)/ 3))
        mins ::settags endtime = <endtime>
    endif
    begin 
    mins ::getsingletag endtime
    GetElapsedTime starttime = <time>
    timeleft = (<endtime> - <elapsedtime>)
    timeholder = <timeleft>
    if (<timeholder> < 1)
        SetScreenElementProps id = mins text = '0'
        SetScreenElementProps id = mins2 text = '0'
        SetScreenElementProps id = secs text = '0'
        SetScreenElementProps id = secs2 text = '0'
        SetScreenElementProps id = frames text = '0'
        SetScreenElementProps id = frames2 text = '0'
        break 
    else
        minutes = (<timeholder> / 60000)
        min1 = (<minutes> - ((<minutes> / 10)* 10))
        min2 = (<minutes> / 10)
        seconds = (<timeholder> / 1000 - <minutes> * 60)
        sec1 = (<seconds> - ((<seconds> / 10)* 10))
        sec2 = (<seconds> / 10)
        frames = ((<timeholder> * 3)/ 50 - <minutes> * 3600 - <seconds> * 60)
        frame1 = (<frames> - ((<frames> / 10)* 10))
        frame2 = (<frames> / 10)
        FormatText textname = min_text1 '%m' m = <min1>
        FormatText textname = min_text2 '%m' m = <min2>
        FormatText textname = sec_text1 '%m' m = <sec1>
        FormatText textname = sec_text2 '%m' m = <sec2>
        FormatText textname = frame_text1 '%m' m = <frame1>
        FormatText textname = frame_text2 '%m' m = <frame2>
        SetScreenElementProps id = mins text = <min_text1>
        SetScreenElementProps id = mins2 text = <min_text2>
        SetScreenElementProps id = secs text = <sec_text1>
        SetScreenElementProps id = secs2 text = <sec_text2>
        SetScreenElementProps id = frames text = <frame_text1>
        SetScreenElementProps id = frames2 text = <frame_text2>
        wait 2 gameframes
    endif
    if (<seconds> < 2)
        if NOT issoundplaying TimeoutA
            playsound TimeoutA
        endif
    endif
    repeat 
    <callback> <callback_params>
endscript


script critter_timer_addtime mins = 0 secs = 0 frames = 0
    mins ::getsingletag endtime
    endtime2 = (<endtime> + <mins> * 60000 + <secs> * 1000 + (<frames> * 50)/ 3)
    mins ::settags endtime = <endtime2>
endscript


script create_critter_timer Pos = (50.0, 100.0) Scale = 1.500 alpha = 0.6000 font = dialog rgba = [ 128 128 128 128 ] mins = 2 secs = 16 frames = 3
    KillSpawnedScript critter_count_down
    if ScreenElementExists id = digital_timer_anchor
        DestroyScreenElement id = digital_timer_anchor
    endif
    SetScreenElementLock Off id = root_window
    CreateScreenElement {
        type = ContainerElement
        id = digital_timer_anchor
        parent = root_window
        Pos = <Pos>
        just = [ left top ]
    }
    CreateScreenElement {
        type = TextElement
        parent = digital_timer_anchor
        id = mins2
        Pos = (0.0, 0.0)
        text = '0'
        font = <font>
        just = [ RIGHT top ]
        Scale = <Scale>
        alpha = <alpha>
        rgba = <rgba>
    }
    GetStackedScreenElementPos x id = <id> Offset = (23.0, 0.0)
    CreateScreenElement {
        type = TextElement
        parent = digital_timer_anchor
        id = mins
        Pos = <Pos>
        text = '0'
        font = <font>
        just = [ RIGHT top ]
        Scale = <Scale>
        alpha = <alpha>
        rgba = <rgba>
    }
    GetStackedScreenElementPos x id = <id> Offset = (5.0, -2.0)
    CreateScreenElement {
        type = TextElement
        parent = digital_timer_anchor
        Pos = <Pos>
        text = ':'
        font = <font>
        just = [ left top ]
        Scale = <Scale>
        alpha = <alpha>
        rgba = <rgba>
    }
    GetStackedScreenElementPos x id = <id> Offset = (23.0, 2.0)
    CreateScreenElement {
        type = TextElement
        parent = digital_timer_anchor
        id = secs2
        Pos = <Pos>
        text = '0'
        font = <font>
        just = [ RIGHT top ]
        Scale = <Scale>
        alpha = <alpha>
        rgba = <rgba>
    }
    GetStackedScreenElementPos x id = <id> Offset = (23.0, 0.0)
    CreateScreenElement {
        type = TextElement
        parent = digital_timer_anchor
        id = secs
        Pos = <Pos>
        text = '0'
        font = <font>
        just = [ RIGHT top ]
        Scale = <Scale>
        alpha = <alpha>
        rgba = <rgba>
    }
    GetStackedScreenElementPos x id = <id> Offset = (5.0, -2.0)
    CreateScreenElement {
        type = TextElement
        parent = digital_timer_anchor
        Pos = <Pos>
        text = ':'
        font = <font>
        just = [ left top ]
        Scale = <Scale>
        alpha = <alpha>
        rgba = <rgba>
    }
    GetStackedScreenElementPos x id = <id> Offset = (23.0, 2.0)
    CreateScreenElement {
        type = TextElement
        parent = digital_timer_anchor
        id = frames2
        Pos = <Pos>
        text = '0'
        font = <font>
        just = [ RIGHT top ]
        Scale = <Scale>
        alpha = <alpha>
        rgba = <rgba>
    }
    GetStackedScreenElementPos x id = <id> Offset = (23.0, 0.0)
    CreateScreenElement {
        type = TextElement
        parent = digital_timer_anchor
        id = frames
        Pos = <Pos>
        text = '0'
        font = <font>
        just = [ RIGHT top ]
        Scale = <Scale>
        alpha = <alpha>
        rgba = <rgba>
    }
    <mins2> = (<mins> / 10)
    <mins1> = (<mins> - (<mins2> * 10))
    <secs2> = (<secs> / 10)
    <secs1> = (<secs> - (<secs2> * 10))
    <frames2> = (<frames> / 10)
    <frames1> = (<frames> - (<frames2> * 10))
    FormatText textname = min_text '%m' m = <mins1>
    SetScreenElementProps id = mins text = <min_text>
    FormatText textname = min_text '%m' m = <mins2>
    SetScreenElementProps id = mins2 text = <min_text>
    FormatText textname = sec_text '%s' s = <secs1>
    SetScreenElementProps id = secs text = <sec_text>
    FormatText textname = sec_text '%s' s = <secs2>
    SetScreenElementProps id = secs2 text = <sec_text>
    FormatText textname = frame_text '%f' f = <frames1>
    SetScreenElementProps id = frames text = <frame_text>
    FormatText textname = frame_text '%f' f = <frames2>
    SetScreenElementProps id = frames2 text = <frame_text>
    GetStartTime
    mins ::settags frames = <frames> secs = <secs> mins = <mins> callback = <callback> callback_params = <callback_params> time = <starttime>
    RunScriptOnScreenElement id = secs critter_count_down
endscript


script ST_dog_setup 
    obj_setpathvelocity 40 mph
    obj_sticktoground on distabove = 10 distbelow = 10
    obj_setpathacceleration 80 mphps
    <pupscale> = Random (@ 0.7000 @ 0.9000 @ 1 @ 1.150)
    obj_applyscaling {x = <pupscale> y = <pupscale> z = <pupscale>}
    begin 
    Random (
        @ Obj_PlayAnim anim = idle
        @ Obj_PlayAnim anim = Idle2
    )
    Obj_WaitAnimFinished
    repeat 
endscript


script ST_bigfoot_trickspot 
    UnSetFlag flag = FLAG_BIGTRICK
    if GoalManager_GoalExists name = ST_Goal_Gaps17
        if NOT GoalManager_GoalIsLocked name = ST_Goal_Gaps17
            if NOT GoalManager_GoalFlagSet name = ST_Goal_Gaps17 flag = <goalflag>
                if NOT GetFlag flag = FLAG_BIGTRICK
                    begin 
                    wait 1 frame
                    GetNumberOfTrickOccurrences TrickText = 'Bigfoot flip'
                    if (<number_of_occurrences> > 0)
                        SpawnScript ST_SFX_GrowTree
                        PauseSkaters
                        if GoalManager_GoalExists name = ST_Goal_Gaps17
                            GoalManager_SetGoalFlag name = ST_Goal_Gaps17 <goalflag> 1
                            if NOT IsAlive name = <Plant>
                                CreateFastParticleSystem name = greenblast02 params_script = apm_ST_greenBlast02_fast_particle_params
                                greenblast02 ::obj_setposition position = (436.0, 6054.0, 2969.0)
                                CreateFastParticleSystem name = greenblast01 params_script = apm_ST_greenBlast01_fast_particle_params
                                greenblast01 ::obj_setposition position = (436.0, 6054.0, 2969.0)
                                Create name = <Plant>
                                Create name = <shadow>
                            endif
                        endif
                        wait 30 frames
                        UnpauseSkaters
                        break 
                    endif
                    if GetFlag flag = FLAG_BIGTRICK
                        break 
                    endif
                    repeat 
                endif
            endif
        endif
    endif
endscript


script ST_bigfoot_trickspotoff 
    SetFlag flag = FLAG_BIGTRICK
endscript


script ST_walkcheck_init 
    SpawnScript ST_skater_walk
endscript


script ST_skater_walk 
    printf 'ST_skater_walk'
    ClearExceptionGroup ST_inwalk
    UnSetFlag flag = Flag_Walk
    SetExceptionHandler Ex = SkaterEnterWalking scr = ST_walk_active group = ST_inwalk
    Block
endscript


script ST_walk_active 
    printf 'ST_walk_active'
    ClearExceptionGroup ST_inwalk
    SetFlag flag = Flag_Walk
    SetExceptionHandler Ex = SkaterExitWalking scr = ST_skater_walk group = ST_inwalk
    Block
endscript


script ST_wallcheck_init 
    SpawnScript ST_skater_wallride
endscript


script ST_skater_wallride 
    printf 'ST_skater_wallride'
    ClearExceptionGroup ST_inwall
    UnSetFlag flag = FLAG_WALL
    SetExceptionHandler Ex = SkaterEnterWall scr = ST_wallride_active group = ST_inwall
    Block
endscript


script ST_wallride_active 
    printf 'ST_wallride_active'
    ClearExceptionGroup ST_inwall
    SetFlag flag = FLAG_WALL
    SetExceptionHandler Ex = SkaterExitWall scr = ST_skater_wallride group = ST_inwall
    Block
endscript


script ST_wall_hive 
    if GetFlag flag = FLAG_WALL
        SpawnScript ST_SFX_BreakOffBeeHive
        switch <name>
            case g_object_hive_00
            GoalManager_SetGoalFlag name = ST_Goal_Gaps14 got_1 1
            if IsAlive name = g_object_hive_00
                Kill name = g_object_hive_00
                Kill name = g_object_hive_bees_00
                Kill name = TRG_SFX_TrigBox_BeeHive02
            endif
            case g_object_hive_01
            GoalManager_SetGoalFlag name = ST_Goal_Gaps14 got_2 1
            if IsAlive name = g_object_hive_01
                Kill name = g_object_hive_01
                Kill name = g_object_hive_bees_01
                Kill name = TRG_SFX_TrigBox_BeeHive03
            endif
            case g_object_hive_02
            GoalManager_SetGoalFlag name = ST_Goal_Gaps14 got_3 1
            if IsAlive name = g_object_hive_02
                Kill name = g_object_hive_02
                Kill name = g_object_hive_bees_02
                Kill name = TRG_SFX_TrigBox_BeeHive04
            endif
            case g_object_hive_03
            GoalManager_SetGoalFlag name = ST_Goal_Gaps14 got_4 1
            if IsAlive name = g_object_hive_03
                Kill name = g_object_hive_03
                Kill name = g_object_hive_bees_03
                Kill name = TRG_SFX_TrigBox_BeeHive05
            endif
            case g_object_hive_04
            GoalManager_SetGoalFlag name = ST_Goal_Gaps14 got_5 1
            if IsAlive name = g_object_hive_04
                Kill name = g_object_hive_04
                Kill name = g_object_hive_bees_04
                Kill name = TRG_SFX_TrigBox_BeeHive01
            endif
        endswitch
    else
        SpawnScript ST_SFX_Hit_Bees_No_Wallride
    endif
endscript


script ST_Tag_Spot 
    printf ' tag '
    GetTriggerArray graffiti onto
    if triggertype <trigger_array>
        if GoalManager_GoalExists name = ST_goal_gaps13
            switch <spatname>
                case g_trigger_spat_01
                GoalManager_SetGoalFlag name = ST_goal_gaps13 got_1 1
                case g_trigger_spat_02
                GoalManager_SetGoalFlag name = ST_goal_gaps13 got_2 1
                case g_trigger_spat_03
                GoalManager_SetGoalFlag name = ST_goal_gaps13 got_3 1
                case g_trigger_spat_04
                GoalManager_SetGoalFlag name = ST_goal_gaps13 got_4 1
                case g_trigger_spat_05
                GoalManager_SetGoalFlag name = ST_goal_gaps13 got_5 1
            endswitch
        endif
        Kill name = <spatname>
        Create name = <cover>
    endif
endscript


script ST_Skunks 
    Obj_ClearExceptions
    ClearExceptionGroup ST_Skunks
    obj_setinnerradius 7
    Obj_SetException Ex = objectinradius scr = ST_Skunks_Get group = ST_Skunks params = <...> 
endscript


script ST_Skunks_Get 
    GetTriggerArray through
    if triggertype <trigger_array>
        if onrail
            SpawnScript ST_SFX_CollectSkunkClassic
            if GoalManager_GoalExists name = st_classic_goal_collect2
                switch <skunkname>
                    case trg_classic_skunk_01
                    goal_collect_got_object goal_id = st_classic_goal_collect2 flag = got_1
                    case trg_classic_skunk_02
                    goal_collect_got_object goal_id = st_classic_goal_collect2 flag = got_2
                    case trg_classic_skunk_03
                    goal_collect_got_object goal_id = st_classic_goal_collect2 flag = got_3
                    case trg_classic_skunk_04
                    goal_collect_got_object goal_id = st_classic_goal_collect2 flag = got_4
                    case trg_classic_skunk_05
                    goal_collect_got_object goal_id = st_classic_goal_collect2 flag = got_5
                endswitch
                Kill name = <skunkname>
                Kill name = <skunktrig>
            endif
        endif
    endif
endscript


script ST_Cat_Scale 
    Ped_InitAI stand pinkcat SkatopiaCat_anim_assets
endscript


script ST_Dogfood 
    Obj_ClearExceptions
    ClearExceptionGroup ST_Dogfood
    obj_setinnerradius 7
    Obj_SetException Ex = objectinradius scr = ST_Dogfood_Get group = ST_Dogfood params = <...> 
endscript


script ST_Dogfood_Get 
    if GoalManager_GoalExists name = st_classic_goal_collect
        switch <name>
            case trg_classic_dogfood_01
            goal_collect_got_object goal_id = st_classic_goal_collect flag = got_1
            case trg_classic_dogfood_02
            goal_collect_got_object goal_id = st_classic_goal_collect flag = got_2
            case trg_classic_dogfood_03
            goal_collect_got_object goal_id = st_classic_goal_collect flag = got_3
            case trg_classic_dogfood_04
            goal_collect_got_object goal_id = st_classic_goal_collect flag = got_4
            case trg_classic_dogfood_05
            goal_collect_got_object goal_id = st_classic_goal_collect flag = got_5
        endswitch
        <name> ::Die
    endif
endscript


script ST_Graf_Masterpiece 
    GetTriggerArray graffiti onto
    if triggertype <trigger_array>
        printf 'Graffiti'
        if GoalManager_GoalExists name = ST_Goal_Gaps12
            GoalManager_SetGoalFlag name = ST_Goal_Gaps12 got_1 1
            Create prefix = 'ST_AS_MasterPiece_'
            if IsAlive name = g_trigger_MasterPiece
                Create name = ST_AS_MasterPiece_final01
            endif
        endif
    endif
endscript


script ST_Goal_MasterPiece_Success 
    play_cutscene name = 'cutscenes\ST_SmallEvent_Billboard.cut' RestartNode = TRG_Restart_Billboard
endscript


script ST_Goal_Chainsaw_Success 
    play_cutscene name = 'cutscenes\ST_LevelEvent.cut' RestartNode = TRG_Restart_GotChainsaw
    ST_Bigfoot_Event
endscript


script ST_Chainsaw 
    Obj_ClearExceptions
    obj_setinnerradius 4
    Obj_SetException Ex = objectinradius scr = ST_Chainsaw_Die
endscript


script ST_Chainsaw_Die 
    Obj_ClearExceptions
    if GoalManager_GoalExists name = ST_Goal_Gaps
        GoalManager_SetGoalFlag name = ST_Goal_Gaps got_1 1
    endif
    SpawnScript ST_SFX_CollectChainsaw
    Die
endscript


script ST_Bigfoot_Event 
    Kill prefix = 'g_bigfoot_trees_'
    Kill prefix = 'TRG_rail_bigfoot_tree'
    Kill prefix = 'g_bigfoot_tree_shadow_'
    Create name = g_trig_bigfoot_camchange
    Create prefix = 'trg_rail_hugeramp_'
    Create prefix = 'g_trig_hugeramp_jump_'
    if NOT IsAlive name = TRG_ped_bigfoot
        Create name = TRG_ped_bigfoot
        Create name = TRG_Gaps2_bigfootfound
        Kill name = TRG_ped_hidden_bigfoot_01
    endif
    if IsAlive name = TRG_ped_JesseJames
        Kill name = TRG_ped_JesseJames
    endif
endscript


script ST_Bigfoot 
    Obj_ClearExceptions
    ClearExceptionGroup ST_Bigfoot
    obj_setinnerradius 7
    Obj_SetException Ex = objectinradius scr = ST_Bigfoot_Found group = ST_Bigfoot
endscript


script ST_Bigfoot_Found 
    Obj_ClearExceptions
    ClearExceptionGroup ST_Bigfoot
    if GoalManager_GoalExists name = ST_Goal_Gaps2
        GoalManager_SetGoalFlag name = ST_Goal_Gaps2 got_1 1
    endif
endscript


script ST_Goal_Bigfoot_Success 
    if IsAlive name = TRG_ped_bigfoot
        Kill name = TRG_ped_bigfoot
        Kill name = TRG_Gaps2_bigfootfound
        Create name = TRG_ped_bigfoot01
    endif
endscript


script ST_Goal_BigFirework_Success 
    PlayStream ST_FireworkLaunch01 vol = 200 priority = 101
    SpawnScript ST_Goal_Bigfirework_Go
    Kill name = g_trig_firework
endscript


script ST_Goal_Bigfirework_Go 
    trg_obj_firework ::CreateFlexibleParticleSystem name = rocketsmoke01 params_script = apm_ST_Rocket_trail01_particle_params
    trg_obj_firework ::CreateFlexibleParticleSystem name = rocketsmoke02 params_script = apm_ST_Rocket_trail02_particle_params
    wait 10 frames
    trg_obj_firework ::obj_rotz Speed = 720
    trg_obj_firework ::obj_movetonode name = TRG_way_goal_firework Speed = 100
    trg_obj_firework ::Obj_WaitMove
    wait 60 frames
    CreateFastParticleSystem name = rocket01 params_script = apm_ST_rocket_xploder01_fast_particle_params attachobjid = trg_obj_firework
    CreateFastParticleSystem name = rocket02 params_script = apm_ST_rocket_xploder02_fast_particle_params attachobjid = trg_obj_firework
    CreateFastParticleSystem name = rocket03 params_script = apm_ST_rocket_xploder03_fast_particle_params attachobjid = trg_obj_firework
    trg_obj_firework ::DestroyFlexibleParticleSystem name = rocketsmoke01
    trg_obj_firework ::DestroyFlexibleParticleSystem name = rocketsmoke02
    wait 3 seconds
    printf ' big firework'
    Kill name = trg_obj_firework
endscript


script ST_Goal_BigFirework_Success2 
endscript


script ST_Sheckler 
    Obj_ClearExceptions
    ClearExceptionGroup ST_Sheckler
    obj_setinnerradius 20
    Obj_SetException Ex = objectinradius scr = ST_Sheckler_Found group = ST_Sheckler
endscript


script ST_Sheckler_Found 
    Obj_ClearExceptions
    ClearExceptionGroup ST_Sheckler
    if GoalManager_GoalExists name = ST_goal_gaps15
        GoalManager_SetGoalFlag name = ST_goal_gaps15 got_1 1
    endif
endscript


script ST_Goal_Shecklerfound 
    PlayStream Sheckler_Found vol = 200 priority = 101
    skater ::ResetSkaterParticleSystems
endscript


script ST_Hawk 
    Obj_ClearExceptions
    ClearExceptionGroup ST_hawkswitch
    obj_setinnerradius 7
    Obj_SetException Ex = objectinradius scr = ST_Hawk_Found group = ST_hawkswitch
endscript


script ST_Hawk_Found 
    Obj_ClearExceptions
    ClearExceptionGroup ST_hawkswitch
endscript


script ST_Unlock_Bigfoot_Goals 
    if GoalManager_GoalIsLocked name = ST_Goal_Gaps16
        printf 'play cameras'
        Create name = TRG_Ped_Bigfoot_Intro
        PlayIntroCameras goal_intro_cameras = ST_Bigfoot_Goal_Intro_Cameras letterbox
        Kill name = TRG_Ped_Bigfoot_Intro
        GoalManager_UnlockGoal name = ST_Goal_Gaps16
        GoalManager_UnlockGoal name = ST_Goal_Gaps17
        GoalManager_UnlockGoal name = ST_Goal_Gaps18
        GoalManager_UnlockGoal name = ST_Goal_Gaps19
        CreateFlexibleParticleSystem name = boardsmoke params_script = apm_ST_Boardsmoke_particle_params
    else
        Takeover_VO
        CreateFlexibleParticleSystem name = boardsmoke params_script = apm_ST_Boardsmoke_particle_params
    endif
endscript


script ST_Unlock_Sheckler_Goals 
    if GoalManager_GoalIsLocked name = ST_Goal_Gaps4
        Create name = TRG_Ped_Sheckler_Intro
        PlayIntroCameras goal_intro_cameras = ST_Sheckler_Goal_Intro_Cameras letterbox
        Kill name = TRG_Ped_Sheckler_Intro
        printf 'play cameras'
        GoalManager_UnlockGoal name = ST_Goal_Gaps4
        GoalManager_UnlockGoal name = ST_Goal_Gaps8
        GoalManager_UnlockGoal name = ST_Goal_Gaps9
        GoalManager_UnlockGoal name = ST_Goal_SkatetheLine3
        AwardNewSpecialTrickToProfile {
            all_profiles
            Trick = Trick_ShecklerPrimo
            key_combo = SpGrind_U_D_Triangle
        }
    else
        Takeover_VO
    endif
endscript


script ST_Unlock_Hawk_Goals 
    if GoalManager_GoalIsLocked name = ST_Goal_Gaps3
        printf 'play cameras'
        Create prefix = 'g_trig_hive_'
        play_swappable_pro_intro_cameras intro_cameras = ST_Pro_Goal_Intro_Cameras
        GoalManager_UnlockGoal name = ST_Goal_Gaps3
        GoalManager_UnlockGoal name = ST_Goal_Gaps5
        GoalManager_UnlockGoal name = ST_Goal_trickobjects
        GoalManager_UnlockGoal name = ST_Goal_Gaps6
        GoalManager_UnlockGoal name = ST_Goal_Gaps11
        GoalManager_UnlockGoal name = ST_Goal_SkatetheLine2
        GoalManager_UnlockGoal name = ST_Goal_SkatetheLine4
        GoalManager_UnlockGoal name = ST_Goal_Gaps14
        if NOT IsAlive name = TRG_ped_hawkhint_01
            Create name = TRG_ped_hawkhint_01
        endif
        if NOT IsAlive name = TRG_ped_hawkhint_02
            Create name = TRG_ped_hawkhint_02
        endif
    else
        Takeover_VO
    endif
endscript


script ST_vertcheck_init 
    SpawnScript ST_vertcheck
endscript


script ST_vertcheck 
    printf ' ST_vertcheck '
    UnSetFlag flag = FLAG_VERT
    ClearExceptionGroup ST_vert
    SetExceptionHandler Ex = SkaterEnterVertAir scr = ST_invertair group = ST_vert
    Block
endscript


script ST_invertair 
    printf ' ST_invertair '
    SetFlag flag = FLAG_VERT
    ClearExceptionGroup ST_vert
    SetExceptionHandler Ex = SkaterExitVertAir scr = ST_vertcheck group = ST_vert
    Block
endscript

jm_busted_panels = 0

script ST_shatter 
    if GetFlag flag = FLAG_VERT
        SpawnScript ST_SFX_BreakRoofAboveHalfPipe
        ShatterAndDie name = <object> area = 1000 variance = 4.600 vel_x = 0 vel_y = -50 vel_z = 0 spread = 1 vibrate texture_swap = st_tw_shatter_metal01
        GetBonus Score = 500 text = 'Destruction Bonus!'
    endif
endscript


script ST_shatter_2 
    SpawnSound ST_SFX_BreakWood
    ShatterAndDie name = <object> area = 1000 variance = 4.600 vel_x = 40 vel_y = 0 vel_z = 40 spread = 2 Scale = 1.100 vibrate texture_swap = st_tw_shatter_metal01
    GetBonus Score = 100 text = 'Destruction Bonus!'
endscript


script ST_manualcheck_init 
    SpawnScript ST_skater_manual
endscript


script ST_skater_manual 
    printf ' waiting for manual '
    ClearExceptionGroup ST_inmanual
    UnSetFlag flag = FLAG_MANUAL
    SetExceptionHandler Ex = SkaterEnterManual scr = ST_manual_active group = ST_inmanual
    Block
endscript


script ST_manual_active 
    printf ' skater in manual '
    ClearExceptionGroup ST_inmanual
    SetFlag flag = FLAG_MANUAL
    SetExceptionHandler Ex = SkaterExitManual scr = ST_skater_manual group = ST_inmanual
    Block
endscript


script ST_balloon_move 
    begin 
    obj_movetorelpos (0.0, 10.0, 0.0) Speed = 0.5000
    Obj_WaitMove
    obj_movetorelpos (0.0, -10.0, 0.0) Speed = 0.5000
    Obj_WaitMove
    repeat 
endscript


script ST_balloon_init 
    GetTriggerArray climb onto
    if triggertype <trigger_array>
        SpawnScript ST_balloon_go
    endif
endscript


script ST_balloon_go 
    if GoalManager_GoalExists name = ST_Goal_Gaps11
        GoalManager_SetGoalFlag name = ST_Goal_Gaps11 got_1 1
    endif
endscript


script ST_zipline_init 
    GetTriggerArray climb onto
    if triggertype <trigger_array>
        SpawnScript ST_zipline_go
        SpawnScript ST_zipline_off_check
    endif
endscript


script ST_zipline2_init 
    GetTriggerArray climb onto
    if triggertype <trigger_array>
        SpawnScript ST_zipline2_go
        SpawnScript ST_zipline_off_check
    endif
endscript


script ST_zipline_off_check 
    printf ' off script wait'
    ClearExceptionGroup ST_zipoff_check
    SetException Ex = SkaterExitHang scr = ST_zipline_off group = ST_zipoff_check
    Block
endscript


script ST_zipline_off 
    printf ' off script go'
    ClearExceptionGroup ST_zipoff_check
    skater ::setspeed 1900
endscript


script ST_kill_zipline_scripts 
    KillSpawnedScript name = ST_zipline_go
    KillSpawnedScript name = ST_zipline2_go
    KillSpawnedScript name = ST_zipline_off_check
endscript


script ST_zipline_go 
    playsound ST_PullyLaunch01
    SetFlag flag = FLAG_ZIP
    skater ::PlayAnim anim = GrabBar_accel_Fwd
    skater ::disableplayerinput
    wait 15 frames
    skater ::PlayAnim anim = GrabBar_idle_Fwd
    TRG_veh_zip_01 ::obj_movetonode name = TRG_way_zip_02 Speed = 150
    TRG_veh_zip_01 ::Obj_WaitMove
    skater ::GetGap GapID = ST_Zipline text = 'Zipline' Score = 200
    skater ::enableplayerinput
    skater ::releasehang
    skater ::setspeed 900
    skater ::PlayAnim anim = GrabBar_Release_Fwd
    wait 1 second
    TRG_veh_zip_01 ::obj_movetonode name = TRG_way_zip_01 Speed = 50
    TRG_veh_zip_01 ::Obj_WaitMove
    UnSetFlag flag = FLAG_ZIP
endscript


script ST_zipline2_go 
    playsound ST_PullyLaunch01 pitch = 115
    SetFlag flag = FLAG_ZIP2
    skater ::PlayAnim anim = GrabBar_accel_Up
    skater ::disableplayerinput
    wait 15 frames
    skater ::PlayAnim anim = GrabBar_idle_Up
    TRG_veh_zip2_01 ::obj_movetonode name = TRG_way_zip2_02 Speed = 150
    TRG_veh_zip2_01 ::Obj_WaitMove
    skater ::enableplayerinput
    skater ::releasehang
    skater ::setspeed 30
    skater ::jump
    skater ::PlayAnim anim = GrabBar_Release_Up
    wait 1 seconds
    TRG_veh_zip2_01 ::obj_movetonode name = TRG_way_zip2_01 Speed = 25
    UnSetFlag flag = FLAG_ZIP2
endscript


script ST_jump_init 
    printf ' waiting for ollie '
    ClearExceptionGroup ST_jumpboost
    SetExceptionHandler Ex = SkaterJump scr = ST_bigramp_jumpboost group = ST_jumpboost
    Block
endscript


script ST_jump_deactivate 
    printf ' deactivate fan jump '
    KillSpawnedScript name = ST_jump_init
endscript


script ST_bigramp_jumpboost 
    if GetFlag flag = FLAG_BIGRAMP1
        trigger_jump_boost multi = 1.250
        SpawnScript ST_BigRamp_TimeDeactivate
        endgap GapID = ST_bigramp_manual text = 'Big Ramp Manual' Score = 200 gapscript = ST_Gaps18_Success
    endif
endscript


script ST_BigRamp_TimeDeactivate 
    wait 0.5000 seconds
    if GetFlag flag = FLAG_BIGRAMP1
        UnSetFlag flag = FLAG_BIGRAMP1
        printf 'BIGRAMP TIME DEACTIVATE'
        UnSetFlag flag = FLAG_BIGRAMP1
        ClearExceptionGroup ST_BigRamp
        KillSpawnedScript name = ST_BigRamp_Deactivate_Wait_Cam
    endif
endscript


script ST_BigRamp 
    printf ' BIG_RAMP '
    if NOT skater ::walking
        StartGap GapID = ST_bigramp_manual flags = [ PURE_MANUAL CANCEL_GROUND CANCEL_WALK ]
        if NOT GetFlag flag = FLAG_BIGRAMP1
            SetFlag flag = FLAG_BIGRAMP1
            trigger_speed_boost multi = 1.300 DefBoostSound = 0
            if NOT skater ::IsSkaterFocused
                setslomo 0.6000
                SetGlobalPitchModulation 0.6000
            endif
            PlaySkaterCamAnim {
                TargetID = skater
                name = TRG_CameraStart_BigRamp
                frames = 200
                Play_hold
                FOV = 120
            }
            FormatText textname = bramp_text 'BigSlope Cam'
            create_panel_message id = message_bramp text = <bramp_text> style = style_ST_bigrampcam z_priority = -30
            SpawnScript ST_BigRamp_CamReset
        endif
    endif
endscript


script ST_BigRamp_CamReset 
    wait 2 seconds
    kill_panel_message_if_it_exists id = message_bramp
    if GetFlag flag = FLAG_BIGRAMP1
        UnSetFlag flag = FLAG_BIGRAMP1
    endif
    setslomo 1
    SetGlobalPitchModulation 1.0
    PlaySkaterCamAnim stop
endscript


script ST_garbage_new 
    if NOT GetFlag flag = FLAG_FLAME
        SpawnScript ST_garbage_boardfire
    endif
    GetTriggerArray jump Off
    if triggertype <trigger_array>
        if NOT InMultiPlayerGame
            SpawnScript ST_SFX_Skater_Ignite
            CreateFastParticleSystem name = Bonfire_xplode01 params_script = apm_ST_Xplode01_fast_particle_params attachobjid = skater
            CreateFastParticleSystem name = Bonfire_xplode02 params_script = apm_ST_Xplode02_fast_particle_params attachobjid = skater
            skater ::CreateFlexibleParticleSystem name = firetrail01 params_script = apm_ST_Frietrail01_particle_params
            skater ::CreateFlexibleParticleSystem name = firetrail02 params_script = apm_ST_smoketrail01_particle_params
            CreateFastParticleSystem name = Bonfire_xplode03 params_script = apm_ST_bigsparks01_fast_particle_params attachobjid = skater
        endif
        SpawnScript ST_SFX_ExplodingGarbage
        trigger_speed_boost multi = 1.600 DefBoostSound = 0
        trigger_jump_boost multi = 1.700 DefBoostSound = 0
        GetGap text = 'Garbage Blast' Score = 10
    endif
endscript


script ST_garbage_boardfire 
    SetFlag flag = FLAG_FLAME
    if NOT InMultiPlayerGame
        skater ::CreateFlexibleParticleSystem name = BurnMoFo params_script = APM_flamingBOARD_particle_params
        skater ::CreateFlexibleParticleSystem name = SmokeyMoFo params_script = apm_OILYsmoke_particle_params
    endif
    wait 5 seconds
    SpawnScript ST_SFX_Skater_PutOutFire
    if NOT InMultiPlayerGame
        skater ::DestroyFlexibleParticleSystem name = BurnMoFo
        skater ::DestroyFlexibleParticleSystem name = SmokeyMoFo
    endif
    UnSetFlag flag = FLAG_FLAME
endscript


script ST_garbage_on 
    if NOT GetFlag flag = FLAG_FLAME
        trigger_speed_boost multi = 1.500 DefBoostSound = 0
        SetFlag flag = FLAG_FLAME
        KillSpawnedScript name = ST_garbage_off
        CreateFlexibleParticleSystem name = BurnMoFo params_script = APM_flamingBOARD_particle_params
        CreateFlexibleParticleSystem name = SmokeyMoFo params_script = apm_OILYsmoke_particle_params
    endif
    ClearExceptionGroup ST_Garbage
    SetExceptionHandler Ex = SkaterJump scr = ST_garbage_blast group = ST_Garbage
    Block
endscript


script ST_garbage_blast 
    ClearExceptionGroup ST_Garbage
    if NOT InMultiPlayerGame
        SpawnScript ST_SFX_Skater_Ignite
        CreateFastParticleSystem name = Bonfire_xplode01 params_script = apm_ST_Xplode01_fast_particle_params attachobjid = skater
        CreateFastParticleSystem name = Bonfire_xplode02 params_script = apm_ST_Xplode02_fast_particle_params attachobjid = skater
        skater ::CreateFlexibleParticleSystem name = firetrail01 params_script = apm_ST_Frietrail01_particle_params
        skater ::CreateFlexibleParticleSystem name = firetrail02 params_script = apm_ST_smoketrail01_particle_params
        CreateFastParticleSystem name = Bonfire_xplode03 params_script = apm_ST_bigsparks01_fast_particle_params attachobjid = skater
    endif
    CreateFlexibleParticleSystem name = BurnMoFo params_script = APM_flamingBOARD_particle_params
    CreateFlexibleParticleSystem name = SmokeyMoFo params_script = apm_OILYsmoke_particle_params
    SpawnScript ST_SFX_ExplodingGarbage
    trigger_speed_boost multi = 1.500 DefBoostSound = 0
    trigger_jump_boost multi = 1.100 DefBoostSound = 0
    GetGap text = 'Garbage Blast' Score = 10
endscript


script ST_garbage_off 
    ClearExceptionGroup ST_Garbage
    KillSpawnedScript name = ST_garbage_on
    wait 5 seconds
    SpawnScript ST_SFX_Skater_PutOutFire
    DestroyFlexibleParticleSystem name = BurnMoFo
    DestroyFlexibleParticleSystem name = SmokeyMoFo
    UnSetFlag flag = FLAG_FLAME
endscript


script ST_fireworks 
    printf ' fireworks 1'
    if GetFlag flag = FLAG_FLAME
        printf ' fireworks 2'
        if GoalManager_GoalExists name = ST_Goal_Gaps10
            printf ' fireworks 3'
            GoalManager_SetGoalFlag name = ST_Goal_Gaps10 got_1 1
        endif
    endif
endscript


script ST_pondsplash 
    if NOT InMultiPlayerGame
        skater ::DestroyFlexibleParticleSystem name = BurnMoFo
        skater ::DestroyFlexibleParticleSystem name = SmokeyMoFo
    endif
    UnSetFlag flag = FLAG_FLAME
    SpawnScript ST_SFX_Skater_PutOutFire
    playsound BucketSplash pitch = randomrange (90.0, 120.0)
    printf ' pondsplash'
    if NOT GetFlag flag = FLAG_SPLASH
        printf ' pondsplash 1 '
    endif
    if NOT GetFlag flag = Flag_Walk
        printf ' pondsplash 2'
        if NOT GetFlag flag = FLAG_SPLASH
            printf ' pondsplash 3'
            SetFlag flag = FLAG_SPLASH
            wait 1 frame
            Create name = g_Pond_splash01
            ResetTextureAnim sector = g_Pond_splash01
            if NOT InMultiPlayerGame
                CreateFastParticleSystem name = splash01 params_script = apm_ST_Splash02_fast_particle_params attachobjid = skater
                CreateFastParticleSystem name = splash02 params_script = apm_ST_Splash03_fast_particle_params attachobjid = skater
                skater ::CreateFlexibleParticleSystem name = splash03 params_script = apm_ST_Bigsplash01_particle_params
            endif
            Create name = g_Pond_splash02
            ResetTextureAnim sector = g_Pond_splash02
            Create name = g_Pond_splash03
            ResetTextureAnim sector = g_Pond_splash03
            g_pond_water ::obj_movetonode name = TRG_moveto_depth1 Speed = 100
            wait 2 seconds
            Kill name = g_Pond_splash01
            Kill name = g_Pond_splash02
            Kill name = g_Pond_splash03
            wait 10 frames
            g_pond_water ::obj_movetonode name = TRG_moveto_surface1 Speed = 1
            g_pond_water ::Obj_WaitMove
            wait 30 frames
            printf ' pondsplash 4'
            UnSetFlag flag = FLAG_SPLASH
        endif
    endif
endscript


script style_ST_bigrampcam 
    setprops just = [ center center ] rgba = [ 50 255 50 255 ]
    DoMorph time = 0 Pos = (320.0, 80.0) Scale = 1 alpha = 100 rot_angle = 0
endscript


script style_ST_critter 
    setprops just = [ center center ] rgba = [ 255 100 100 255 ]
    DoMorph time = 0.1000 Pos = (100.0, 110.0) Scale = 2 alpha = 100
endscript


script style_ST_critter3 
    setprops just = [ center center ] rgba = [ 10 255 10 255 ]
    DoMorph time = 0.1000 Pos = (110.0, 150.0) Scale = 1 alpha = 50
    wait 0.8000 second
    DoMorph time = 0.5000 Pos = (110.0, 150.0) Scale = 1 alpha = 0
endscript


script ST_steampipe 
    trigger_speed_boost multi = 1.100
endscript


script ST_lograilboost 
    if (ST_WaitingLogJumpScript = 0)
        change ST_WaitingLogJumpScript = 1
        SpawnScript ST_SFX_LogBoost
    endif
    trigger_speed_boost multi = 1.300 DefBoostSound = 0
endscript


script ST_treetoprail 
    trigger_speed_boost multi = 1.200 DefBoostSound = 0
    GetTriggerArray spin onto
    if triggertype <trigger_array>
        printf 'spin onto'
        SpawnScript ST_treetop_jump_check
    endif
endscript


script ST_treetop_jump_check 
    printf ' jump or bail '
    skater ::CreateFlexibleParticleSystem name = NATAS4tree params_script = apm_ST_NATAS4Trees_particle_params
    ClearExceptionGroup ST_treebomb_check
    SetException Ex = SkaterEnterBail scr = ST_treetop_failed group = ST_treebomb_check
    SetException Ex = SkaterJump scr = ST_treetop_jump group = ST_treebomb_check
    Block
endscript


script ST_treetop_jump 
    printf ' waiting for a bomb '
    ClearExceptionGroup ST_treebomb_check
    SetException Ex = SkaterEnterAcidDrop scr = ST_treetop_acidbomb group = ST_treebomb_check
    SetException Ex = SkaterEnterLadder scr = ST_treetop_failed group = ST_treebomb_check
    SetException Ex = SkaterEnterWallplant scr = ST_treetop_failed group = ST_treebomb_check
    SetException Ex = SkaterEnterWall scr = ST_treetop_failed group = ST_treebomb_check
    SetException Ex = SkaterEnterBail scr = ST_treetop_failed group = ST_treebomb_check
    SetException Ex = SkaterEnterGround scr = ST_treetop_failed group = ST_treebomb_check
    SetException Ex = SkaterEnterManual scr = ST_treetop_failed group = ST_treebomb_check
    SetException Ex = SkaterEnterHang scr = ST_treetop_failed group = ST_treebomb_check
    SetException Ex = SkaterEnterWalking scr = ST_treetop_failed group = ST_treebomb_check
    skater ::DestroyFlexibleParticleSystem name = NATAS4tree
    Block
endscript


script ST_treetop_acidbomb 
    printf ' acid bombed ... '
    ClearExceptionGroup ST_treebomb_check
    SetException Ex = SkaterExitAcidDrop scr = ST_treetop_success group = ST_treebomb_check
    Block
endscript


script ST_treetop_failed 
    printf 'failed to acid bomb'
    skater ::DestroyFlexibleParticleSystem name = NATAS4tree
    ClearExceptionGroup ST_treebomb_check
endscript


script ST_treetop_success 
    printf ' acid bomb success '
    ClearExceptionGroup ST_treebomb_check
    if GoalManager_GoalExists name = ST_Goal_Gaps3
        GoalManager_SetGoalFlag name = ST_Goal_Gaps3 got_1 1
    endif
endscript


script ST_teleport_boost 
    trigger_speed_boost multi = 1.250
endscript


script ST_tele_bus 
    ST_Gap_ShackCombo_Bus
    Create prefix = 'bust_barnpipe_'
    <Angle> = Random (@ 1 @ 2 @ 3)
    if NOT skater ::IsSkaterFocused
        setslomo 0.6000
    endif
    pulse_blur start = 255 Speed = 10
    ST_sound_chicken
    switch <Angle>
        case 1
        SK3_TeleportToNode nodeName = TRG_tele_shack
        case 2
        SK3_TeleportToNode nodeName = TRG_tele_shack2
        case 3
        SK3_TeleportToNode nodeName = TRG_tele_shack3
    endswitch
    wait 5 frames
    if NOT skater ::IsSkaterFocused
        setslomo 1
        SetGlobalPitchModulation 1.0
    endif
endscript


script ST_tele_megaslope 
    StartGap GapID = ST_Gap_Treeline1 flags = [ PURE_AIR ]
    if NOT skater ::IsSkaterFocused
        setslomo 0.6000
    endif
    SetGlobalPitchModulation 0.6000
    pulse_blur start = 255 Speed = 10
    SK3_TeleportToNode nodeName = TRG_tele_bus_jump
    wait 5 frames
    if NOT skater ::IsSkaterFocused
        setslomo 1
        SetGlobalPitchModulation 1.0
    endif
endscript


script ST_tele_barn 
    ST_Gap_ShackCombo_Barn
    if NOT InMultiPlayerGame
        CreateFastParticleSystem name = chickenBlast01 params_script = apm_ST_feather01_fast_particle_params attachobjid = skater
        CreateFastParticleSystem name = chickenBlast02 params_script = apm_ST_feather02_fast_particle_params attachobjid = skater
        CreateFastParticleSystem name = chickenBlast03 params_script = apm_ST_feather03_fast_particle_params attachobjid = skater
        CreateFastParticleSystem name = chickenBlast04 params_script = apm_ST_feather04_fast_particle_params attachobjid = skater
    endif
    Create prefix = 'bust_barnpipe_'
    <Angle> = Random (@ 1 @ 2 @ 3)
    if NOT skater ::IsSkaterFocused
        setslomo 0.6000
    endif
    pulse_blur start = 255 Speed = 10
    ST_sound_chicken
    switch <Angle>
        case 1
        SK3_TeleportToNode nodeName = TRG_tele_coop
        case 2
        SK3_TeleportToNode nodeName = TRG_tele_coop2
        case 3
        SK3_TeleportToNode nodeName = TRG_tele_coop3
    endswitch
    wait 5 frames
    if NOT skater ::IsSkaterFocused
        setslomo 1
        SetGlobalPitchModulation 1.0
    endif
endscript


script ST_outofbounds deathnode = TRG_tele_death
    if GoalManager_GoalExists name = ST_goal_gaps21
        if NOT GoalManager_GoalIsLocked name = ST_goal_gaps21
            if NOT GoalManager_HasWonGoal name = ST_goal_gaps21
                <deathnode> = TRG_restart_finalgoal2
            endif
        endif
    endif
    if GoalManager_GoalExists name = ST_goal_gaps26
        if NOT GoalManager_GoalIsLocked name = ST_goal_gaps26
            if NOT GoalManager_HasWonGoal name = ST_goal_gaps26
                GoalManager_GetDifficultyLevel
                if (<difficulty_level> = 0)
                    <deathnode> = TRG_restart_finalgoal4
                else
                    <deathnode> = TRG_restart_finalgoal3
                endif
            endif
        endif
    endif
    printf 'outofbounds'
    DestroyFlexibleParticleSystem name = BurnMoFo
    DestroyFlexibleParticleSystem name = SmokeyMoFo
    UnSetFlag flag = FLAG_FLAME
    ST_kill_zipline_scripts
    Sk3_KillSkater nodeName = <deathnode> Message1 = 'Out of Bounds' , message2 = 'Out of Bounds' , message3 = 'Out of Bounds' , message4 = 'Out of Bounds'
endscript


script ST_SwitchSkaters 
    KillSpawnedScript name = ST_Spawn_SwitchSkaters
    SpawnSkaterScript ST_Spawn_SwitchSkaters
endscript


script ST_Spawn_SwitchSkaters 
    wait 2 frames
    pulse_blur
    swap_skaters_get_current_name
    switch <name>
        case custom
        printf 'custom'
        DestroyFlexibleParticleSystem name = boardsmoke
        Takeover_VO
        case chainsawskater
        printf 'custom2'
        SetGlobalFlag flag = GUEST_FOUND_BIGFOOT
        ST_Unlock_Bigfoot_Goals
        case pro_teammate
        SetGlobalFlag flag = PRO_FOUND_06
        ST_Unlock_Hawk_Goals
        DestroyFlexibleParticleSystem name = boardsmoke
        case sheckler
        SetGlobalFlag flag = GUEST_FOUND_SHECKLER
        SetGlobalFlag flag = SKATER_UNLOCKED_SHECKLER
        ST_Unlock_Sheckler_Goals
        DestroyFlexibleParticleSystem name = boardsmoke
        default 
    endswitch
endscript


script ST_Ammo_Node 
    Obj_ClearExceptions
    setup_ped_speech {
        ped_id = <name>
        accept_text = 'Press \m5 to get some smoke bombs'
        activation_script = ST_Ammo_Got
        dont_deactivate_goals
    }
endscript


script ST_Ammo_Got 
    give_skater_ammo num = 10 type = smokebomb
    if ScreenElementExists id = ped_speech_dialog
        DestroyScreenElement id = ped_speech_dialog
    endif
    UnpauseSkaters
endscript


script ST_Rockets_Launch_01 
    <target_number> = Random (@ 1 @ 2 @ 3 @ 4 @ 5 @ 6)
    switch <target_number>
        case 1
        <target> = TRG_way_rocket_01
        case 2
        <target> = TRG_way_rocket_02
        case 3
        <target> = TRG_way_rocket_03
        case 4
        <target> = TRG_way_rocket_04
        case 5
        <target> = TRG_way_rocket_05
        case 6
        <target> = TRG_way_rocket_06
    endswitch
    printf '                                                         fly 1 MOVE '
    trg_endgoal_rocket_fly_01 ::obj_movetonode name = <target> Speed = 250
    trg_endgoal_rocket_fly_01 ::Obj_WaitMove
    SpawnScript ST_Rockets_Respawn_01 params = <...> 
    printf '                                                         fly 1 DIE '
    trg_endgoal_rocket_fly_01 ::Die
    printstruct <...> 
endscript


script ST_Rockets_Respawn_01 
    <delay> = Random (@ 1 @ 2 @ 3)
    wait <delay> seconds
    printf '                                                         fly 1 CREATE '
    Create name = trg_endgoal_rocket_fly_01
    CreateFastParticleSystem name = fuknRocket01 params_script = apm_ST_rocket_sparks01_fast_particle_params attachobjid = trg_endgoal_rocket_fly_01
    CreateFastParticleSystem name = fuknRocket01b params_script = apm_ST_RoketLaunch01_fast_particle_params
    fuknRocket01b ::obj_setposition position = (1356.0, 5997.0, 1483.0)
endscript


script ST_Rockets_Launch_02 
    <target_number> = Random (@ 1 @ 2 @ 3 @ 4 @ 5 @ 6)
    switch <target_number>
        case 1
        <target> = TRG_way_rocket_01
        case 2
        <target> = TRG_way_rocket_02
        case 3
        <target> = TRG_way_rocket_03
        case 4
        <target> = TRG_way_rocket_04
        case 5
        <target> = TRG_way_rocket_05
        case 6
        <target> = TRG_way_rocket_06
    endswitch
    printf '                                                         fly 2 MOVE '
    trg_endgoal_rocket_fly_02 ::obj_movetonode name = <target> Speed = 250
    trg_endgoal_rocket_fly_02 ::Obj_WaitMove
    SpawnScript is_boss_battle_song params = <...> 
    printf '                                                         fly 2 DIE '
    trg_endgoal_rocket_fly_02 ::Die
    printstruct <...> 
endscript


script is_boss_battle_song 
    <delay> = Random (@ 1 @ 2 @ 3)
    wait <delay> seconds
    printf '                                                         fly 2 CREATE '
    Create name = trg_endgoal_rocket_fly_02
    CreateFastParticleSystem name = fuknRocket02 params_script = apm_ST_rocket_sparks01_fast_particle_params attachobjid = trg_endgoal_rocket_fly_02
    CreateFastParticleSystem name = fuknRocket02b params_script = apm_ST_RoketLaunch01_fast_particle_params
    fuknRocket02b ::obj_setposition position = (1279.0, 5997.0, 1501.0)
endscript


script ST_Rockets_Launch_03 
    <target_number> = Random (@ 1 @ 2 @ 3 @ 4 @ 5 @ 6)
    switch <target_number>
        case 1
        <target> = TRG_way_rocket_01
        case 2
        <target> = TRG_way_rocket_02
        case 3
        <target> = TRG_way_rocket_03
        case 4
        <target> = TRG_way_rocket_04
        case 5
        <target> = TRG_way_rocket_05
        case 6
        <target> = TRG_way_rocket_06
    endswitch
    printf '                                                         fly 3 MOVE '
    trg_endgoal_rocket_fly_03 ::obj_movetonode name = <target> Speed = 250
    trg_endgoal_rocket_fly_03 ::Obj_WaitMove
    SpawnScript ST_Rockets_Respawn_03 params = <...> 
    printf '                                                         fly 3 DIE '
    trg_endgoal_rocket_fly_03 ::Die
    printstruct <...> 
endscript


script ST_Rockets_Respawn_03 
    <delay> = Random (@ 1 @ 2 @ 3)
    wait <delay> seconds
    printf '                                                         fly 3 CREATE '
    Create name = trg_endgoal_rocket_fly_03
    CreateFastParticleSystem name = fuknRocket03 params_script = apm_ST_rocket_sparks01_fast_particle_params attachobjid = trg_endgoal_rocket_fly_03
    CreateFastParticleSystem name = fuknRocket03b params_script = apm_ST_RoketLaunch01_fast_particle_params
    fuknRocket03b ::obj_setposition position = (1339.0, 5997.0, 1556.0)
endscript


script ST_spinbomb_spin 
    obj_roty Speed = -600
endscript


script ST_Gap_House_RoofPeak 
    if firsttimeonthisrail
        StartGap GapID = ST_House_RoofPeak
        endgap GapID = ST_House_RoofPeak text = 'A-Frame Grind' Score = 50
    else
        printf 'cheese'
    endif
endscript


script ST_Gap_House_Stair 
    if firsttimeonthisrail
        StartGap GapID = ST_House_Stair
        endgap GapID = ST_House_Stair text = 'House Step' Score = 5
    else
        printf 'cheese'
    endif
endscript


script ST_startgap_huge_electricwire 
    StartGap GapID = ST_Huge_Electric_wire flags = [ PURE_GRIND CANCEL_GROUND CANCEL_WALK ]
endscript


script ST_endgap_huge_electricwire 
    endgap GapID = ST_Huge_Electric_wire text = 'Huge Electric Wire' Score = 20000 gapscript = ST_Gaps4_Success
endscript


script ST_Gaps4_Success 
    if GoalManager_GoalExists name = ST_Goal_Gaps4
        GoalManager_SetGoalFlag name = ST_Goal_Gaps4 got_1 1
    endif
endscript


script ST_startgap_mountain_manual 
    StartGap GapID = ST_Mountain_manual flags = [ PURE_MANUAL ]
endscript


script ST_endgap_mountain_manual 
    endgap GapID = ST_Mountain_manual text = 'Mountaintop Manual' Score = 15000 gapscript = ST_Gaps5_Success
endscript


script ST_Gaps5_Success 
    if GoalManager_GoalExists name = ST_Goal_Gaps5
        GoalManager_SetGoalFlag name = ST_Goal_Gaps5 got_1 1
    endif
endscript


script ST_startgap_mine_spine 
    StartGap GapID = ST_Mountain_manual flags = [ PURE_AIR ]
endscript


script ST_endgap_mine_spine 
    endgap GapID = ST_Mountain_manual text = 'Mine Spine' Score = 200 gapscript = ST_Gaps6_Success
endscript


script ST_Gaps6_Success 
    if GoalManager_GoalExists name = ST_Goal_Gaps6
        GoalManager_SetGoalFlag name = ST_Goal_Gaps6 got_1 1
    endif
endscript


script ST_startgap_zipdrop 
    if GetFlag flag = FLAG_ZIP2
        StartGap GapID = ST_Zipline_AcidDrop flags = [ PURE_AIR ]
    endif
endscript


script ST_endgap_zipdrop 
    endgap GapID = ST_Zipline_AcidDrop text = 'Zipline Drop' Score = 200 gapscript = ST_Gaps7_Outcomes
    StartGap GapID = ST_cliffspine flags = [ PURE_AIR CANCEL_WALK ]
    endgap GapID = ST_cliffspine2 text = 'Cliff Spine' Score = 200 ST_SkateTheLine_Success
endscript


script ST_Gaps7_Outcomes 
    ClearExceptionGroup ST_zipdrop
    SetException Ex = SkaterLanded scr = ST_gaps7_Success group = ST_zipdrop
    SetException Ex = SkaterBailed scr = ST_gaps7_bailed group = ST_zipdrop
    Block
endscript


script ST_gaps7_bailed 
    ClearExceptionGroup ST_zipdrop
    if GoalManager_GoalExists name = ST_Goal_Gaps7
        GoalManager_LoseGoal name = ST_Goal_Gaps7
    endif
endscript


script ST_gaps7_Success 
    ClearExceptionGroup ST_zipdrop
    if GoalManager_GoalExists name = ST_Goal_Gaps7
        GoalManager_SetGoalFlag name = ST_Goal_Gaps7 got_1 1
    endif
endscript


script ST_Gap_ShackCombo_Barn 
    printf 'ST_Gap_ShackCombo_Barn'
    StartGap GapID = ST_Gap_Shack_Barn flags = [ CANCEL_GROUND ]
    endgap GapID = ST_Gap_Shack_Bus text = 'Shack Combo' Score = 500 gapscript = ST_Gaps8_Success
endscript


script ST_Gap_ShackCombo_Bus 
    printf 'ST_Gap_ShackCombo_Bus'
    StartGap GapID = ST_Gap_Shack_Bus flags = [ CANCEL_GROUND ]
    endgap GapID = ST_Gap_Shack_Barn text = 'Shack Combo' Score = 500 gapscript = ST_Gaps8_Success
endscript


script ST_Gaps8_Success 
    if GoalManager_GoalExists name = ST_Goal_Gaps8
        GoalManager_SetGoalFlag name = ST_Goal_Gaps8 got_1 1
    endif
endscript


script ST_gap_start_house 
    StartGap GapID = ST_Gap_House flags = [ PURE_AIR ]
endscript


script ST_Gap_end_House 
    endgap GapID = ST_Gap_House text = 'Over the House' Score = 200 gapscript = ST_Gaps9_Success
endscript


script ST_Gap_start_House2 
    StartGap GapID = ST_Gap_House2 flags = [ PURE_AIR ]
    StartGap GapID = ST_Gap_PorchDrop flags = [ PURE_AIR ]
endscript


script ST_Gap_end_House2 
    endgap GapID = ST_Gap_House2 text = 'Sideways House Launch' Score = 1000
endscript


script ST_Gaps9_Success 
    if GoalManager_GoalExists name = ST_Goal_Gaps9
        GoalManager_SetGoalFlag name = ST_Goal_Gaps9 got_1 1
    endif
endscript


script ST_Gap_CliffSpine2 
    StartGap GapID = ST_cliffspine2 flags = [ PURE_AIR CANCEL_WALK ]
    endgap GapID = ST_cliffspine text = 'Cliff Spine' Score = 200 gapscript = ST_SkateTheLine_Success
    endgap GapID = ST_zipwiredrop text = 'Drop from the Wire' Score = 200 gapscript = ST_SkateTheLine3_Outcomes
    endgap GapID = ST_Gap_slopetrans text = 'Big Slope HipTransfer' Score = 100
endscript


script ST_Gap_GarageSpine1 
    StartGap GapID = ST_garagespine2 flags = [ PURE_AIR ]
    endgap GapID = ST_garagespine text = 'Garage Wall Spine' Score = 200 gapscript = ST_SkateTheLine_Success2
endscript


script ST_Gap_GarageSpine2 
    StartGap GapID = ST_garagespine flags = [ PURE_AIR ]
    endgap GapID = ST_garagespine2 text = 'Garage Wall Spine' Score = 200 gapscript = ST_SkateTheLine_Success2
    endgap GapID = ST_Gap_BombGarage text = 'Over the Road Garage Bomb' Score = 100
endscript


script ST_Gap_GarageSpine3 
    StartGap GapID = ST_garagespine3 flags = [ PURE_AIR ]
    endgap GapID = ST_garagespine4 text = 'Into the Garage' Score = 200 gapscript = ST_SkateTheLine_Success3
endscript


script ST_Gap_GarageSpine4 
    StartGap GapID = ST_garagespine4 flags = [ PURE_AIR ]
    endgap GapID = ST_garagespine3 text = 'Into the Garage' Score = 200 gapscript = ST_SkateTheLine_Success3
endscript


script ST_SkateTheLine_Success 
    if GoalManager_GoalExists name = ST_Goal_SkatetheLine2
        GoalManager_SetGoalFlag name = ST_Goal_SkatetheLine2 got_1 1
    endif
endscript


script ST_SkateTheLine_Success2 
    if GoalManager_GoalExists name = ST_Goal_SkatetheLine2
        GoalManager_SetGoalFlag name = ST_Goal_SkatetheLine2 got_2 1
    endif
endscript


script ST_SkateTheLine_Success3 
    if GoalManager_GoalExists name = ST_Goal_SkatetheLine2
        GoalManager_SetGoalFlag name = ST_Goal_SkatetheLine2 got_3 1
    endif
endscript


script ST_Gap_ZipWireDrop 
    StartGap GapID = ST_zipwiredrop flags = [ CANCEL_GROUND ]
    if GoalManager_GoalExists name = ST_Goal_SkatetheLine3
        GoalManager_SetGoalFlag name = ST_Goal_SkatetheLine3 got_1 1
    endif
endscript


script ST_SkateTheLine3_Outcomes 
    printf 'outcomes check'
    ClearExceptionGroup ST_zipbomb
    SetException Ex = SkaterLanded scr = ST_SkateTheLine3_Success group = ST_zipbomb
    SetException Ex = SkaterBailed scr = ST_SkateTheLine3_bailed group = ST_zipbomb
    Block
endscript


script ST_SkateTheLine3_bailed 
    ClearExceptionGroup ST_zipbomb
    if GoalManager_GoalExists name = ST_Goal_SkatetheLine3
        GoalManager_LoseGoal name = ST_Goal_SkatetheLine3
    endif
endscript


script ST_SkateTheLine3_Success 
    ClearExceptionGroup ST_zipbomb
    if GoalManager_GoalExists name = ST_Goal_SkatetheLine3
        GoalManager_SetGoalFlag name = ST_Goal_SkatetheLine3 got_2 1
    endif
endscript


script ST_Gap_DownLine 
    StartGap GapID = ST_downline_1 flags = [ PURE_GRIND ]
    endgap GapID = ST_downline_1 gapscript = ST_DownhillLine_Success1
endscript


script ST_Gap_DownLine2 
    StartGap GapID = ST_downline_2 flags = [ PURE_GRIND ]
    endgap GapID = ST_downline_2 gapscript = ST_DownhillLine_Success2
endscript


script ST_Gap_DownLine3 
    StartGap GapID = ST_downline_3 flags = [ PURE_GRIND ]
    endgap GapID = ST_downline_3 gapscript = ST_DownhillLine_Success3
endscript


script ST_Gap_DownLine4 
    StartGap GapID = ST_downline_4 flags = [ PURE_GRIND ]
    endgap GapID = ST_downline_4 gapscript = ST_DownhillLine_Success4
endscript


script ST_Gap_DownLine5 
    StartGap GapID = ST_downline_5 flags = [ PURE_GRIND ]
    endgap GapID = ST_downline_5 gapscript = ST_DownhillLine_Success5
endscript


script ST_Gap_DownLine6 
    StartGap GapID = ST_downline_6 flags = [ PURE_GRIND ]
    endgap GapID = ST_downline_6 gapscript = ST_DownhillLine_Success6
    endgap GapID = ST_mobilehome text = 'Hellskull gap' Score = 100
endscript


script ST_Gap_DownLine7 
    StartGap GapID = ST_downline_7 flags = [ PURE_GRIND ]
    endgap GapID = ST_downline_7 gapscript = ST_DownhillLine_Success7
endscript


script ST_Gap_DownLine8 
    StartGap GapID = ST_downline_8 flags = [ PURE_GRIND ]
    endgap GapID = ST_downline_8 gapscript = ST_DownhillLine_Success8
endscript


script ST_StartGap_Mobilehome 
    StartGap GapID = ST_mobilehome flags = [ CANCEL_GROUND CANCEL_WALK CANCEL_MANUAL ]
endscript


script ST_StartGap_Garageroof 
    StartGap GapID = ST_Garageroof flags = [ CANCEL_GROUND CANCEL_WALK CANCEL_MANUAL ]
endscript


script ST_DownhillLine_Success1 
    if GoalManager_GoalExists name = ST_Goal_SkatetheLine4
        GoalManager_SetGoalFlag name = ST_Goal_SkatetheLine4 got_1 1
    endif
endscript


script ST_DownhillLine_Success2 
    if GoalManager_GoalExists name = ST_Goal_SkatetheLine4
        GoalManager_SetGoalFlag name = ST_Goal_SkatetheLine4 got_2 1
    endif
endscript


script ST_DownhillLine_Success3 
    if GoalManager_GoalExists name = ST_Goal_SkatetheLine4
        GoalManager_SetGoalFlag name = ST_Goal_SkatetheLine4 got_3 1
    endif
endscript


script ST_DownhillLine_Success4 
    if GoalManager_GoalExists name = ST_Goal_SkatetheLine4
        GoalManager_SetGoalFlag name = ST_Goal_SkatetheLine4 got_4 1
    endif
endscript


script ST_DownhillLine_Success5 
    if GoalManager_GoalExists name = ST_Goal_SkatetheLine4
        GoalManager_SetGoalFlag name = ST_Goal_SkatetheLine4 got_5 1
    endif
endscript


script ST_DownhillLine_Success6 
    if GoalManager_GoalExists name = ST_Goal_SkatetheLine4
        GoalManager_SetGoalFlag name = ST_Goal_SkatetheLine4 got_6 1
    endif
endscript


script ST_DownhillLine_Success7 
    if GoalManager_GoalExists name = ST_Goal_SkatetheLine4
        GoalManager_SetGoalFlag name = ST_Goal_SkatetheLine4 got_7 1
    endif
endscript


script ST_DownhillLine_Success8 
    if GoalManager_GoalExists name = ST_Goal_SkatetheLine4
        GoalManager_SetGoalFlag name = ST_Goal_SkatetheLine4 got_8 1
    endif
endscript


script ST_hitthekite 
    SpawnScript ST_SFX_Grab_Balloon
    if GoalManager_GoalExists name = ST_Goal_Gaps11
        GoalManager_SetGoalFlag name = ST_Goal_Gaps11 got_1 1
    endif
endscript


script ST_Gap_EndSpine 
    printf ' FLIP GAP '
    StartGap GapID = ST_Endspine1 flags = [ PURE_AIR ]
    endgap GapID = ST_Endspine2 text = 'End Spine' Score = 50 gapscript = ST_SkatetheLine5_EndSpine_Success
endscript


script ST_Gap_EndSpine2 
    printf ' FLIP GAP2 '
    StartGap GapID = ST_Endspine2 flags = [ PURE_AIR ]
    endgap GapID = ST_Endspine1 text = 'End Spine' Score = 50 gapscript = ST_SkatetheLine5_EndSpine_Success
    StartGap GapID = ST_Gap_BarnPoolHip2 flags = [ PURE_AIR CANCEL_WALK CANCEL_GROUND ]
    endgap GapID = ST_Gap_BarnPoolHip1 text = 'Barn Pool Hip' Score = 50
endscript


script ST_classic_gap_signflip 
    printf ' FLIP GAP '
    StartGap GapID = ST_classicgap_1 flags = [ PURE_AIR ] TrickText = 'Frontflip' TrickScript = ST_Gaps13_Got_Flip
    endgap GapID = ST_classicgap_2
    StartGap GapID = ST_signtransfer_1 flags = [ PURE_AIR CANCEL_GROUND ]
    StartGap GapID = ST_signtransfer_2 flags = [ PURE_AIR CANCEL_GROUND ]
    endgap GapID = ST_signtransfer_3 text = 'Sign Transfer' Score = 200 gapscript = ST_Gaps15_Success
    StartGap GapID = ST_signspine1 flags = [ PURE_AIR ]
    endgap GapID = ST_signspine2 text = 'Sign Spine' Score = 50 gapscript = ST_SkatetheLine5_SignSpine_Success
endscript


script ST_classic_gap_signflip2 
    printf ' FLIP GAP2 '
    StartGap GapID = ST_classicgap_2 flags = [ PURE_AIR ] TrickText = 'Frontflip' TrickScript = ST_Gaps13_Got_Flip
    endgap GapID = ST_classicgap_1
    StartGap GapID = ST_signtransfer_1 flags = [ PURE_AIR CANCEL_GROUND ]
    StartGap GapID = ST_signtransfer_2 flags = [ PURE_AIR CANCEL_GROUND ]
    endgap GapID = ST_signtransfer_3 text = 'Sign Transfer' Score = 200 gapscript = ST_Gaps15_Success
    StartGap GapID = ST_signspine2 flags = [ PURE_AIR ]
    endgap GapID = ST_signspine1 text = 'Sign Spine' Score = 50 gapscript = ST_SkatetheLine5_SignSpine_Success
endscript


script ST_gap_signtransfer1 
    StartGap GapID = ST_signtransfer_1 flags = [ PURE_AIR CANCEL_GROUND ]
    endgap GapID = ST_signtransfer_2 text = 'Sign Transfer' Score = 200 gapscript = ST_Gaps15_Success
    StartGap GapID = ST_signtransfer_3 flags = [ PURE_AIR CANCEL_GROUND ]
    endgap GapID = ST_Gap_mobilehome2 text = 'Mobilehome Drop' Score = 50
endscript


script ST_gap_signtransfer2 
    StartGap GapID = ST_signtransfer_2 flags = [ PURE_AIR CANCEL_GROUND ]
    endgap GapID = ST_signtransfer_1 text = 'Sign Transfer' Score = 200 gapscript = ST_Gaps15_Success
    StartGap GapID = ST_signtransfer_3 flags = [ PURE_AIR CANCEL_GROUND ]
    StartGap GapID = ST_weirdtransfer1 flags = [ PURE_AIR CANCEL_GROUND ]
endscript


script ST_EndGap_WeirdTransfer 
    endgap GapID = ST_weirdtransfer1 text = 'Weird Transfer' Score = 200
endscript


script ST_Gaps13_Got_Flip 
    if GoalManager_GoalExists name = st_classic_goal_gaps13
        GoalManager_SetGoalFlag name = st_classic_goal_gaps13 got_1 1
    endif
endscript


script ST_SkatetheLine5_EndSpine_Success 
endscript


script ST_SkatetheLine5_SignSpine_Success 
endscript


script ST_Gaps15_Success 
    if GoalManager_GoalExists name = ST_Goal_Gaps16
        GoalManager_SetGoalFlag name = ST_Goal_Gaps16 got_1 1
    endif
endscript


script ST_Gaps18_Success 
    if GoalManager_GoalExists name = ST_Goal_Gaps18
        GoalManager_SetGoalFlag name = ST_Goal_Gaps18 got_1 1
    endif
endscript


script ST_startgap_bigmanual 
    StartGap GapID = ST_Gap_BigManual flags = [ PURE_MANUAL CANCEL_GROUND CANCEL_WALK ]
endscript


script ST_endgap_bigmanual 
    endgap GapID = ST_Gap_BigManual gapscript = ST_Gaps19_Success
endscript


script ST_Gaps19_Success 
    if GoalManager_GoalExists name = ST_Goal_Gaps19
        GoalManager_SetGoalFlag name = ST_Goal_Gaps19 got_1 1
    endif
endscript


script ST_StartGap_Endgoal_Fountain 
    StartGap GapID = ST_Gap_Fountain flags = [ PURE_GRIND CANCEL_GROUND CANCEL_WALK ]
endscript


script ST_EndGap_Endgoal_Fountain 
    endgap GapID = ST_Gap_Fountain gapscript = ST_Endgoal_Fountain_Success
endscript


script ST_Endgoal_Fountain_Success 
    if GoalManager_GoalExists name = ST_Goal_Gaps23
        if NOT GoalManager_GoalFlagSet name = ST_Goal_Gaps23 flag = got_1
            Create name = g_endgoal_fountain_on
            CreateFastParticleSystem name = radiowaves03 params_script = apm_st_radioWaves_fast_particle_params
            radiowaves03 ::obj_setposition position = (1919.0, 6229.0, -1573.0)
            SpawnScript ST_SFX_Bomb03_activated
            GoalManager_SetGoalFlag name = ST_Goal_Gaps23 got_1 1
            wait 3 seconds
            kill_panel_message_if_it_exists id = message_fountain
        endif
    endif
endscript


script ST_Gap_Stairs1 
    if GetFlag flag = FLAG_COMBO
        StartGap GapID = ST_Gap_Stairs1 flags = [ REQUIRE_WALK ]
    endif
endscript


script ST_Gap_Stairs2 
    if GetFlag flag = FLAG_COMBO
        endgap GapID = ST_Gap_Stairs1 text = 'UpStairs' Score = 1
    endif
endscript


script ST_Gap_Stairs3 
    if GetFlag flag = FLAG_COMBO
        StartGap GapID = ST_Gap_Stairs2 flags = [ REQUIRE_WALK ]
    endif
endscript


script ST_Gap_Stairs4 
    if GetFlag flag = FLAG_COMBO
        endgap GapID = ST_Gap_Stairs2 text = 'DownStairs' Score = 1
    endif
endscript


script ST_Gap_StairTransfer1 
    StartGap GapID = ST_Gap_TransferStairs1 flags = [ PURE_AIR ]
    endgap GapID = ST_Gap_TransferStairs2 text = 'Stair Transfer' Score = 50
    endgap GapID = ST_Gap_PorchDrop text = 'Over the Porch Drop' Score = 50
endscript


script ST_Gap_StairTransfer2 
    StartGap GapID = ST_Gap_TransferStairs2 flags = [ PURE_AIR ]
    endgap GapID = ST_Gap_TransferStairs1 text = 'Stair Transfer' Score = 50
    endgap GapID = ST_Gap_PorchDrop text = 'Over the Porch Drop' Score = 50
endscript


script ST_Gap_Porch1 
    StartGap GapID = ST_Gap_Porch1 flags = [ PURE_MANUAL CANCEL_WALK ]
endscript


script ST_Gap_Porch2 
    endgap GapID = ST_Gap_Porch1 text = 'Porch Manual' Score = 100
endscript


script ST_Gap_Porch3 
    StartGap GapID = ST_Gap_Porch2 flags = [ PURE_MANUAL CANCEL_WALK ]
endscript


script ST_Gap_Porch4 
    endgap GapID = ST_Gap_Porch2 text = 'Porch Manual' Score = 100
endscript


script ST_Gap_Bowling1 
    StartGap GapID = ST_Gap_Bowling1 flags = [ PURE_MANUAL CANCEL_WALK ]
endscript


script ST_Gap_Bowling2 
    endgap GapID = ST_Gap_Bowling1 text = 'bowling Manual' Score = 100
endscript


script ST_Gap_Bowling3 
    StartGap GapID = ST_Gap_Bowling2 flags = [ PURE_MANUAL CANCEL_WALK ]
endscript


script ST_Gap_Bowling4 
    endgap GapID = ST_Gap_Bowling2 text = 'bowling Manual' Score = 100
endscript


script ST_StartGap_WaterPipe 
    StartGap GapID = ST_Gap_WaterPipe flags = [ PURE_GRIND CANCEL_GROUND CANCEL_WALK ]
endscript


script ST_EndGap_WaterPipe 
    endgap GapID = ST_Gap_WaterPipe text = 'Water Pipe Grind' Score = 500
endscript


script ST_StartGap_RedShack 
    StartGap GapID = ST_Gap_RedShack flags = [ CANCEL_GROUND CANCEL_WALK CANCEL_MANUAL ]
    endgap GapID = ST_Garageroof text = 'Huge Shack Gap' Score = 100
endscript


script ST_EndGap_RedShack 
    endgap GapID = ST_Gap_RedShack text = 'Shack 2 Sign' Score = 50
endscript


script ST_Gap_GreenShack 
    if firsttimeonthisrail
        StartGap GapID = ST_Gap_GreenShack
        endgap GapID = ST_Gap_GreenShack text = 'Green Shack' Score = 5
    else
        printf 'cheese'
    endif
endscript

jm_pondgrind = 0
jm_timesround_pond = 0
jm_pond_dir = 0

script ST_Pond_Grind 
    printf ' pond '
    GetTriggerArray through
    if triggertype <trigger_array>
        if onrail
            if (jm_pond_dir = 0)
                change jm_pond_dir = <pond_dir>
            endif
            if (<pond_dir> = jm_pond_dir)
                change jm_pondgrind = (jm_pondgrind + 1)
            else
                change jm_pond_dir = 0
                change jm_pondgrind = 0
            endif
            SpawnScript ST_Pond_Grind_off
            if (jm_pondgrind = 6)
                change jm_pondgrind = 0
                change jm_timesround_pond = (jm_timesround_pond + 1)
                if NOT InMultiPlayerGame
                    FormatText textname = pondgrind_text ' Around The Pond %a Times' a = jm_timesround_pond
                    create_panel_message id = message_pondgrind text = <pondgrind_text> style = style_ST_boxbomb
                endif
                if (jm_timesround_pond = 5)
                    GetGap text = 'Pond x 5' Score = 100
                endif
            endif
        endif
    endif
endscript


script ST_Pond_Grind_off 
    ClearExceptionGroup ST_Pond_grindcheck
    seteventhandler Ex = SkaterJump scr = ST_Pond_Grind_reset group = ST_Pond_grindcheck
    seteventhandler Ex = SkaterEnterBail scr = ST_Pond_Grind_reset group = ST_Pond_grindcheck
    seteventhandler Ex = SkaterExitRail scr = ST_Pond_Grind_reset group = ST_Pond_grindcheck
    Block
endscript


script ST_Pond_Grind_reset 
    change jm_timesround_pond = 0
    change jm_pondgrind = 0
    change jm_pond_dir = 0
    ClearExceptionGroup ST_Pond_grindcheck
    KillSpawnedScript name = ST_Pond_Grind_off
    kill_panel_message_if_it_exists id = message_spinbomb
endscript


script ST_StartGap_Top2Bottom 
    StartGap GapID = ST_Gap_Top2Bottom flags = [ PURE_GRIND CANCEL_GROUND CANCEL_WALK ]
endscript


script ST_EndGap_Top2Bottom 
    endgap GapID = ST_Gap_Top2Bottom text = 'Top Grind' Score = 1000
endscript


script ST_StartGap_IntoGarageBomb 
    StartGap GapID = ST_Gap_BombGarage flags = [ PURE_AIR ]
endscript


script ST_EndGap_Treeline1 
    endgap GapID = ST_Gap_Treeline1 continue = {GapID = ST_Gap_Treeline2 flags = [ PURE_GRIND CANCEL_GROUND ]}
endscript


script ST_EndGap_Treeline2 
    endgap GapID = ST_Gap_Treeline2 continue = {GapID = ST_Gap_Treeline3 flags = [ PURE_GRIND CANCEL_GROUND ]}
endscript


script ST_EndGap_Treeline3 
    endgap GapID = ST_Gap_Treeline3 text = 'Out the Bus, grind 2 trees, grind house' Score = 1000
endscript


script ST_StartGap_barnmanual 
    StartGap GapID = ST_Gap_barnmanual flags = [ PURE_MANUAL CANCEL_WALK ]
endscript


script ST_EndGap_barnmanual 
    endgap GapID = ST_Gap_barnmanual text = 'barn ramp manual' Score = 50
endscript


script ST_StartGap_SideBomb 
    StartGap GapID = ST_Gap_TubBomb flags = [ PURE_AIR ]
endscript


script ST_StartGap_SideWallBomb 
    StartGap GapID = ST_Gap_BombSide flags = [ PURE_AIR ]
endscript


script ST_EndGap_SideBomb 
    endgap GapID = ST_Gap_TubBomb text = 'Side Bomb' Score = 50
    endgap GapID = ST_Gap_BombSide text = 'Sidewall Bomb' Score = 50
endscript


script ST_StartGap_garagemanual 
    StartGap GapID = ST_Gap_garagemanual flags = [ PURE_MANUAL CANCEL_WALK ]
endscript


script ST_EndGap_garagemanual 
    endgap GapID = ST_Gap_garagemanual text = 'GaragePool Manual' Score = 50
endscript


script ST_Gap_BarnPoolHip1 
    StartGap GapID = ST_Gap_BarnPoolHip1 flags = [ PURE_AIR CANCEL_WALK CANCEL_GROUND ]
    endgap GapID = ST_Gap_BarnPoolHip2 text = 'Barn Pool Hip' Score = 50
endscript


script ST_Gap_BarnPoolHip2 
    StartGap GapID = ST_Gap_BarnPoolHip2 flags = [ PURE_AIR CANCEL_WALK CANCEL_GROUND ]
    endgap GapID = ST_Gap_BarnPoolHip1 text = 'Barn Pool Hip' Score = 50
endscript


script ST_Gap_mohome 
    StartGap GapID = ST_Gap_mobilehome1 flags = [ PURE_AIR CANCEL_WALK CANCEL_GROUND ]
    StartGap GapID = ST_Gap_mobilehome3 flags = [ PURE_AIR CANCEL_WALK CANCEL_GROUND ]
endscript


script ST_Gap_mohome2 
    StartGap GapID = ST_Gap_mobilehome2 flags = [ PURE_AIR CANCEL_WALK CANCEL_GROUND ]
endscript


script ST_EndGap_mohome1 
    endgap GapID = ST_Gap_mobilehome1 text = 'MobileHome Wall Bomb' Score = 50
endscript


script st_startgap_slopetransfer 
    printf ' slope '
    StartGap GapID = ST_Gap_slopetrans flags = [ PURE_AIR CANCEL_WALK ]
endscript


script ST_StartGap_Slopemanual1 
    StartGap GapID = ST_Gap_SlopeManual flags = [ PURE_MANUAL CANCEL_GROUND CANCEL_WALK ]
endscript


script ST_StartGap_Slopemanual2 
    endgap GapID = ST_Gap_SlopeManual continue = {GapID = ST_Gap_SlopeManual2 flags = [ PURE_MANUAL CANCEL_GROUND CANCEL_WALK ]}
endscript


script ST_StartGap_Slopemanual3 
    endgap GapID = ST_Gap_SlopeManual2 text = 'Manual 1.BigSlope 2.Cement Mixer 3.FrontGate' Score = 1000
endscript


script ST_particles 
    CreateFastParticleSystem name = wallOfire params_script = apm_bigfire01_fast_particle_params
    wallOfire ::obj_setposition position = (1067.0, 5558.0, 4497.0)
    CreateFastParticleSystem name = Chimney01 params_script = apm_ST_CHIMsmoke01_fast_particle_params
    Chimney01 ::obj_setposition position = (264.0, 5920.0, 3309.0)
    CreateFastParticleSystem name = Chimney02 params_script = apm_ST_CHIMsmoke01_fast_particle_params
    Chimney02 ::obj_setposition position = (672.0, 5920.0, 3168.0)
    CreateFastParticleSystem name = chimney03 params_script = apm_ST_CHIMsmoke01_fast_particle_params
    chimney03 ::obj_setposition position = (264.0, 5950.0, 3145.0)
    CreateFastParticleSystem name = chimney04 params_script = apm_ST_CHIMsmoke02_fast_particle_params
    chimney04 ::obj_setposition position = (436.0, 6054.0, 2969.0)
    CreateFastParticleSystem name = TrashFire01 params_script = apm_ST_fire01_fast_particle_params
    TrashFire01 ::obj_setposition position = (-31.0, 6390.0, -1378.0)
    CreateFastParticleSystem name = Trashfire01b params_script = apm_ST_fire01b_fast_particle_params
    Trashfire01b ::obj_setposition position = (-31.0, 6390.0, -1378.0)
    CreateFastParticleSystem name = Trashfire02 params_script = apm_ST_fire01_fast_particle_params
    Trashfire02 ::obj_setposition position = (-134.0, 6435.0, -1194.0)
    CreateFastParticleSystem name = Trashfire02b params_script = apm_ST_fire01b_fast_particle_params
    Trashfire02b ::obj_setposition position = (-134.0, 6435.0, -1194.0)
    CreateFastParticleSystem name = Trashfire03 params_script = apm_ST_fire01_fast_particle_params
    Trashfire03 ::obj_setposition position = (-30.0, 6486.0, -1213.0)
    CreateFastParticleSystem name = Trashfire03b params_script = apm_ST_fire01b_fast_particle_params
    Trashfire03b ::obj_setposition position = (-30.0, 6486.0, -1213.0)
    CreateFastParticleSystem name = Trashfire04 params_script = apm_ST_fire01c_fast_particle_params
    Trashfire04 ::obj_setposition position = (-158.0, 6412.0, -1310.0)
    CreateFastParticleSystem name = Trashfire05 params_script = apm_ST_fire01c_fast_particle_params
    Trashfire05 ::obj_setposition position = (-95.0, 6432.0, -1158.0)
    CreateFastParticleSystem name = Trashfire06 params_script = apm_ST_fire01c_fast_particle_params
    Trashfire06 ::obj_setposition position = (25.0, 6415.0, -1241.0)
    CreateFastParticleSystem name = TrashSmoke01 params_script = apm_ST_trashSmoke01_fast_particle_params
    TrashSmoke01 ::obj_setposition position = (-83.0, 6446.0, -1300.0)
    CreateFastParticleSystem name = pipespray01 params_script = apm_ST_pipeSpray01_fast_particle_params
endscript


script ST_2d_sign_element_create parent = menu3d_anchor
    if GetGlobalFlag flag = SCREEN_MODE_WIDE
        <Offset> = (-8.0, 0.0)
    else
        <Offset> = (0.0, 0.0)
    endif
    CreateScreenElement {
        type = ContainerElement
        parent = <parent>
        Pos = (0.0, 0.0)
        id = SK_bullet_holder
        z_priority = -53
    }
    CreateScreenElement {
        type = SpriteElement
        parent = SK_bullet_holder
        texture = SK_icon_1
        id = SK_bullet1
        Scale = 1.500
        rgba = [ 128 128 128 128 ]
        Pos = ((9.0, 148.0) + <Offset>)
        rot_angle = 0
        just = [ left top ]
    }
    CreateScreenElement {
        type = SpriteElement
        parent = SK_bullet_holder
        texture = SK_icon_1
        id = SK_bullet2
        Scale = 1.500
        rgba = [ 128 128 128 128 ]
        Pos = ((9.0, 148.0) + <Offset>)
        rot_angle = 0
        just = [ left top ]
    }
    CreateScreenElement {
        type = SpriteElement
        parent = SK_bullet_holder
        texture = SK_icon_1
        id = SK_bullet3
        Scale = 1.500
        rgba = [ 128 128 128 128 ]
        Pos = ((9.0, 148.0) + <Offset>)
        rot_angle = 0
        just = [ left top ]
    }
    CreateScreenElement {
        type = SpriteElement
        parent = SK_bullet_holder
        texture = SK_icon_1
        id = SK_bullet4
        Scale = 1.500
        rgba = [ 128 128 128 128 ]
        Pos = ((9.0, 148.0) + <Offset>)
        rot_angle = 0
        just = [ left top ]
    }
    CreateScreenElement {
        type = SpriteElement
        parent = SK_bullet_holder
        texture = SK_icon_1
        id = SK_bullet5
        Scale = 1.500
        rgba = [ 128 128 128 128 ]
        Pos = ((9.0, 148.0) + <Offset>)
        rot_angle = 0
        just = [ left top ]
    }
    CreateScreenElement {
        type = SpriteElement
        parent = <parent>
        texture = SK_icon_2
        id = SK_crash
        Scale = 2.400
        rgba = [ 128 128 128 128 ]
        Pos = ((80.0, 370.0) + <Offset>)
        rot_angle = -20
        just = [ center center ]
        z_priority = -51
    }
    RunScriptOnScreenElement id = SK_bullet_holder SK_bullet_anim
    RunScriptOnScreenElement id = SK_crash do_random_effect_paused params = { id = <id> }
endscript


script SK_bullet_anim 
    begin 
    bull1_pos = Random (@ (-10.0, 30.0) @ (-5.0, 90.0))
    bull2_pos = Random (@ (15.0, 150.0) @ (60.0, 220.0))
    bull3_pos = Random (@ (90.0, 188.0) @ (15.0, 220.0))
    bull4_pos = Random (@ (130.0, 240.0) @ (24.0, 280.0))
    bull5_pos = Random (@ (120.0, 300.0) @ (40.0, 320.0))
    SK_bullet1 ::DoMorph time = 0 Pos = <bull1_pos> Scale = 1.800 alpha = 0
    SK_bullet2 ::DoMorph time = 0 Pos = <bull2_pos> Scale = 1.800 alpha = 0
    SK_bullet3 ::DoMorph time = 0 Pos = <bull3_pos> Scale = 1.800 alpha = 0
    SK_bullet4 ::DoMorph time = 0 Pos = <bull4_pos> Scale = 1.800 alpha = 0
    SK_bullet5 ::DoMorph time = 0 Pos = <bull5_pos> Scale = 1.800 alpha = 0
    DoMorph time = 0 alpha = 1
    wait Random (@ 1 @ 2 @ 3) seconds
    SK_bullet1 ::DoMorph time = 0.1000 Pos = <bull1_pos> alpha = 1
    wait Random (@ 1 @ 2 @ 3) seconds
    SK_bullet2 ::DoMorph time = 0.1000 Pos = <bull2_pos> alpha = 1
    wait Random (@ 1 @ 2 @ 3) seconds
    SK_bullet3 ::DoMorph time = 0.1000 Pos = <bull3_pos> alpha = 1
    wait Random (@ 1 @ 2 @ 3) seconds
    SK_bullet4 ::DoMorph time = 0.1000 Pos = <bull4_pos> alpha = 1
    wait Random (@ 1 @ 2 @ 3) seconds
    SK_bullet5 ::DoMorph time = 0.1000 Pos = <bull5_pos> alpha = 1
    wait Random (@ 5 @ 8 @ 12) seconds
    DoMorph time = 1 alpha = 0
    wait Random (@ 1 @ 2 @ 3) seconds
    repeat 
endscript

ST_CatLogic_Table = {
    ST_STATE_IdleCat = {
        script_ped_state = ST_STATECONTROL_KittyNice
    }
    STATE_chasecatch = {
        script_ped_state = ST_STATECONTROL_Kittycatch
    }
}

script ST_STATECONTROL_KittyNice 
    obj_enableanimblending enabled = 1
    obj_setinnerradius 25
    seteventhandler Ex = objectinradius scr = ST_Cat_StartChase
    begin 
    Random (
        @ PlayAnimWithPartialAnimIfExists anim = idle
        @ PlayAnimWithPartialAnimIfExists anim = SitFromIdle
        Obj_WaitAnimFinished
        begin 
        Random (
            @ PlayAnimWithPartialAnimIfExists anim = SitIdle1
            @ PlayAnimWithPartialAnimIfExists anim = SitIdle2
            @ PlayAnimWithPartialAnimIfExists anim = SitIdle3
        )
        Obj_WaitAnimFinished
        repeat 4
        PlayAnimWithPartialAnimIfExists anim = SitFromIdle backwards
    )
    if NOT IsStreamPlaying CatMeowSFX
        Random (
            @*4 
            @ obj_playstream ST_Cat_Idle01 vol = 80 priority = StreamPriorityMidHigh dropoff = 150 id = CatMeowSFX
            @ obj_playstream ST_Cat_Idle02 vol = 80 priority = StreamPriorityMidHigh dropoff = 150 id = CatMeowSFX
        )
    endif
    Obj_WaitAnimFinished
    repeat 
endscript


script ST_Cat_StartChase 
    ClearEventHandler objectinradius
    Ped_Utils_BeginPlayerChase MaxHomeDist = 25 table = ST_CatLogic_Table
endscript


script ST_STATECONTROL_Kittycatch 
    PlayAnimWithPartialAnimIfExists anim = Pounce Cycle
    Random (
        @ obj_playstream ST_Cat_Angry01 vol = 200 priority = StreamPriorityMidHigh dropoff = 150
        @ obj_playstream ST_Cat_Angry02 vol = 200 priority = StreamPriorityMidHigh dropoff = 150
    )
    obj_locktoobject (0.0, 59.0, 0.0) objectname = skater lagrange = (0.20000000298023224, 0.4000000059604645)
    wait 0.3000 seconds
    if NOT skater ::walking
        ShakeCamera {
            duration = 2
            vert_amp = 4.0
            horiz_amp = 4.0
            vert_vel = 5.270
            horiz_vel = 10.92
        }
    endif
    PlayAnimWithPartialAnimIfExists anim = attack Cycle
    skater ::obj_getscaling
    sz = (((1 - (<scaling>.(0.0, 0.0, 1.0)))* -75)+ 1)
    catoffset = (<sz> * (0.0, 0.0, 1.0))
    obj_locktoobject <catoffset> bone = Bone_Neck objectname = skater lagrange = (1.0, 1.0)
    obj_getid
    switch <ObjID>
        case TRG_ped_pinkcat
        wait 2 seconds
        case TRG_ped_escape_pinkcat
        wait 20 seconds
    endswitch
    obj_locktoobject Off
    PlayAnimWithPartialAnimIfExists anim = Pounce Cycle
    skater ::obj_getposition
    <Pos> = (<Pos> + (60.0, 0.0, 60.0))
    obj_movetopos <Pos> time = 0.1500
    Obj_WaitMove
    Ped_GetCurrentNodeNames
    obj_movetonode name = <node_from> orient
    PlayAnimWithPartialAnimIfExists anim = idle Cycle
    wait 5 seconds
    Ped_StateLogic_SetDefaultState
endscript

