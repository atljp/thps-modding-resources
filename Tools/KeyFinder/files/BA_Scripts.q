
BA_BRIDGE_STATE = impassable
FLAG_BA_HEAD_DECAP = 1
FLAG_BA_FANBOOST = 2
FLAG_BA_BULLHIT_1 = 3
FLAG_BA_BULLHIT_2 = 4
FLAG_BA_BULL_FREE = 6
FLAG_BA_SKATER_IS_ON_FIRE = 7
FLAG_BA_PHOENIX = 8
FLAG_BA_BULLDUNG = 9
FLAG_BA_BUTTERFINGER = 11
FLAG_BA_SANTSBENCH = 0
FLAG_BA_MAMOLEDGE = 112
FLAG_BA_BESOSFLIP = 13
FLAG_BA_HITBYTOMATO = 14
FLAG_GUELL_LIZARD_TAIL_ISROTATING = 15
FLAG_BA_TRASHCAN_SPINNING = 16
FLAG_SPOUTS = 17
FLAG_SPOUTSA = 18
FLAG_BA_BULLDUNG_NOTJUSTCREATED = 19
BA_Cam_Goal_BullFighter = {
    TargetID = world
    targetOffset = (13741.5, 2062.699951171875, -2591.300048828125)
    positionOffset = (4054.300048828125, 49.099998474121094, -1140.800048828125)
}
BA_Cam_Goal_SteveO = {
    TargetID = world
    targetOffset = (-6592.0, -729.7999877929688, -4222.39990234375)
    positionOffset = (2495.39990234375, 487.1000061035156, -230.89999389648438)
}
BA_Cam_Goal_TomatoPeds = {
    TargetID = world
    targetOffset = (9117.2001953125, -643.7999877929688, 10442.400390625)
    positionOffset = (3797.39990234375, 59.400001525878906, 2004.0999755859375)
}
BA_Cam_Goal_Arcade = {
    TargetID = world
    targetOffset = (-7171.7998046875, -1547.4000244140625, 6176.7998046875)
    positionOffset = (2161.300048828125, 184.60000610351562, 3031.60009765625)
}
BA_Cam_Goal_GuellSpines = {
    TargetID = world
    targetOffset = (7077.5, -1469.699951171875, -8216.2001953125)
    positionOffset = (526.9000244140625, 650.2999877929688, -964.2000122070312)
}
BA_Cam_Goal_BoatCaptain = {
    TargetID = world
    targetOffset = (8043.60009765625, -2639.699951171875, -1333.699951171875)
    positionOffset = (4061.800048828125, 591.5, 7251.2998046875)
}
BA_Cam_Goal_Graffiti1 = {
    TargetID = world
    targetOffset = (-7852.5, -594.5999755859375, 6208.39990234375)
    positionOffset = (1334.800048828125, 362.20001220703125, 2377.300048828125)
    time = 2
}
BA_Cam_Goal_Graffiti2 = {
    TargetID = world
    targetOffset = (-5119.10009765625, -605.5, -8918.0)
    positionOffset = (383.5, 289.0, -616.2000122070312)
    time = 2
}
BA_Cam_Goal_Graffiti3 = {
    TargetID = world
    targetOffset = (12180.7998046875, -1637.699951171875, 2360.199951171875)
    positionOffset = (3302.0, 132.3000030517578, -1886.199951171875)
    time = 2
}
BA_Cam_Goal_Graffiti4 = {
    TargetID = world
    targetOffset = (12640.099609375, 174.6999969482422, 4813.60009765625)
    positionOffset = (3637.60009765625, 128.0, 460.3999938964844)
    time = 2
}
BA_Cam_Goal_Graffiti5 = {
    TargetID = world
    targetOffset = (-6617.7001953125, -1046.300048828125, -3998.300048828125)
    positionOffset = (2397.39990234375, 111.30000305175781, 171.3000030517578)
    time = 2
}
BA_Cam_Goal_Trash = {
    TargetID = world
    targetOffset = (8152.10009765625, 280.1000061035156, -7212.2001953125)
    positionOffset = (574.2999877929688, 28.100000381469727, -692.2999877929688)
}
BA_Cam_Goal_SantsCombo = {
    TargetID = world
    targetOffset = (-6781.2998046875, -1020.7000122070312, -1522.699951171875)
    positionOffset = (1985.699951171875, 72.5999984741211, 3161.699951171875)
}
BA_Cam_Goal_Catapult720 = {
    TargetID = world
    targetOffset = (-3824.10009765625, -1456.699951171875, -4603.2998046875)
    positionOffset = (3778.89990234375, 552.5999755859375, 1573.800048828125)
}
BA_Cam_Goal_Focus = {
    TargetID = world
    targetOffset = (1778.699951171875, 561.0999755859375, -6247.7998046875)
    positionOffset = (2297.699951171875, 89.30000305175781, 3727.5)
}
BA_Cam_Goal_SantsBenches = {
    TargetID = world
    targetOffset = (9014.2001953125, -1990.800048828125, 6143.2001953125)
    positionOffset = (831.2000122070312, 136.3000030517578, 803.5)
}
BA_Cam_Goal_GuellTransfer = {
    TargetID = world
    targetOffset = (6051.7998046875, -4688.0, 3988.0)
    positionOffset = (913.5999755859375, 822.2000122070312, -2587.300048828125)
}
BA_Cam_Goal_BigTag = {
    TargetID = world
    targetOffset = (1702.300048828125, 339.20001220703125, -9639.7001953125)
    positionOffset = (2222.39990234375, 1297.5999755859375, 300.70001220703125)
}
BA_Cam_Goal_AcidTram = {
    TargetID = world
    targetOffset = (1778.699951171875, 561.0999755859375, -6247.7998046875)
    positionOffset = (2297.699951171875, 89.30000305175781, 3727.5)
}
BA_Cam_Goal_LaPadSpiral = {
    TargetID = world
    targetOffset = (-1635.800048828125, -7272.89990234375, -2816.800048828125)
    positionOffset = (1702.0999755859375, 1528.9000244140625, 556.4000244140625)
}
BA_Cam_Goal_BullDung = {
    TargetID = world
    targetOffset = (-5314.5, -63.79999923706055, 10310.5)
    positionOffset = (-248.1999969482422, 36.900001525878906, 1689.5999755859375)
}
BA_Cam_Goal_Phoenix = {
    TargetID = world
    targetOffset = (3832.300048828125, -5207.2998046875, -5317.7998046875)
    positionOffset = (3416.0, 1341.0999755859375, 2227.199951171875)
}
BA_Cam_Goal_NoGround = {
    TargetID = world
    targetOffset = (10620.5, -2155.89990234375, 6974.10009765625)
    positionOffset = (1959.199951171875, 1278.5, 3343.300048828125)
}
BA_Cam_Goal_BullVsBull = {
    TargetID = world
    targetOffset = (-4143.7998046875, -133.1999969482422, -4639.7001953125)
    positionOffset = (3628.39990234375, 573.5, 1622.300048828125)
}
BA_Cam_Goal_GuellHighCombo = {
    TargetID = world
    targetOffset = (3093.89990234375, -4650.89990234375, -8187.2998046875)
    positionOffset = (1758.800048828125, 1849.800048828125, -706.9000244140625)
}
BA_Cam_Goal_BullTrick = {
    TargetID = world
    targetOffset = (7907.7998046875, -3501.0, -6363.7001953125)
    positionOffset = (1767.5999755859375, 1088.300048828125, 57.70000076293945)
}
BA_Goal_Intro_Cameras = [{virtual_cam
        TargetID = world
        targetOffset = (-6008.5, 1295.0999755859375, -2170.199951171875)
        positionOffset = (2952.39990234375, 60.0, 2093.0)
        frames = 200
        skippable = 1
        text = BA_Intro_Text1
        time = 6000
        cam_start_script = BA_Intro_Line1
    }
    {virtual_cam
        TargetID = world
        targetOffset = (-6008.5, 1295.0999755859375, -2170.199951171875)
        positionOffset = (2952.39990234375, 60.0, 2093.0)
        frames = 280
        skippable = 1
        text = BA_Intro_Text2
        time = 6000
        cam_start_script = BA_Intro_Line2
    }
    {virtual_cam
        TargetID = world
        targetOffset = (-6008.5, 1295.0999755859375, -2170.199951171875)
        positionOffset = (2952.39990234375, 60.0, 2093.0)
        frames = 320
        skippable = 1
        text = BA_Intro_Text3
        time = 6000
        cam_start_script = BA_Intro_Line3
    }
    {virtual_cam
        BA_Cam_Goal_BullFighter
        frames = 200
        skippable = 1
        goal = BA_Goal_Gaps8
        time = 6000
    }
    {virtual_cam
        BA_Cam_Goal_SteveO
        frames = 200
        skippable = 1
        goal = BA_Goal_Gaps13
        time = 6000
    }
    {virtual_cam
        BA_Cam_Goal_TomatoPeds
        frames = 200
        skippable = 1
        goal = BA_Goal_Gaps9
        time = 6000
    }
    {virtual_cam
        BA_Cam_Goal_GuellSpines
        frames = 200
        skippable = 1
        goal = BA_Goal_Gaps3
        time = 6000
    }
    {virtual_cam
        BA_Cam_Goal_BoatCaptain
        frames = 200
        skippable = 1
        goal = BA_Goal_Gaps2
        time = 6000
    }
    {virtual_cam
        BA_Cam_Goal_Graffiti1
        frames = 200
        skippable = 1
        goal = BA_Goal_Gaps5
        time = 6000
    }
    {virtual_cam
        BA_Cam_Goal_Trash
        frames = 200
        skippable = 1
        goal = BA_Goal_Gaps7
        time = 6000
    }
    {virtual_cam
        BA_Cam_Goal_Arcade
        frames = 200
        skippable = 1
        goal = BA_Goal_TimedScoreRun
        time = 6000
    }
]
BA_Pro_Goal_Intro_Cameras = [{virtual_cam
        TargetID = world
        targetOffset = (1498.0999755859375, 2565.89990234375, -7809.2998046875)
        positionOffset = (3144.89990234375, 51.20000076293945, 1728.300048828125)
        frames = 615
        skippable = 1
        text = 'New goal list unlocked.  Pro goals!'
        time = 10000
        cam_start_script = BA_ProSwitch_Line1
    }
    {virtual_cam
        BA_Cam_Goal_SantsBenches
        frames = 200
        skippable = 1
        goal = BA_Goal_TrickObjects1
        time = 6000
    }
    {virtual_cam
        BA_Cam_Goal_Catapult720
        frames = 200
        skippable = 1
        goal = BA_Goal_Gaps15
        time = 6000
    }
    {virtual_cam
        BA_Cam_Goal_BigTag
        frames = 200
        skippable = 1
        goal = BA_Goal_Gaps4
        time = 6000
    }
    {virtual_cam
        BA_Cam_Goal_Focus
        frames = 200
        skippable = 1
        goal = BA_Goal_Gaps14
        time = 6000
    }
    {virtual_cam
        BA_Cam_Goal_SantsCombo
        frames = 200
        skippable = 1
        goal = BA_Goal_SkateTheLine1
        time = 6000
    }
    {virtual_cam
        BA_Cam_Goal_GuellTransfer
        frames = 200
        skippable = 1
        goal = BA_Goal_Gaps12
        time = 6000
    }
    {virtual_cam
        BA_Cam_Goal_AcidTram
        frames = 200
        skippable = 1
        goal = BA_Goal_Gaps10
        time = 6000
    }
    {virtual_cam
        BA_Cam_Goal_AcidTram
        frames = 200
        skippable = 1
        goal = BA_Goal_Gaps10
        time = 6000
    }
]
BA_BullFighter_Goal_Intro_Cameras = [{virtual_cam
        TargetID = world
        targetOffset = (12706.2001953125, 547.0, -6449.60009765625)
        positionOffset = (4221.7998046875, 58.0, -1179.4000244140625)
        frames = 615
        skippable = 1
        text = 'New goal list unlocked.  Guest goals!\nNew Special Trick - The Espana Sword Slide'
        time = 10000
        cam_start_script = BA_BullfighterSwitch_Line1
    }
    {virtual_cam
        BA_Cam_Goal_LaPadSpiral
        frames = 200
        skippable = 1
        goal = BA_Goal_Gaps6
        time = 6000
    }
    {virtual_cam
        BA_Cam_Goal_BullDung
        frames = 200
        skippable = 1
        goal = BA_Goal_Gaps11
        time = 6000
    }
    {virtual_cam
        BA_Cam_Goal_Phoenix
        frames = 200
        skippable = 1
        goal = BA_Goal_Gaps1
        time = 6000
    }
    {virtual_cam
        BA_Cam_Goal_NoGround
        frames = 200
        skippable = 1
        goal = BA_Goal_Gaps19
        time = 6000
    }
]
BA_SteveO_Goal_Intro_Cameras = [{virtual_cam
        TargetID = world
        targetOffset = (10835.599609375, 979.7000122070312, 5005.10009765625)
        positionOffset = (2639.60009765625, 73.0999984741211, -652.0)
        frames = 615
        skippable = 1
        text = 'New goal list unlocked.  Secret goals!'
        time = 10000
        cam_start_script = BA_SteveOSwitch_Line1
    }
    {virtual_cam
        BA_Cam_Goal_BullVsBull
        frames = 200
        skippable = 1
        goal = BA_Goal_Gaps16
        time = 6000
    }
    {virtual_cam
        BA_Cam_Goal_GuellHighCombo
        frames = 200
        skippable = 1
        goal = BA_Goal_HighCombo
        time = 6000
    }
    {virtual_cam
        BA_Cam_Goal_BullTrick
        frames = 200
        skippable = 1
        goal = BA_Goal_Gaps21
        time = 6000
    }
    {virtual_cam
        TargetID = world
        targetOffset = (-7534.60009765625, -1062.5999755859375, 1730.300048828125)
        positionOffset = (2357.89990234375, 120.69999694824219, 2588.60009765625)
        frames = 200
        skippable = 1
        goal = BA_Goal_Gaps17
        time = 6000
    }
]

script BA_Setup 
    BA_CreateCars
    BA_CreatePeds
    if GameModeEquals is_career
        SpawnScript BA_Goal_TomatoPeds_Counter
    endif
    if NOT InMultiPlayerGame
        if NOT ((BA_BRIDGE_STATE = passable)|| (GoalManager_HasWonGoal name = BA_Goal_Gaps2))
            printf '#### making bridge impassable ####'
            printf '#### making bridge impassable ####'
            printf '#### making bridge impassable ####'
            printf '#### making bridge impassable ####'
            printf '#### making bridge impassable ####'
            printf '#### making bridge impassable ####'
            printf '#### making bridge impassable ####'
            printf '#### making bridge impassable ####'
            printf '#### making bridge impassable ####'
            printf '#### making bridge impassable ####'
            printf '#### making bridge impassable ####'
            printf '#### making bridge impassable ####'
            printf '#### making bridge impassable ####'
            printf '#### making bridge impassable ####'
            BA_Event_Bridge_Impassable
            SpawnScript BA_TRAMsparks01
        else
            printf '#### making bridge passable ####'
            printf '#### making bridge passable ####'
            printf '#### making bridge passable ####'
            printf '#### making bridge passable ####'
            printf '#### making bridge passable ####'
            printf '#### making bridge passable ####'
            printf '#### making bridge passable ####'
            printf '#### making bridge passable ####'
            printf '#### making bridge passable ####'
            printf '#### making bridge passable ####'
            printf '#### making bridge passable ####'
            printf '#### making bridge passable ####'
            printf '#### making bridge passable ####'
            BA_Event_Bridge_Net Speed = 1000 boat
        endif
        SpawnScript BA_Startup_Particles
    endif
    if NOT GoalManager_HasWonGoal name = BA_Goal_Gaps8
        Create name = TRG_BA_TomatoThrower
    endif
    BA_Initializer
endscript


script BA_startup 
    UnSetFlag flag = FLAG_BA_HEAD_DECAP
    UnSetFlag flag = FLAG_BA_FANBOOST
    UnSetFlag flag = FLAG_BA_BULLHIT_1
    UnSetFlag flag = FLAG_BA_BULLHIT_2
    UnSetFlag flag = FLAG_BA_BULL_FREE
    UnSetFlag flag = FLAG_BA_SKATER_IS_ON_FIRE
    UnSetFlag flag = FLAG_BA_BULLDUNG
    UnSetFlag flag = FLAG_BA_PHOENIX
    UnSetFlag flag = FLAG_BA_BUTTERFINGER
    LoadAsset 'models\gameobjects\projectiles\tomato\tomato.tex'
    LoadAsset 'models\gameobjects\projectiles\tomato\tomato.mdl' parent = `models\gameobjects\projectiles\tomato\tomato.tex`
    LoadSkeleton name = 'skeletons/CS_BA_RubberBand.ske' CS_BA_RubberBand
    LoadSkeleton name = 'skeletons/CS_BA_Banner.ske' CS_BA_Banner
endscript


script BA_KillCreate_NetGeo 
    if ((InMultiPlayerGame)|| (InNetGame))
    endif
endscript


script BA_Goals 
    if InMultiPlayerGame
        add_multiplayer_mode_goals
    endif
    if NOT InSplitScreenGame
        if ((GameModeEquals is_classic)|| (InNetGame))
            AddGoal_HighScore {
                unlimited_time
                goal_text = BA_Classic_HighScore_Text
                view_goals_text = BA_Classic_HighScore_Text
                view_goals_cameras = [{
                        name = CAM_Classic_Intro01
                        frames = 1200
                        skippable = 1
                    }
                ]
                difficulty_level_params = [
                    {Score = BA_Classic_Easy_HighScore
                        goal_text = BA_Classic_Easy_HighScore_Text
                        view_goals_text = BA_Classic_Easy_HighScore_Text
                    }
                    {Score = BA_Classic_HighScore
                        goal_text = BA_Classic_HighScore_Text
                        view_goals_text = BA_Classic_HighScore_Text
                    }
                ]
                classic_mode_goal
            }
            AddGoal_ProScore {
                unlimited_time
                goal_text = BA_Classic_ProScore_Text
                view_goals_text = BA_Classic_ProScore_Text
                classic_mode_goal
                difficulty_level_params = [
                    {
                        Score = BA_Classic_Easy_ProScore
                        goal_text = BA_Classic_Easy_ProScore_Text
                        view_goals_text = BA_Classic_Easy_ProScore_Text
                    }
                    {
                        Score = BA_Classic_ProScore
                        goal_text = BA_Classic_ProScore_Text
                        view_goals_text = BA_Classic_ProScore_Text
                    }
                ]
            }
            AddGoal_SickScore {
                unlimited_time
                goal_text = BA_Classic_SickScore_Text
                view_goals_text = BA_Classic_SickScore_Text
                classic_mode_goal
                difficulty_level_params = [
                    {
                        Score = BA_Classic_Easy_SickScore
                        goal_text = BA_Classic_Easy_SickScore_Text
                        view_goals_text = BA_Classic_Easy_SickScore_Text
                    }
                    {
                        Score = BA_Classic_SickScore
                        goal_text = BA_Classic_SickScore_Text
                        view_goals_text = BA_Classic_SickScore_Text
                    }
                ]
            }
            AddGoal_HighCombo {
                unlimited_time
                goal_text = BA_Classic_HighCombo_Text
                view_goals_text = BA_Classic_HighCombo_Text
                classic_mode_goal
                difficulty_level_params = [
                    {
                        Score = BA_Classic_Easy_HighCombo
                        goal_text = BA_Classic_Easy_HighCombo_Text
                        view_goals_text = BA_Classic_Easy_HighCombo_Text
                    }
                    {
                        Score = BA_Classic_HighCombo
                        goal_text = BA_Classic_HighCombo_Text
                        view_goals_text = BA_Classic_HighCombo_Text
                    }
                ]
            }
            AddGoal_Skate {
                unlimited_time
                S_obj_id = TRG_SKATE_S
                K_obj_id = TRG_SKATE_K
                A_obj_id = TRG_SKATE_A
                T_obj_id = TRG_SKATE_T
                E_obj_id = TRG_SKATE_E
                view_goals_cameras = [{virtual_cam
                        TargetID = world
                        targetOffset = (-5333.7998046875, -271.8999938964844, -4152.7998046875)
                        positionOffset = (1828.9000244140625, 102.80000305175781, 2815.300048828125)
                        frames = 200
                        skippable = 1
                    }]
                classic_mode_goal
            }
            AddGoal_Combo {
                unlimited_time
                letter_info = [
                    {obj_id = TRG_COMBO_C text = 'C'}
                    {obj_id = TRG_COMBO_O text = 'O'}
                    {obj_id = TRG_COMBO_M text = 'M'}
                    {obj_id = TRG_COMBO_B text = 'B'}
                    {obj_id = TRG_COMBO_O01 text = 'O'}
                ]
                view_goals_cameras = [{virtual_cam
                        TargetID = world
                        targetOffset = (-6171.5, -1466.800048828125, -3655.300048828125)
                        positionOffset = (2157.699951171875, 121.5999984741211, 1645.5999755859375)
                        frames = 200
                        skippable = 1
                    }]
                classic_mode_goal
            }
            AddGoal_Collect {
                unlimited_time
                collect_type = 'Tapas'
                goal_text = 'Collect 5 Tapas'
                view_goals_text = 'Collect 5 Tapas'
                use_hud_counter
                hud_counter_caption = 'Tapas collected'
                init_script = BA_Goal_Classic_Tapas_Init
                goal_deactivate_script = BA_Goal_Classic_Tapas_Deactivate
                goal_flags = [got_1
                    got_2
                    got_3
                    got_4
                    got_5
                ]
                view_goals_cameras = [{virtual_cam
                        TargetID = world
                        targetOffset = (11691.400390625, -1109.5999755859375, 17852.599609375)
                        positionOffset = (6784.7998046875, 157.39999389648438, 9231.7998046875)
                        frames = 200
                        skippable = 1
                    }]
                classic_mode_goal
            }
            AddGoal_SecretTape {
                goal_text = 'Get the secret tape'
                view_goals_text = 'Get the secret tape'
                goal_description = 'Get the secret tape'
                secret_tape_id = TRG_BA_Secret_Tape
                view_goals_cameras = [{virtual_cam
                        TargetID = world
                        targetOffset = (12634.099609375, 259.8999938964844, 12215.2001953125)
                        positionOffset = (4954.89990234375, 486.79998779296875, 5813.7998046875)
                        frames = 200
                        skippable = 1
                    }]
                classic_mode_goal
            }
            AddGoal_Gaps {
                unlimited_time
                goal_text = 'Manual the subway'
                view_goals_text = 'Manual the subway'
                goal_description = 'Hold a manual from one subway to another'
                goal_flags = [ got_1 ]
                view_goals_cameras = [{virtual_cam
                        TargetID = world
                        targetOffset = (11927.2998046875, -3758.0, -508.5)
                        positionOffset = (2746.5, 190.3000030517578, -856.2000122070312)
                        frames = 200
                        skippable = 1
                    }]
                classic_mode_goal
            }
            AddGoal_Gaps {
                unlimited_time
                version = 2
                goal_text = 'Grind the world\'s longest bench'
                view_goals_text = 'Grind the world\'s longest bench'
                goal_description = 'Grind the world\'s longest bench from start to finish'
                goal_flags = [ got_1 ]
                view_goals_cameras = [{virtual_cam
                        TargetID = world
                        targetOffset = (1852.699951171875, -2696.89990234375, 5466.39990234375)
                        positionOffset = (2007.9000244140625, 732.7999877929688, -3925.800048828125)
                        frames = 200
                        skippable = 1
                    }]
                classic_mode_goal
            }
        else
            if NOT ((GameModeEquals is_singlesession)|| (GameModeEquals is_creategoals))
                if NOT InNetGame
                    BA_AddGoal_BullFighter
                    BA_AddGoal_SteveO
                    BA_AddGoal_TomatoPeds
                    BA_AddGoal_GuellSpines
                    BA_AddGoal_BoatCaptain
                    BA_AddGoal_5Tag
                    BA_AddGoal_TakeOutTrash
                    BA_AddGoal_TimedScoreRun
                    BA_AddGoal_SantsBenches
                    BA_AddGoal_Catapult720
                    BA_AddGoal_BigTag
                    BA_AddGoal_Focus
                    BA_AddGoal_SantsCombo
                    BA_AddGoal_GuellTransfer
                    BA_AddGoal_HangTram
                    BA_AddGoal_TeamChallenge
                    BA_AddGoal_LaPadreraSpiral
                    BA_AddGoal_BullDung
                    BA_AddGoal_Phoenix
                    BA_AddGoal_BridgeNoGround
                    BA_AddGoal_BullVsBull
                    BA_AddGoal_GuellHighCombo
                    BA_AddGoal_BullTrick
                    BA_AddGoal_GreatestSpots
                endif
            endif
        endif
    endif
endscript


script BA_Initializer 
    if GameModeEquals is_classic
        Kill name = TRG_Ped_Hawk
    else
    endif
    if GameModeEquals is_career
        if GoalManager_HasWonGoal name = BA_Goal_Gaps4
            forced_create name = BA_AS_MasterPiece_final01
        endif
        if GoalManager_HasWonGoal name = BA_Goal_Gaps13
            Create name = TRG_BA_SteveO01
        else
            Create name = TRG_BA_SteveO
        endif
        if GoalManager_HasWonGoal name = BA_Goal_Gaps8
            Create name = TRG_Ped_BullFighter
        else
            Create name = TRG_BA_BullBefore_BullFighter01
        endif
        if NOT GoalManager_GoalIsLocked name = BA_Goal_Gaps14
            if NOT GoalManager_HasWonGoal name = BA_Goal_Gaps14
                SpawnScript BA_Goal_Focus_Counter
            endif
        endif
        if NOT GoalManager_HasWonGoal name = BA_Goal_Gaps8
            Create name = BA_BullBefore_ProximBox
        endif
        Create name = TRG_Ped_TeammatePro
        Create name = TRG_Ped_Hawk
        if GoalManager_HasWonGoal name = BA_Goal_Gaps5
            Create name = BA_Grafitti_Tag01_Cover
            Create name = BA_Grafitti_Tag02_Cover
            Create name = BA_Grafitti_Tag03_Cover
            Create name = BA_Grafitti_Tag04_Cover
            Create name = BA_Grafitti_Tag05_Cover
        else
            Create name = BA_Grafitti_Tag01
            Create name = BA_Grafitti_Tag02
            Create name = BA_Grafitti_Tag03
            Create name = BA_Grafitti_Tag04
            Create name = BA_Grafitti_Tag05
        endif
    endif
    if InMultiPlayerGame
        BA_Event_Bridge_Net Speed = 1000
        Create prefix = 'TRGP_SE_Tele_NetGames'
        Create name = SE_Maremagnum_Doors_Net
    endif
endscript


script BA_Goal_Classic_Tapas_Init 
    Create prefix = 'TRG_Tapas'
endscript


script BA_Goal_Classic_Tapas_Deactivate 
    Kill prefix = 'TRG_Tapas'
endscript


script BA_Unlock_Custom_Goals 
    Takeover_VO
endscript


script BA_Unlock_Pro_Goals 
    if GoalManager_GoalIsLocked name = BA_Goal_SkateTheLine1
        printf '#### unlocking pro goals ####'
        play_swappable_pro_intro_cameras intro_cameras = BA_Pro_Goal_Intro_Cameras
        if NOT GoalManager_HasWonGoal name = BA_Goal_SkateTheLine1
            forced_create name = TRG_BA_HurtSkater_SantsCombo
        endif
        SpawnScript BA_Goal_Focus_Counter
        GoalManager_UnlockGoal name = BA_Goal_SkateTheLine1
        GoalManager_UnlockGoal name = BA_Goal_Gaps15
        GoalManager_UnlockGoal name = BA_Goal_Gaps14
        GoalManager_UnlockGoal name = BA_Goal_TrickObjects1
        GoalManager_UnlockGoal name = BA_Goal_Gaps4
        GoalManager_UnlockGoal name = BA_Goal_Gaps10
        GoalManager_UnlockGoal name = BA_Goal_Gaps12
        GoalManager_UnlockGoal name = BA_goal_Gaps20
    else
        Takeover_VO
    endif
endscript


script BA_Unlock_BullFighter_Goals 
    if GoalManager_GoalIsLocked name = BA_Goal_Gaps6
        printf '#### unlocking bullfighter goals ####'
        Create name = TRG_Ped_BullFighter_Intro
        PlayIntroCameras goal_intro_cameras = BA_BullFighter_Goal_Intro_Cameras letterbox
        Kill name = TRG_Ped_BullFighter_Intro
        if NOT GoalManager_HasWonGoal name = BA_Goal_Gaps6
            forced_create name = TRG_BA_HurtSkater_Spiral
        endif
        GoalManager_UnlockGoal name = BA_Goal_Gaps6
        GoalManager_UnlockGoal name = BA_Goal_Gaps11
        GoalManager_UnlockGoal name = BA_Goal_Gaps1
        GoalManager_UnlockGoal name = BA_Goal_Gaps19
        AwardNewSpecialTrickToProfile {
            all_profiles
            Trick = Trick_BullF_Sword
            key_combo = SpGrind_D_L_Triangle
        }
    else
        Takeover_VO
    endif
endscript


script BA_Unlock_SteveO_Goals 
    if GoalManager_GoalIsLocked name = BA_Goal_Gaps16
        printf '#### unlocking steveo goals ####'
        Create name = TRG_Ped_SteveO_Intro
        PlayIntroCameras goal_intro_cameras = BA_SteveO_Goal_Intro_Cameras letterbox
        Kill name = TRG_Ped_SteveO_Intro
        GoalManager_UnlockGoal name = BA_Goal_Gaps16
        GoalManager_UnlockGoal name = BA_Goal_HighCombo
        GoalManager_UnlockGoal name = BA_Goal_Gaps17
        GoalManager_UnlockGoal name = BA_Goal_Gaps21
    else
        Takeover_VO
    endif
endscript


script BA_AddGoal_SteveO 
    AddGoal_Gaps {
        version = 13
        skater = custom
        reward_points = 25
        silent_activation
        view_goals_text = BA_Gap13_Goal_Text
        goal_description = BA_Gap13_Goal_Description
        view_goals_tip = BA_Gap13_Goal_Tip
        goal_success_script = BA_Goal_SteveO_Success
        success_node = TRG_BA_RE_SteveO
        goal_flags = [ got_1 ]
        view_goals_cameras = [{ 
            BA_Cam_Goal_SteveO
             }]
        success_cam_anims = [{
                virtual_cam
                TargetID = world
                targetOffset = (-6183.2001953125, -651.7999877929688, -4809.10009765625)
                positionOffset = (2578.699951171875, 517.4000244140625, -133.60000610351562)
                frames = 100
                skippable = 1
                pre_anim_script = BA_Goal_SteveO_PreAnim
                cam_anim_text = [ 'No way you found me! Check out my mechanical bull... It\'s time to get totally rad on this thing. Yeah!' ]
            }]
    }
endscript


script BA_Goal_SteveO_Success 
    if ScreenElementExists id = ped_speech_dialog
        DestroyScreenElement id = ped_speech_dialog
    endif
    Kill name = TRG_BA_SteveO
endscript


script BA_Goal_SteveO_PreAnim 
    forced_create name = TRG_BA_SteveO01
endscript


script BA_Goal_SteveO_Got 
    printf 'this goal isn\'t actuve?'
    GoalManager_SetGoalFlag name = BA_Goal_Gaps13 got_1 1
    wait 1 seconds
    PlayStream BA_Steveo_GoalFound_VO vol = 200 priority = 101
endscript


script BA_AddGoal_TimedScoreRun 
    AddGoal_TimedScoreRun {
        view_goals_text = BA_TimedScoreRun_View_Goal_Text
        goal_text = BA_TimedScoreRun_Goal_Text
        goal_description = BA_TimedScoreRun_Goal_Description
        view_goals_cameras = [{ 
            BA_Cam_Goal_Arcade
             }]
        time = 60
        skater = custom
        reward_points = 50
        trigger_obj_id = TRG_Arcade_Machine
        pro = 'Arcade machine'
        trigger_wait_script = NullScript
        trigger_start_script = arcade_machine_start_goal
        trigger_success_script = NullScript
        restart_node = TRG_BA_RE_Arcade
        always_initialize_goal
        dont_kill_trigger_on_success
    }
endscript


script BA_AddGoal_BoatCaptain 
    AddGoal_Gaps {
        version = 2
        skater = custom
        reward_points = 25
        silent_activation
        view_goals_text = BA_Gap2_Goal_Text
        goal_description = BA_Gap2_Goal_Description
        view_goals_tip = BA_Gap2_Goal_Tip
        view_goals_cameras = [{ 
            BA_Cam_Goal_BoatCaptain
             }]
        goal_flags = [ got_1 ]
    }
endscript


script BA_Goal_BoatCaptain_Got 
    GoalManager_SetGoalFlag name = BA_Goal_Gaps2 got_1 1
endscript


script BA_AddGoal_GuellSpines 
    AddGoal_Gaps {
        version = 3
        skater = custom
        reward_points = 25
        silent_activation
        collect_type = 'Guell spines'
        view_goals_text = BA_Gap3_Goal_Text
        goal_description = BA_Gap3_Goal_Description
        view_goals_tip = BA_Gap3_Goal_Tip
        view_goals_cameras = [{ 
            BA_Cam_Goal_GuellSpines
             }]
        goal_flags = [got_1
            got_2
            got_3]
    }
endscript


script BA_Goal_GuellSpines_Got1 
    BA_Goal_GuellSpines_Checker got_1
endscript


script BA_Goal_GuellSpines_Got2 
    BA_Goal_GuellSpines_Checker got_2
endscript


script BA_Goal_GuellSpines_Got3 
    BA_Goal_GuellSpines_Checker got_3
endscript


script BA_Goal_GuellSpines_Got1a 
    ClearExceptionGroup BA_Guell_Spines_Checker
    GoalManager_SetGoalFlag name = BA_Goal_Gaps3 got_1 1
endscript


script BA_Goal_GuellSpines_Got2a 
    ClearExceptionGroup BA_Guell_Spines_Checker
    GoalManager_SetGoalFlag name = BA_Goal_Gaps3 got_2 1
endscript


script BA_Goal_GuellSpines_Got3a 
    ClearExceptionGroup BA_Guell_Spines_Checker
    GoalManager_SetGoalFlag name = BA_Goal_Gaps3 got_3 1
endscript


script BA_Goal_GuellSpines_Checker 
    ClearExceptionGroup BA_Guell_Spines_Checker
    if GotParam got_1
        seteventhandler Ex = SkaterLanded scr = BA_Goal_GuellSpines_Got1a group = BA_Guell_Spines_Checker
    endif
    if GotParam got_2
        seteventhandler Ex = SkaterLanded scr = BA_Goal_GuellSpines_Got2a group = BA_Guell_Spines_Checker
    endif
    if GotParam got_3
        seteventhandler Ex = SkaterLanded scr = BA_Goal_GuellSpines_Got3a group = BA_Guell_Spines_Checker
    endif
    seteventhandler Ex = SkaterBailed scr = BA_Goal_GuellSpines_Bailed group = BA_Guell_Spines_Checker
    Block
endscript


script BA_Goal_GuellSpines_Bailed 
    ClearExceptionGroup BA_Guell_Spines_Checker
endscript


script BA_AddGoal_5Tag 
    AddGoal_Gaps {
        version = 5
        skater = custom
        reward_points = 25
        silent_activation
        collect_type = 'grafitti tags'
        view_goals_text = BA_Gap5_Goal_Text
        goal_description = BA_Gap5_Goal_Description
        goal_success_script = BA_AddGoal_5Tag_Success
        view_goals_tip = BA_Gap5_Goal_Tip
        view_goals_cameras = [
            { BA_Cam_Goal_Graffiti1 }
            { BA_Cam_Goal_Graffiti2 }
            { BA_Cam_Goal_Graffiti3 }
            { BA_Cam_Goal_Graffiti4 }
            { BA_Cam_Goal_Graffiti5 }
        ]
        goal_flags = [got_1
            got_2
            got_3
            got_4
            got_5]
    }
endscript


script BA_Goal_5Tag_Got 
    GetTriggerArray graffiti onto
    if triggertype <trigger_array>
        Kill name = <name>
        switch <TagNumber>
            case Got1
            GoalManager_SetGoalFlag name = BA_Goal_Gaps5 got_1 1
            forced_create name = BA_Grafitti_Tag01_Cover
            case Got2
            GoalManager_SetGoalFlag name = BA_Goal_Gaps5 got_2 1
            forced_create name = BA_Grafitti_Tag02_Cover
            case Got3
            GoalManager_SetGoalFlag name = BA_Goal_Gaps5 got_3 1
            forced_create name = BA_Grafitti_Tag03_Cover
            case Got4
            GoalManager_SetGoalFlag name = BA_Goal_Gaps5 got_4 1
            forced_create name = BA_Grafitti_Tag04_Cover
            case Got5
            GoalManager_SetGoalFlag name = BA_Goal_Gaps5 got_5 1
            forced_create name = BA_Grafitti_Tag05_Cover
            default 
            printf '#### no tagnumber set ####'
        endswitch
    endif
endscript


script BA_AddGoal_5Tag_Success 
    skater ::disableplayerinput AllowCameraControl
endscript


script BA_AddGoal_TakeOutTrash 
    AddGoal_Gaps {
        version = 7
        skater = custom
        reward_points = 25
        silent_activation
        collect_type = 'trashcans'
        view_goals_text = BA_Gap7_Goal_Text
        goal_description = BA_Gap7_Goal_Description
        view_goals_tip = BA_Gap7_Goal_Tip
        view_goals_cameras = [{ 
            BA_Cam_Goal_Trash
             }]
        goal_flags = [got_1
            got_2
            got_3
            got_4]
    }
endscript


script BA_Goal_TakeOutTrash_Got 
    printf '#### taking out the trash'
    if GameModeEquals is_career
        if NOT GoalManager_HasWonGoal name = BA_Goal_Gaps7
            TRG_BA_TakeOutTrash_Ghost ::BA_Goal_TakeOutTrash_SetCan <...> 
        endif
    endif
endscript


script BA_Goal_TakeOutTrash_SetCan 
    gettags
    printstruct <...> 
    if NOT GotParam objid1
        printf '#### Setting ObjID1 ####'
        settags objid1 = <ObjID>
        GoalManager_SetGoalFlag name = BA_Goal_Gaps7 got_1 1
    else
        if NOT ((GotParam objid2)|| (<objid1> = <ObjID>))
            printf '#### Setting ObjID2 ####'
            settags objid2 = <ObjID>
            GoalManager_SetGoalFlag name = BA_Goal_Gaps7 got_2 1
        else
            if GotParam objid2
                if NOT ((GotParam ObjID3)|| (<objid1> = <ObjID>)|| (<objid2> = <ObjID>))
                    printf '#### Setting ObjID3 ####'
                    settags ObjID3 = <ObjID>
                    GoalManager_SetGoalFlag name = BA_Goal_Gaps7 got_3 1
                else
                    if GotParam ObjID3
                        if NOT ((GotParam ObjID4)|| (<objid1> = <ObjID>)|| (<objid2> = <ObjID>)|| (<ObjID3> = <ObjID>))
                            printf '#### Setting ObjID4 ####'
                            settags ObjID4 = <ObjID>
                            GoalManager_SetGoalFlag name = BA_Goal_Gaps7 got_4 1
                        else
                        endif
                    endif
                endif
            endif
        endif
    endif
    gettags
    printstruct <...> 
endscript


script BA_AddGoal_BullFighter 
    AddGoal_Gaps {
        version = 8
        skater = custom
        reward_points = 25
        silent_activation
        view_goals_text = BA_Gap8_Goal_Text
        goal_description = BA_Gap8_Goal_Description
        view_goals_tip = BA_Gap8_Goal_Tip
        view_goals_cameras = [{ 
            BA_Cam_Goal_BullFighter
             }]
        goal_flags = [ got_1 ]
        goal_success_script = BA_BullFighter_Success
    }
endscript


script BA_Goal_BullFighter_Got 
    if NOT GoalManager_HasWonGoal name = BA_Goal_Gaps8
        GoalManager_SetGoalFlag name = BA_Goal_Gaps8 got_1 1
    endif
endscript


script BA_BullFighter_Success 
    if NOT IsAlive name = TRG_Ped_BullFighter
        Create name = TRG_Ped_BullFighter
    endif
endscript


script BA_Ped_BullFighter 
    Obj_ClearExceptions
    setup_ped_speech {ped_id = <current_node>
        accept_text = 'Press \m5 to switch to Bull Fighter.'
        activation_script = ba_switchtobullfighter
        activation_script_params = <...> 
    }
endscript


script ba_switchtobullfighter 
    if ScreenElementExists id = ped_speech_dialog
        DestroyScreenElement id = ped_speech_dialog
    endif
    skatervehicleoff
    swap_skaters_get_current_name
    load_pro_skater name = BullFighter
    UnPauseGame
    ResetSkaters node_name = <switch_node>
    Kill name = <current_node>
    switch <name>
        case pro_teammate
        Create name = <pro_node>
        case custom
        Create name = <you_node>
        case segwayrider
        Create name = <seg_node>
        default 
    endswitch
endscript


script BA_AddGoal_TomatoPeds 
    AddGoal_Gaps {
        version = 9
        skater = custom
        reward_points = 25
        silent_activation
        collect_type = 'tomatoed peds'
        view_goals_text = BA_Gap9_Goal_Text
        goal_description = BA_Gap9_Goal_Description
        view_goals_tip = BA_Gap9_Goal_Tip
        view_goals_cameras = [{ 
            BA_Cam_Goal_TomatoPeds
             }]
        goal_flags = [got_1
            got_2
            got_3
            got_4
            got_5]
    }
endscript


script BA_Goal_TomatoPeds_Counter 
    printf '#### ba tomato ped counter called ####'
    LastPedHit = (projectile_last_ped_id)
    if NOT GoalManager_HasWonGoal name = BA_Goal_Gaps9
        ClearExceptionGroup projectile
        SetException Ex = PedHitByProjectile scr = BA_Goal_TomatoPeds_Check group = projectile params = { <...>  }
        Block
    endif
endscript


script BA_Goal_TomatoPeds_Check 
    ClearExceptionGroup projectile
    printf '#### ba tomato ped ped hit checking ####'
    printf '#### projectile_last_ped_id = %a' a = projectile_last_ped_id
    printf '#### LastPedHit = %p ####' p = <LastPedHit>
    PedJustHit = (projectile_last_ped_id)
    if NOT <PedJustHit> ::obj_flagset FLAG_BA_HITBYTOMATO
        printf '#### ba tomato ped not dup setting flag ####'
        <PedJustHit> ::obj_setflag FLAG_BA_HITBYTOMATO
        if NOT GoalManager_GoalFlagSet name = BA_Goal_Gaps9 flag = got_1
            GoalManager_SetGoalFlag name = BA_Goal_Gaps9 got_1 1
            GotoPreserveParams BA_Goal_TomatoPeds_Counter
        else
            if NOT GoalManager_GoalFlagSet name = BA_Goal_Gaps9 flag = got_2
                GoalManager_SetGoalFlag name = BA_Goal_Gaps9 got_2 1
                GotoPreserveParams BA_Goal_TomatoPeds_Counter
            else
                if NOT GoalManager_GoalFlagSet name = BA_Goal_Gaps9 flag = got_3
                    GoalManager_SetGoalFlag name = BA_Goal_Gaps9 got_3 1
                    GotoPreserveParams BA_Goal_TomatoPeds_Counter
                else
                    if NOT GoalManager_GoalFlagSet name = BA_Goal_Gaps9 flag = got_4
                        GoalManager_SetGoalFlag name = BA_Goal_Gaps9 got_4 1
                        GotoPreserveParams BA_Goal_TomatoPeds_Counter
                    else
                        if NOT GoalManager_GoalFlagSet name = BA_Goal_Gaps9 flag = got_5
                            GoalManager_SetGoalFlag name = BA_Goal_Gaps9 got_5 1
                        else
                        endif
                    endif
                endif
            endif
        endif
    else
        printf '#### ba tomato ped dup ped returning ####'
        create_panel_message {text = 'Ped already tomatoed!' style = goal_collect_text}
        GotoPreserveParams BA_Goal_TomatoPeds_Counter
    endif
endscript


script BA_AddGoal_SantsCombo 
    AddGoal_SkateTheLine {
        version = 1
        skater = pro
        reward_points = 50
        unlocked_by_another
        can_retry_goal
        view_goals_text = BA_SkateTheLine1_Goal_Text
        goal_description = BA_SkateTheLine1_Goal_Description
        view_goals_tip = BA_SkateTheLine1_Goal_Tip
        goal_success_script = BA_Goal_SkateTheLine1_Success
        view_goals_cameras = [
            {
                targetOffset = (-6392.39990234375, -3685.300048828125, 7013.5)
                positionOffset = (1870.0, 181.6999969482422, 2917.39990234375)
                time = 2
            }
            {
                targetOffset = (-7655.89990234375, -1990.5999755859375, 6070.60009765625)
                positionOffset = (1386.5999755859375, 136.10000610351562, 2367.89990234375)
                time = 2
            }
            {
                targetOffset = (-8557.400390625, -2035.800048828125, -778.9000244140625)
                positionOffset = (798.5999755859375, 90.80000305175781, 2039.4000244140625)
                time = 2
            }
            {
                targetOffset = (-8745.7001953125, -2308.199951171875, -797.2000122070312)
                positionOffset = (551.4000244140625, 413.1000061035156, 1684.300048828125)
                time = 2
            }
            {
                targetOffset = (-7089.10009765625, -4152.5, 3812.800048828125)
                positionOffset = (1593.5, 568.0, 2286.89990234375)
                time = 2
            }
        ]
        goal_flags = [
            got_1
            got_2
            got_3
            got_4
            got_5]
        unlimited_time = 0
        goal_objects = [
            {
                flag = got_1
                time = 10
                trick_objects = [{name = BA_Sants_ChainRail01 light_group = outdoor}]
            }
            {
                text = 'Estacion Sants combo\nNext grind the second rail in front of the station'
                flag = got_2
                time = 10
                trick_objects = [{name = BA_Sants_ChainRail02 light_group = outdoor}]
            }
            {
                text = 'Estacion Sants combo\nNext grind the third rail in front of the station'
                flag = got_3
                time = 10
                trick_objects = [{name = BA_Sants_ChainRail03 light_group = outdoor}]
            }
            {
                text = 'Estacion Sants combo\nNext wallplant off the Jeep sign on the hospital'
                flag = got_4
                time = 10
                trick_objects = [{name = BA_Hospital_Sign01 light_group = outdoor}]
            }
            {
                text = 'Estacion Sants combo\nFinally grind the rail above the station'
                flag = got_5
                time = 10
                trick_objects = [{name = BA_Sants_TopRail01 light_group = outdoor}]
            }
        ]
        require_combo
    }
endscript


script BA_Goal_SkateTheLine1_Success 
    Kill name = TRG_BA_HurtSkater_SantsCombo
endscript


script BA_SantsCombo_Got1 
    if NOT GoalManager_HasWonGoal name = BA_Goal_SkateTheLine1
        GetTriggerArray grind onto
        if triggertype <trigger_array>
            GoalManager_SetGoalFlag name = BA_Goal_SkateTheLine1 got_1 1
        endif
    endif
endscript


script BA_SantsCombo_Got2 
    if NOT GoalManager_HasWonGoal name = BA_Goal_SkateTheLine1
        GetTriggerArray grind onto
        if triggertype <trigger_array>
            GoalManager_SetGoalFlag name = BA_Goal_SkateTheLine1 got_2 1
        endif
    endif
endscript


script BA_SantsCombo_Got3 
    if NOT GoalManager_HasWonGoal name = BA_Goal_SkateTheLine1
        GetTriggerArray grind onto
        if triggertype <trigger_array>
            GoalManager_SetGoalFlag name = BA_Goal_SkateTheLine1 got_3 1
        endif
    endif
endscript


script BA_SantsCombo_Got4 
    if NOT GoalManager_HasWonGoal name = BA_Goal_SkateTheLine1
        GetTriggerArray wallplant onto
        if triggertype <trigger_array>
            GoalManager_SetGoalFlag name = BA_Goal_SkateTheLine1 got_4 1
        endif
    endif
endscript


script BA_SantsCombo_Got5 
    if NOT GoalManager_HasWonGoal name = BA_Goal_SkateTheLine1
        GetTriggerArray grind onto
        if triggertype <trigger_array>
            GoalManager_SetGoalFlag name = BA_Goal_SkateTheLine1 got_5 1
        endif
    endif
endscript


script BA_AddGoal_Catapult720 
    AddGoal_Gaps {
        version = 15
        skater = pro
        reward_points = 25
        silent_activation
        view_goals_text = BA_Gap15_Goal_Text
        goal_description = BA_Gap15_Goal_Description
        view_goals_tip = BA_Gap15_Goal_Tip
        view_goals_cameras = [{ 
            BA_Cam_Goal_Catapult720
             }]
        goal_flags = [got_1
            got_2
            got_3]
        no_gap_messages
        unlocked_by_another
    }
endscript


script BA_Goal_Catapult720_Counter 
    if GoalManager_GoalExists name = BA_Goal_Gaps15
        if NOT GoalManager_HasWonGoal name = BA_Goal_Gaps15
            printf '#### catapult 720 spin counter ####'
            ClearExceptionGroup BA_Catapult720_Counter
            seteventhandler Ex = SkaterEnterGrab scr = BA_Goal_Catapult720_EnterGrab group = BA_Catapult720_Counter
            seteventhandler Ex = SkaterExitGrab scr = BA_Goal_Catapult720_ExitGrab group = BA_Catapult720_Counter
            seteventhandler Ex = SkaterLanded scr = BA_Goal_Catapult720_Landed group = BA_Catapult720_Counter
            seteventhandler Ex = SkaterBailed scr = BA_Goal_Catapult720_Bailed group = BA_Catapult720_Counter
            Block
        endif
    endif
endscript


script BA_Goal_Catapult720_EnterGrab 
    printf '#### catapult 720 spin enter grab ####'
    GoalManager_SetGoalFlag name = BA_Goal_Gaps15 got_2 1
    SpawnScript BA_Goal_Catapult720_SpinChecker
endscript


script BA_Goal_Catapult720_ExitGrab 
    KillSpawnedScript name = BA_Goal_Catapult720_SpinChecker
endscript


script BA_Goal_Catapult720_Landed 
    ClearExceptionGroup BA_Catapult720_Counter
    KillSpawnedScript name = BA_Goal_Catapult720_SpinChecker
    if GoalManager_GoalFlagSet name = BA_Goal_Gaps15 flag = got_1
        if GoalManager_GoalFlagSet name = BA_Goal_Gaps15 flag = got_2
            GoalManager_SetGoalFlag name = BA_Goal_Gaps15 got_3 1
        endif
    else
        GoalManager_ResetGoalFlags name = BA_Goal_Gaps15
    endif
endscript


script BA_Goal_Catapult720_Bailed 
    ClearExceptionGroup BA_Catapult720_Counter
    KillSpawnedScript name = BA_Goal_Catapult720_SpinChecker
    GoalManager_ResetGoalFlags name = BA_Goal_Gaps15
endscript


script BA_Goal_Catapult720_SpinChecker 
    begin 
    wait 10 frames
    skater ::GetSpin
    if (<spin> = 720)
        GoalManager_SetGoalFlag name = BA_Goal_Gaps15 got_1 1
    endif
    repeat 
endscript


script BA_AddGoal_Focus 
    AddGoal_Gaps {
        version = 14
        skater = pro
        reward_points = 50
        silent_activation
        collect_type = 'focus combo'
        view_goals_text = BA_Gap14_Goal_Text
        view_goals_tip = BA_Gap14_Goal_Tip
        view_goals_cameras = [{ 
            BA_Cam_Goal_Focus
             }]
        difficulty_level_params = [
            {
                goal_description = BA_Gap14_Goal_Description_Easy
            }
            {
                goal_description = BA_Gap14_Goal_Description_Normal
            }
            {
                goal_description = BA_Gap14_Goal_Description_Hard
            }
        ]
        goal_flags = [got_1
            got_2
            got_3]
        unlocked_by_another
    }
endscript


script BA_Goal_Focus_Counter 
    if NOT GoalManager_HasWonGoal name = BA_Goal_Gaps14
        printf '#### starting focus checks ####'
        ClearExceptionGroup BA_Focus_Counter
        seteventhandler Ex = SkaterEnterFocus scr = BA_Goal_Focus_Enter group = BA_Focus_Counter
        Block
    endif
endscript


script BA_Goal_Focus_Enter 
    ClearExceptionGroup BA_Focus_Counter
    printf '#### enter focus ####'
    seteventhandler Ex = SkaterEnterCombo scr = BA_Goal_Focus_EnterCombo group = BA_Focus_Counter
    seteventhandler Ex = SkaterExitFocus scr = BA_Goal_Focus_Bailed group = BA_Focus_Counter
    seteventhandler Ex = SkaterLanded scr = BA_Goal_Focus_Bailed group = BA_Focus_Counter
    seteventhandler Ex = SkaterBailed scr = BA_Goal_Focus_Bailed group = BA_Focus_Counter
    Block
endscript


script BA_Goal_Focus_EnterCombo 
    ClearExceptionGroup BA_Focus_Counter
    printf '#### enter combo ####'
    seteventhandler Ex = SkaterLanded scr = BA_Goal_Focus_Landed group = BA_Focus_Counter
    seteventhandler Ex = SkaterBailed scr = BA_Goal_Focus_Bailed group = BA_Focus_Counter
    Block
endscript


script BA_Goal_Focus_ExitCombo 
    ClearExceptionGroup BA_Focus_Counter
    printf '#### exit combo ####'
    seteventhandler Ex = SkaterLanded scr = BA_Goal_Focus_Landed group = BA_Focus_Counter
    seteventhandler Ex = SkaterBailed scr = BA_Goal_Focus_Bailed group = BA_Focus_Counter
    Block
endscript


script BA_Goal_Focus_Landed 
    printf '#### focus landed ####'
    ClearExceptionGroup BA_Focus_Counter
    GoalManager_GetDifficultyLevel
    switch <difficulty_level>
        case 0
        BA_Focus_ScoreRequired = BA_Focus_Easy
        case 1
        BA_Focus_ScoreRequired = BA_Focus_Normal
        case 2
        BA_Focus_ScoreRequired = BA_Focus_Hard
    endswitch
    if SkaterLastScoreLandedGreaterThan <BA_Focus_ScoreRequired>
        if NOT GoalManager_GoalFlagSet name = BA_Goal_Gaps14 flag = got_1
            printf '#### set next focus flag 1 ####'
            GoalManager_SetGoalFlag name = BA_Goal_Gaps14 got_1 1
        else
            if NOT GoalManager_GoalFlagSet name = BA_Goal_Gaps14 flag = got_2
                printf '#### set next focus flag 2 ####'
                GoalManager_SetGoalFlag name = BA_Goal_Gaps14 got_2 1
            else
                if NOT GoalManager_GoalFlagSet name = BA_Goal_Gaps14 flag = got_3
                    printf '#### set next focus flag 3 ####'
                    GoalManager_SetGoalFlag name = BA_Goal_Gaps14 got_3 1
                endif
            endif
        endif
    endif
    goto BA_Goal_Focus_Counter
endscript


script BA_Goal_Focus_Bailed 
    ClearExceptionGroup BA_Focus_Counter
    printf '#### focus bailed ####'
    goto BA_Goal_Focus_Counter
endscript


script BA_AddGoal_SantsBenches 
    AddGoal_TrickTheObjects {
        version = 1
        skater = pro
        reward_points = 25
        view_goals_text = BA_TrickTheObjects1_Goal_Text
        goal_description = BA_TrickTheObjects1_Goal_Description
        view_goals_tip = BA_TrickTheObjects1_Goal_Tip
        view_goals_cameras = [{ 
            BA_Cam_Goal_SantsBenches
             }]
        goal_objects = [
            {cluster_id = BA_Sants_Bench01 flag = got_1}
            {cluster_id = BA_Sants_Bench02 flag = got_2}
            {cluster_id = BA_Sants_Bench03 flag = got_3}
            {cluster_id = BA_Sants_Bench04 flag = got_4}
            {cluster_id = BA_Sants_Bench05 flag = got_5}
            {cluster_id = BA_Sants_Bench06 flag = got_6}
            {cluster_id = BA_Sants_Bench07 flag = got_7}
            {cluster_id = BA_Sants_Bench08 flag = got_8}
        ]
        goal_flags = [
            got_1
            got_2
            got_3
            got_4
            got_5
            got_6
            got_7
            got_8]
        trick_object_prefix = 'BA_Sants_Bench'
        trick_object_light_group = outdoor
        require_combo
        no_fail_messages
        unlocked_by_another
    }
endscript


script BA_AddGoal_GuellTransfer 
    AddGoal_Gaps {
        version = 12
        skater = pro
        reward_points = 50
        silent_activation
        view_goals_text = BA_Gap12_Goal_Text
        goal_description = BA_Gap12_Goal_Description
        view_goals_tip = BA_Gap12_Goal_Tip
        view_goals_cameras = [{ 
            BA_Cam_Goal_GuellTransfer
             }]
        goal_flags = [ got_1 ]
        unlocked_by_another
    }
endscript


script BA_Goal_GuellTransfer_Got1 
    seteventhandler Ex = SkaterEnterGround scr = BA_Goal_GuellTransfer_Landed group = BA_GuellTransfer_Got1
    seteventhandler Ex = SkaterBailed scr = BA_Goal_GuellTransfer_Bailed group = BA_GuellTransfer_Got1
endscript


script BA_Goal_GuellTransfer_Landed 
    ClearExceptionGroup BA_BA_GuellTransfer_Got1
    GoalManager_SetGoalFlag name = BA_Goal_Gaps12 got_1 1
endscript


script BA_Goal_GuellTransfer_Bailed 
    ClearExceptionGroup BA_BA_GuellTransfer_Got1
endscript


script BA_AddGoal_BigTag 
    AddGoal_Gaps {
        version = 4
        skater = pro
        reward_points = 25
        silent_activation
        view_goals_text = BA_Gap4_Goal_Text
        goal_description = BA_Gap4_Goal_Description
        view_goals_tip = BA_Gap4_Goal_Tip
        goal_success_script = BA_Goal_BigTag_Success
        view_goals_cameras = [{ 
            BA_Cam_Goal_BigTag
             }]
        goal_flags = [ got_1 ]
        unlocked_by_another
    }
endscript


script BA_Goal_BigTag_Got1 
    GetTriggerArray graffiti onto
    if triggertype <trigger_array>
        GoalManager_SetGoalFlag name = BA_Goal_Gaps4 got_1 1
    endif
endscript


script BA_Goal_BigTag_Success 
    play_cutscene name = 'cutscenes\BA_SmallEvent_Billboard.cut' RestartNode = TRG_Restart_Billboard
endscript


script BA_AddGoal_HangTram 
    AddGoal_Gaps {
        version = 10
        skater = pro
        reward_points = 50
        silent_activation
        view_goals_text = BA_Gap10_Goal_Text
        goal_description = BA_Gap10_Goal_Description
        view_goals_tip = BA_Gap10_Goal_Tip
        view_goals_cameras = [{ 
            BA_Cam_Goal_AcidTram
             }]
        goal_flags = [ got_1 ]
        unlocked_by_another
    }
endscript


script BA_Goal_HangTram_Checker 
    if NOT GoalManager_HasWonGoal name = BA_Goal_Gaps10
        printf '### entering tram checking ####'
        ClearExceptionGroup BA_HangTram_Checker
        seteventhandler Ex = SkaterEnterAir scr = BA_Goal_HangTram_JumpOffTram group = BA_HangTram_Checker
        seteventhandler Ex = SkaterEnterHang scr = BA_Goal_HangTram_JumpOffTram group = BA_HangTram_Checker
        seteventhandler Ex = SkaterExitGround scr = BA_Goal_HangTram_JumpOffTram group = BA_HangTram_Checker
    endif
endscript


script BA_Goal_HangTram_JumpOffTram 
    printf '### tram jump off ####'
    ClearExceptionGroup BA_HangTram_Checker
    seteventhandler Ex = SkaterEnterAcidDrop scr = BA_Goal_HangTram_TramAcidDrop group = BA_HangTram_Checker
    seteventhandler Ex = SkaterEnterGround scr = BA_Goal_HangTram_Bailed group = BA_HangTram_Checker
    seteventhandler Ex = SkaterBailed scr = BA_Goal_HangTram_Bailed group = BA_HangTram_Checker
    Block
endscript


script BA_Goal_HangTram_TramAcidDrop 
    printf '### tram acid ####'
    ClearExceptionGroup BA_HangTram_Checker
    seteventhandler Ex = SkaterLanded scr = BA_Goal_HangTram_Landed group = BA_HangTram_Checker
    seteventhandler Ex = SkaterBailed scr = BA_Goal_HangTram_Bailed group = BA_HangTram_Checker
endscript


script BA_Goal_HangTram_Landed 
    ClearExceptionGroup BA_HangTram_Checker
    printf '#### acid tram success'
    GoalManager_SetGoalFlag name = BA_Goal_Gaps10 got_1 1
endscript


script BA_Goal_HangTram_Bailed 
    printf '#### acid tram bailed'
    ClearExceptionGroup BA_HangTram_Checker
endscript


script BA_AddGoal_LaPadreraSpiral 
    AddGoal_Gaps {
        version = 6
        skater = BullFighter
        reward_points = 25
        silent_activation
        view_goals_text = BA_Gap6_Goal_Text
        goal_description = BA_Gap6_Goal_Description
        view_goals_tip = BA_Gap6_Goal_Tip
        goal_success_script = BA_Goal_LaPadreraSpiral_Success
        view_goals_cameras = [{ 
            BA_Cam_Goal_LaPadSpiral
             }]
        goal_flags = [ got_1 ]
        unlocked_by_another
    }
endscript


script BA_Goal_LaPadreraSpiral_Success 
    Kill name = TRG_BA_HurtSkater_Spiral
endscript


script BA_Goal_LaPadreraSpiral_Got 
    GoalManager_SetGoalFlag name = BA_Goal_Gaps6 got_1 1
endscript


script BA_AddGoal_BullDung 
    AddGoal_Gaps {
        version = 11
        skater = BullFighter
        reward_points = 50
        silent_activation
        view_goals_text = BA_Gap11_Goal_Text
        goal_description = BA_Gap11_Goal_Description
        view_goals_tip = BA_Gap11_Goal_Tip
        view_goals_cameras = [{ 
            BA_Cam_Goal_BullDung
             }]
        goal_flags = [ got_1 ]
        unlocked_by_another
    }
endscript


script BA_Goal_BullDung_Got 
    GoalManager_SetGoalFlag name = BA_Goal_Gaps8 got_1 1
endscript


script BA_Goal_BullDung_Boost 
    trigger_jump_boost multi = 3
endscript


script BA_Goal_BullDung_checker 
    if QueryFlag name = <dung> FLAG_BA_BULLDUNG_NOTJUSTCREATED
        printf '#### calling bull dung checker for %d ####' d = <dung>
        if NOT GoalManager_GoalIsLocked name = BA_Goal_Gaps11
            if NOT GoalManager_HasWonGoal name = BA_Goal_Gaps11
                if NOT GetFlag flag = FLAG_BA_BULLDUNG
                    printf '#### setting bull dung events ####'
                    SetFlag flag = FLAG_BA_BULLDUNG
                    ClearExceptionGroup BA_BullDung_Checker
                    seteventhandler Ex = SkaterEnterAir scr = BA_Goal_BullDung_JumpOffKicker group = BA_BullDung_Checker
                    seteventhandler Ex = SkaterLanded scr = BA_Goal_BullDung_Bailed group = BA_BullDung_Checker
                    seteventhandler Ex = SkaterBailed scr = BA_Goal_BullDung_Bailed group = BA_BullDung_Checker
                    Block
                endif
            endif
        endif
    else
        printf '#### setting flag for  name = %o ####' o = <dung>
        <dung> ::obj_setflag FLAG_BA_BULLDUNG_NOTJUSTCREATED
    endif
endscript


script BA_Goal_BullDung_JumpOffKicker 
    printf '### kicker jump off ####'
    ClearExceptionGroup BA_BullDung_Checker
    seteventhandler Ex = SkaterEnterGrab scr = BA_Goal_BullDung_Special group = BA_BullDung_Checker
    seteventhandler Ex = SkaterLanded scr = BA_Goal_BullDung_Bailed group = BA_BullDung_Checker
    seteventhandler Ex = SkaterBailed scr = BA_Goal_BullDung_Bailed group = BA_BullDung_Checker
    Block
endscript


script BA_Goal_BullDung_Special 
    printf '### bull dung special ####'
    ClearExceptionGroup BA_BullDung_Checker
    seteventhandler Ex = SkaterLanded scr = BA_Goal_BullDung_Landed group = BA_BullDung_Checker
    seteventhandler Ex = SkaterBailed scr = BA_Goal_BullDung_Bailed group = BA_BullDung_Checker
endscript


script BA_Goal_BullDung_Landed 
    printf '#### bull dung success'
    ClearExceptionGroup BA_BullDung_Checker
    GoalManager_SetGoalFlag name = BA_Goal_Gaps11 got_1 1
endscript


script BA_Goal_BullDung_Bailed 
    printf '#### Bull dung bailed'
    ClearExceptionGroup BA_BullDung_Checker
    UnSetFlag flag = FLAG_BA_BULLDUNG
endscript


script BA_AddGoal_Phoenix 
    AddGoal_Gaps {
        version = 1
        skater = BullFighter
        reward_points = 50
        silent_activation
        view_goals_text = BA_Gap1_Goal_Text
        goal_description = BA_Gap1_Goal_Description
        view_goals_tip = BA_Gap1_Goal_Tip
        view_goals_cameras = [{ 
            BA_Cam_Goal_Phoenix
             }]
        goal_flags = [ got_1 ]
        unlocked_by_another
    }
endscript


script BA_Goal_Phoenix_Got 
    GoalManager_SetGoalFlag name = BA_Goal_Gaps1 got_1 1
endscript


script BA_AddGoal_BullVsBull 
    AddGoal_Gaps {
        version = 16
        skater = MechBullrider
        reward_points = 25
        silent_activation
        view_goals_text = BA_Gap16_Goal_Text
        goal_description = BA_Gap16_Goal_Description
        view_goals_tip = BA_Gap16_Goal_Tip
        view_goals_cameras = [{ 
            BA_Cam_Goal_BullVsBull
             }]
        goal_flags = [ got_1 ]
        no_gap_messages
        unlocked_by_another
    }
endscript


script BA_Goal_BullVsBull_Got 
    if NOT GoalManager_HasWonGoal name = BA_Goal_Gaps16
        TRG_BA_BullAfter_Bull ::obj_stopalongpath 0.1000 feet
        TRG_BA_BullAfter_Bull ::Obj_PlayAnim anim = idle Cycle
        PauseSkaters
        BA_Event_Bull_ShakeCam
        wait 0.5000 seconds
        UnpauseSkaters
        GoalManager_SetGoalFlag name = BA_Goal_Gaps16 got_1 1
        TRG_BA_BullAfter_Bull ::Obj_PlayAnim anim = bull_run Cycle
        TRG_BA_BullAfter_Bull ::obj_startalongpath
    endif
endscript


script BA_AddGoal_GuellHighCombo 
    AddGoal_HighCombo {
        skater = MechBullrider
        reward_points = 50
        silent_activation
        no_fail_messages
        view_goals_text = BA_HighCombo_Goal_Text
        view_goals_cameras = [{ 
            BA_Cam_Goal_GuellHighCombo
             }]
        difficulty_level_params = [
            {
                Score = BA_GuellHighCombo_Easy
                goal_description = BA_HighCombo_Easy_Goal_Description
            }
            {
                Score = BA_GuellHighCombo_Normal
                goal_description = BA_HighCombo_Normal_Goal_Description
            }
            {
                Score = BA_GuellHighCombo_Hard
                goal_description = BA_HighCombo_Hard_Goal_Description
            }
        ]
        unlocked_by_another
    }
endscript


script BA_Goal_GuellHighCombo 
    if inside
        goal_highcombo_enter_area goal_id = BA_Goal_HighCombo
        printf '#### Guell HIghCombo inside'
    else
        goal_highcombo_leave_area goal_id = BA_Goal_HighCombo
        printf '#### Guell HIghCombo outside'
    endif
endscript


script BA_AddGoal_GreatestSpots 
    AddGoal_Gaps {
        version = 17
        skater = MechBullrider
        reward_points = 100
        collect_type = 'Greatest Spots'
        silent_activation
        view_goals_text = BA_Gap17_Goal_Text
        goal_description = BA_Gap17_Goal_Description
        view_goals_cameras = [
            {
                targetOffset = (-7534.60009765625, -1062.5999755859375, 1730.300048828125)
                positionOffset = (2357.89990234375, 120.69999694824219, 2588.60009765625)
                time = 2
            }
            {
                targetOffset = (5811.2998046875, -2901.0, -7808.5)
                positionOffset = (3978.0, 114.19999694824219, 1548.0999755859375)
                time = 2
            }
            {
                targetOffset = (14233.7998046875, -1167.199951171875, 1206.199951171875)
                positionOffset = (9125.400390625, 93.19999694824219, 9709.900390625)
                time = 2
            }
        ]
        goal_flags = [got_1
            got_2
            got_3]
        unlocked_by_another
    }
endscript


script BA_Goal_GreatestSpots_Got1 
    GoalManager_SetGoalFlag name = BA_Goal_Gaps17 got_1 1
endscript


script BA_Goal_GreatestSpots_Got2 
    GoalManager_SetGoalFlag name = BA_Goal_Gaps17 got_2 1
endscript


script BA_Goal_GreatestSpots_Got3 
    GoalManager_SetGoalFlag name = BA_Goal_Gaps17 got_3 1
endscript


script BA_AddGoal_BullTrick 
    AddGoal_Gaps {
        version = 21
        skater = MechBullrider
        reward_points = 50
        silent_activation
        view_goals_text = BA_Gap21_Goal_Text
        goal_description = BA_Gap21_Goal_Description
        view_goals_tip = BA_Gap21_Goal_Tip
        view_goals_cameras = [{ BA_Cam_Goal_BullTrick }]
        goal_flags = [ got_1 ]
        unlocked_by_another
    }
endscript


script BA_Goal_BullTrick_Checker 
    if GameModeEquals is_career
        ClearExceptionGroup BA_BullTrick_Checker
        seteventhandler Ex = SkaterEnterGround scr = BA_Goal_BullTrick_Bailed group = BA_BullTrick_Checker
        seteventhandler Ex = SkaterBailed scr = BA_Goal_BullTrick_Bailed group = BA_BullTrick_Checker
        SpawnScript BA_Goal_BullTrick_YeeHaw
        Block
    endif
endscript


script BA_Goal_BullTrick_YeeHaw 
    begin 
    GetNumberOfTrickOccurrences TrickText = 'Yee Haw!'
    if (<number_of_occurrences> > 0)
        printf '#### BullTrick Yee Haw! ####'
        SetException Ex = SkaterExitAcidDrop scr = BA_Goal_BullTrick_Acid group = BA_BullTrick_Checker
        break 
    endif
    wait 1 frame
    repeat 
    Block
endscript


script BA_Goal_BullTrick_Acid 
    printf '#### BullTrick acid exit ####'
    ClearExceptionGroup BA_BullTrick_Checker
    seteventhandler Ex = SkaterLanded scr = BA_Goal_BullTrick_Landed_Win group = BA_BullTrick_Checker
    seteventhandler Ex = SkaterBailed scr = BA_Goal_BullTrick_Bailed group = BA_BullTrick_Checker
    Block
endscript


script BA_Goal_BullTrick_Landed_Win 
    printf '#### BullTrick landed win ####'
    ClearExceptionGroup BA_BullTrick_Checker
    KillSpawnedScript name = BA_Goal_BullTrick_YeeHaw
    GoalManager_SetGoalFlag name = BA_Goal_Gaps21 got_1 1
endscript


script BA_Goal_BullTrick_Bailed 
    printf '#### BullTrick bailed ####'
    ClearExceptionGroup BA_BullTrick_Checker
    KillSpawnedScript name = BA_Goal_BullTrick_YeeHaw
endscript


script BA_AddGoal_BridgeNoGround 
    AddGoal_Gaps {
        version = 19
        skater = BullFighter
        reward_points = 50
        silent_activation
        view_goals_text = BA_Gap19_Goal_Text
        goal_description = BA_Gap19_Goal_Description
        view_goals_tip = BA_Gap19_Goal_Tip
        view_goals_cameras = [{ 
            BA_Cam_Goal_NoGround
             }]
        goal_flags = [ got_1 ]
        no_gap_messages
        unlocked_by_another
    }
endscript


script BA_Goal_BridgeNoGround_Got 
    GoalManager_SetGoalFlag name = BA_Goal_Gaps19 got_1 1
endscript


script BA_AddGoal_TeamChallenge 
    AddGoal_Gaps {
        version = 20
        skater = pro
        reward_points = 100
        silent_activation
        view_goals_text = BA_Gap20_Goal_Text
        goal_description = BA_Gap20_Goal_Description
        view_goals_tip = BA_Gap20_Goal_Tip
        view_goals_cameras = [
            {
                targetOffset = (-4143.7998046875, -133.1999969482422, -4639.7001953125)
                positionOffset = (3628.39990234375, 573.5, 1622.300048828125)
            }]
        goal_flags = [
            {skater = pro goal_flags = [ got_1 ]}
            {skater = custom goal_flags = [ got_1 ]}
            {skater = MechBullrider goal_flags = [ got_1 ]}
            {skater = BullFighter goal_flags = [ got_1 ]}
        ]
        no_gap_messages
        unlocked_by_another
    }
endscript


script BA_AddGoal_TeamChallenge_Got 
    seteventhandler Ex = SkaterLanded scr = BA_AddGoal_TeamChallenge_Got_Landed group = BA_AddGoal_TeamChallenge
    seteventhandler Ex = SkaterBailed scr = BA_AddGoal_TeamChallenge_Got_Bailed group = BA_AddGoal_TeamChallenge
endscript


script BA_AddGoal_TeamChallenge_Got_Landed 
    ClearExceptionGroup BA_AddGoal_TeamChallenge
    if GameModeEquals is_career
        printf '#### bull air but no combo yet ###'
        if (SkaterLastScoreLandedGreaterThan 4999)
            swap_skaters_get_current_name
            switch <name>
                case custom
                if NOT GoalManager_GoalFlagSet name = BA_goal_Gaps20 flag = got_1 skater = custom
                    printf '#### setting team challenge for custom ####'
                    GoalManager_SetGoalFlag name = BA_goal_Gaps20 got_1 1 skater = custom
                endif
                case pro_teammate
                if NOT GoalManager_GoalFlagSet name = BA_goal_Gaps20 flag = got_1 skater = pro
                    printf '#### setting team challenge for pro ####'
                    GoalManager_SetGoalFlag name = BA_goal_Gaps20 got_1 1 skater = pro
                endif
                case MechBullrider
                if NOT GoalManager_GoalFlagSet name = BA_goal_Gaps20 flag = got_1 skater = MechBullrider
                    printf '#### setting team challenge for steveo ####'
                    GoalManager_SetGoalFlag name = BA_goal_Gaps20 got_1 1 skater = MechBullrider
                endif
                case BullFighter
                if NOT GoalManager_GoalFlagSet name = BA_goal_Gaps20 flag = got_1 skater = BullFighter
                    printf '#### setting team challenge for bullfighter ####'
                    GoalManager_SetGoalFlag name = BA_goal_Gaps20 got_1 1 skater = BullFighter
                endif
            endswitch
            <combos> = 0
            if GoalManager_GoalFlagSet name = BA_goal_Gaps20 flag = got_1 skater = pro
                <combos> = (<combos> + 1)
            endif
            if GoalManager_GoalFlagSet name = BA_goal_Gaps20 flag = got_1 skater = custom
                <combos> = (<combos> + 1)
            endif
            if GoalManager_GoalFlagSet name = BA_goal_Gaps20 flag = got_1 skater = MechBullrider
                <combos> = (<combos> + 1)
            endif
            if GoalManager_GoalFlagSet name = BA_goal_Gaps20 flag = got_1 skater = BullFighter
                <combos> = (<combos> + 1)
            endif
            switch <combos>
                case 0
                printf '0'
                case 1
                create_panel_message {text = '1 of 4 5,000 point \'Bull Air\' combos' style = goal_collect_text}
                case 2
                create_panel_message {text = '2 of 4 5,000 point \'Bull Air\' combos' style = goal_collect_text}
                case 3
                create_panel_message {text = '3 of 4 5,000 point \'Bull Air\' combos' style = goal_collect_text}
                default 
            endswitch
        endif
    endif
endscript


script BA_AddGoal_TeamChallenge_Got_Bailed 
    printf '#### no bull for you ####'
    ClearExceptionGroup BA_AddGoal_TeamChallenge
endscript


script BA_CreateCars 
    Create prefix = 'TRG_BA_Car'
    Create prefix = 'TRG_BA_Scooter'
endscript


script BA_CreatePeds 
    Create prefix = 'TRG_BA_Ped'
endscript


script BA_KillCars 
    Kill prefix = 'TRG_BA_Scooter'
    Kill prefix = 'TRG_BA_Car'
endscript


script BA_KillPeds 
    Kill prefix = 'TRG_BA_Ped'
endscript


script BA_Bridge 
    obj_roty Angle = 80 Speed = 0
    wait 1 frame
    begin 
    printf '#### opening bridge'
    obj_roty Angle = -80 Speed = 30
    wait 10 seconds
    printf '#### closing bridge'
    obj_roty Angle = 80 Speed = 30
    wait 30 seconds
    repeat 
endscript


script BA_Bull_KillParticles 
    if ObjectExists id = BA_Bull_Dust_Part
        printf '#### bull dust still there ####'
        BA_Bull_Dust_Part ::destroyparticles
        wait 10 frames
    endif
endscript


script BA_Bull_Startup 
    obj_applyscaling x = 2 y = 1.250 z = 1.250
    obj_sticktoground on distabove = 5 distbelow = 5
    obj_setpathturndist 25
    obj_setpathacceleration 80 mphps
    obj_setpathdeceleration 10 mphps
    obj_setpathminstopvel 5
    obj_setpathvelocity 30 mph
endscript


script BA_Bull_Idle 
    BA_Bull_Startup
    Obj_PlayAnim anim = idle Cycle
    obj_getid
    BA_Bull_Dust name = BA_Bull_Dust_Part ObjID = <ObjID>
endscript


script BA_Bull_Idle_MakeNoise 
    begin 
    printf '### bull shake screen ####'
    BA_SFX_Bull_In_Cage
    wait randomrange (2.0, 4.0) seconds
    pulse_blur start = 150 Speed = 10
    ShakeCamera {
        duration = 0.5000
        vert_amp = 4.0
        horiz_amp = 1.0
        vert_vel = 5
        horiz_vel = 2.500}
    repeat 
endscript


script BA_Bull_Proxim 
    if inside
        if NOT InMultiPlayerGame
            SpawnScript BA_Bull_Idle_MakeNoise
        endif
    else
        KillSpawnedScript name = BA_Bull_Idle_MakeNoise
    endif
endscript


script BA_Bull 
    BA_Bull_Startup
    Obj_PlayAnim anim = bull_run Cycle
    obj_followpathlinked
    obj_getid
    SpawnSound BA_SFX_Bull_Vocals
    BA_Bull_KillParticles
    BA_Bull_Dust name = BA_Bull_Dust_Part ObjID = <ObjID>
    if GotParam dung
        obj_spawnscript BA_Bull_Dung
        Obj_ClearExceptions
        obj_setinnerradius 5
        Obj_SetException Ex = objectinradius scr = BA_Bull_Air
    endif
endscript


script BA_Bull_Skitch 
    begin 
    obj_locktoobject objectname = TRG_BA_BullAfter_Bull (0.0, 0.0, -55.0)
    wait 1 frame
    repeat 
endscript


script BA_Bull_Dung dung = BA_BullAfter_Dung01 Dung_Part = BA_Bull_Dung_Part01 Bull = TRG_BA_BullAfter_Bull
    begin 
    wait randomrange (3.0, 6.0) seconds
    printf '#### Bull dung ####'
    switch <dung>
        case BA_BullAfter_Dung01
        BA_Bull_Dung_Create <...> 
        dung = BA_BullAfter_Dung02
        Dung_Part = BA_Bull_Dung_Part02
        case BA_BullAfter_Dung02
        BA_Bull_Dung_Create <...> 
        dung = BA_BullAfter_Dung03
        Dung_Part = BA_Bull_Dung_Part03
        case BA_BullAfter_Dung03
        BA_Bull_Dung_Create <...> 
        dung = BA_BullAfter_Dung04
        Dung_Part = BA_Bull_Dung_Part04
        case BA_BullAfter_Dung04
        BA_Bull_Dung_Create <...> 
        dung = BA_BullAfter_Dung05
        Dung_Part = BA_Bull_Dung_Part05
        case BA_BullAfter_Dung05
        BA_Bull_Dung_Create <...> 
        dung = BA_BullAfter_Dung06
        Dung_Part = BA_Bull_Dung_Part06
        case BA_BullAfter_Dung06
        BA_Bull_Dung_Create <...> 
        dung = BA_BullAfter_Dung07
        Dung_Part = BA_Bull_Dung_Part07
        case BA_BullAfter_Dung07
        BA_Bull_Dung_Create <...> 
        dung = BA_BullAfter_Dung01
        Dung_Part = BA_Bull_Dung_Part01
        default 
    endswitch
    if NOT IsStreamPlaying BullStream
        RandomNoRepeat (
            @ obj_playstream SK6_BA_BullScream01 vol = 150 dropoff = 150 id = BullStream
            @ obj_playstream SK6_BA_BullScream02 vol = 150 dropoff = 150 id = BullStream
            @ obj_playstream SK6_BA_BullScream03 vol = 150 dropoff = 150 id = BullStream
            @ obj_playstream SK6_BA_BullScream04 vol = 150 dropoff = 150 id = BullStream
            @ obj_playstream SK6_BA_BullScream05 vol = 150 dropoff = 150 id = BullStream
            @ obj_playstream SK6_BA_BullScream06 vol = 150 dropoff = 150 id = BullStream
        )
    endif
    obj_playsound FallPungee_11
    repeat 
endscript


script BA_Bull_Dung_Frig 
    if walking
        CleanUp_WalkingtoSkating
    endif
    if NOT IsSkaterOnVehicle
        MakeSkaterGoto GroundGone
    endif
    jump
endscript


script BA_Bull_Dung_CheckForSkater 
    if obj_objectinradius Radius = 2.500 type = skater
        skater ::BA_Bull_Dung_Frig
    endif
endscript


script BA_Bull_Dung_Create 
    <dung> ::BA_Bull_Dung_CheckForSkater <...> 
    forced_create name = <dung>
    <dung> ::obj_locktoobject objectname = <Bull>
    wait 1 frame
    <dung> ::obj_locktoobject objectname = <Bull> Off
    <dung> ::obj_sticktoground on distabove = 1 distbelow = 5
    wait 1 frame
    <dung> ::obj_sticktoground Off
    <dung> ::obj_getposition
    <dung> ::BA_Bull_Dung_CheckForSkater <...> 
    forced_create name = <dung>
    <dung> ::obj_movetopos <Pos>
    if ObjectExists id = <Dung_Part>
        <Dung_Part> ::destroyparticles
        wait 10 frames
    endif
    BA_Dung_Fumes name = <Dung_Part> ObjID = <dung>
endscript


script BA_Dung_Fumes 
    CreateCompositeObject {
        Components = [
            { Component = Suspend }
            { Component = lockobj }
            { Component = flexibleparticle }
            { Component = stream }
        ]
        params = {
            name = <name>
            LocalSpace
            params = {ObjID = <ObjID> name = <name>}
            max = 12
            type = flat
            emitscript = BA_Dung_Fumes_emit
            texture = apm_spray_01
            BlendMode = Blend
            emitterindependent = 1
        }
    }
    <name> ::obj_locktoobject id = <ObjID> (0.0, 0.0, 0.0)
    <name> ::obj_spawnscript BA_SFX_BullCrapFliesFromPile
endscript


script BA_Dung_Fumes_emit 
    setemitrange width = 15.0 height = 15.0
    setlife min = 0.8000 max = 0.8000
    setanglespread spread = 0.05000
    setspeedrange min = 0.2000 max = 0.5000
    setemittarget x = 0.0 y = 1.0 z = 0.0
    setforce x = 0.0 y = 0.02000 z = 0.0
    setparticlesize sw = 20.0 ew = 60.0
    setcolor sr = 141 sg = 146 sb = 50 sa = 64 mr = 131 mg = 100 mb = 100 ma = 32 er = 40 eg = 40 eb = 40 ea = 0 midTime = 0.6139
    emitrate rate = 15.0
endscript


script BA_Bull_Dust 
    CreateCompositeObject {
        Components = [
            { Component = Suspend }
            { Component = lockobj }
            { Component = flexibleparticle }
        ]
        params = {
            name = <name>
            LocalSpace
            params = {ObjID = <ObjID> name = <name>}
            max = 50
            emitscript = BA_Bull_Dust_emit
            texture = apm_spray_01
            BlendMode = Blend
            emitterindependent = 1
        }
    }
    <name> ::obj_locktoobject id = <ObjID> (0.0, 30.0, 0.0)
endscript


script BA_Bull_Dust_emit 
    setemitrange width = 50 height = 50
    setlife min = 0.5000 max = 5
    setanglespread spread = 1.250
    setspeedrange min = 0.5000 max = 1.0
    setemittarget x = 0.0 y = 1.0 z = 0.0
    setforce x = 0.0 y = 0.0 z = 0.0
    setparticlesize sw = 50 sh = 50 ew = 200 eh = 200
    setcolor sr = 75 sg = 70 sb = 56 sa = 128 er = 99 eg = 92 eb = 74 ea = 0
    emitrate rate = 30.0
endscript


script BA_Ped_Bull 
    begin 
    if obj_objectinrect dist = 10 width = 10 height = 7 type = [ ped , skater ] Offset = (0.0, 3.0, -5.0)
        printf '#### BULL FUCKED!!! ####'
        Obj_PlayAnim anim = FlailBail
        obj_movetorelpos (0.0, 70.0, 0.0) acceleration = 40 Speed = 14
        Obj_WaitMove
        obj_movetorelpos (0.0, -70.0, 0.0) acceleration = 40 Speed = 14
        Obj_WaitMove
        Obj_WaitAnimFinished
        Obj_CycleAnim anim = FlailGetUp
        Obj_PlayAnim anim = StandIdleA Cycle
    endif
    wait 10 frames
    repeat 
endscript


script BA_TrashCan_Spinny 
    <Can> ::obj_getid
    if NOT <Can> ::obj_flagset FLAG_BA_TRASHCAN_SPINNING
        <Can> ::obj_setflag FLAG_BA_TRASHCAN_SPINNING
        GetGap GapID = SpinnyTrashCan text = 'Taking out the trash' Score = 50
        BA_Goal_TakeOutTrash_Got <...> 
    endif
    if NOT InMultiPlayerGame
        if IsAlive name = <Trash1>
            Kill name = <Trash1>
        endif
        if IsAlive name = <Trash2>
            Kill name = <Trash2>
        endif
        Create name = <Trash1>
        <Trash1> ::rigidbody_disableplayercollision
        <Trash1> ::rigidbody_kick vel = (0.0, 15.0, 0.0) rotvel = (10.0, 10.0, 10.0)
        <Trash1> ::rigidbody_matchvelocityto skater applyrandomadjustment
        Create name = <Trash2>
        <Trash2> ::rigidbody_disableplayercollision
        <Trash2> ::rigidbody_kick vel = (40.0, 40.0, 0.0) rotvel = (20.0, 20.0, 20.0)
        <Trash2> ::rigidbody_matchvelocityto skater applyrandomadjustment
    endif
    <Can> ::obj_rotx Angle = 720 Speed = 900
    SpawnSound SK6_BA_SFX_MetalTrashHitSpin
    wait 30 frames
    <Can> ::obj_clearflag FLAG_BA_TRASHCAN_SPINNING
endscript


script BA_Tram 
    SpawnSound BA_SFX_Tram_Overhead
    obj_followpathlinked
    obj_setpathacceleration 10 mphps
    obj_setpathdeceleration 10 mphps
    obj_setpathminstopvel 5
    obj_setpathvelocity 10 mph
    obj_setpathturndist 12
endscript


script BA_Televator 
    switch <area>
        case ParallelTunnel
        create_panel_message id = leaving_message text = 'Top floor' style = panel_message_death
        TeleportSkaterToNode nodeName = TRG_BA_RR_Paralel_Top NoMessage
        SpawnScript BA_SFX_ElevatorDing
        case ParallelGround
        create_panel_message id = leaving_message text = 'Ground floor' style = panel_message_death
        TeleportSkaterToNode nodeName = TRG_BA_RR_Paralel_Bottom NoMessage
        SpawnScript BA_SFX_ElevatorDing
        case SmallParallelGround
        create_panel_message id = leaving_message text = 'Ground floor' style = panel_message_death
        TeleportSkaterToNode nodeName = TRG_BA_RR_Paralel_Bottom01 NoMessage
        SpawnScript BA_SFX_ElevatorDing
        case SmallParallelEle
        create_panel_message id = leaving_message text = 'Top floor' style = panel_message_death
        TeleportSkaterToNode nodeName = TRG_BA_RR_Paralel_Top01 NoMessage
        SpawnScript BA_SFX_ElevatorDing
        case MACBA
        create_panel_message id = leaving_message text = 'MACBA' style = panel_message_death
        TeleportSkaterToNode nodeName = TRG_BA_RE_MACBA_Door NoMessage
        SpawnScript BA_SFX_ElevatorDing
        case MACBA_bottom
        create_panel_message id = leaving_message text = 'MACBA bottom' style = panel_message_death
        TeleportSkaterToNode nodeName = TRG_BA_RE_MACBA_Door01 NoMessage
        SpawnScript BA_SFX_ElevatorDing
        case GuellTram
        create_panel_message id = leaving_message text = 'Top of the Tram' style = panel_message_death
        TeleportSkaterToNode nodeName = TRG_BA_RE_Tram_Guell01 NoMessage
        case SecretTram
        create_panel_message id = leaving_message text = 'Top of the Tram' style = panel_message_death
        TeleportSkaterToNode nodeName = TRG_SE_Tele01 NoMessage
        case SchoolTop
        create_panel_message id = leaving_message text = 'School Balcony' style = panel_message_death
        TeleportSkaterToNode nodeName = TRG_BA_RE_School_Bottom
        case SchoolBottom
        create_panel_message id = leaving_message text = 'School Top' style = panel_message_death
        TeleportSkaterToNode nodeName = TRG_BA_RE_School_Top
        default 
        create_panel_message id = leaving_message text = 'NO AREA SPECIFIED!!!!' style = panel_message_death
        TeleportSkaterToNode nodeName = TRG_BA_Restart_Start NoMessage
    endswitch
endscript


script BA_Subway_Tele 
    switch <area>
        case Guell
        TeleportSkaterToNode nodeName = TRG_BA_Restart_Subway02
        create_panel_message id = leaving_message text = 'Parc Guell' style = panel_message_death
        case Secret
        TeleportSkaterToNode nodeName = TRG_BA_Restart_Secret01
        create_panel_message id = leaving_message text = 'Maremagnum' style = panel_message_death
        case Sants
        TeleportSkaterToNode nodeName = TRG_BA_Restart_Subway01
        create_panel_message id = leaving_message text = 'Estacion Sants' style = panel_message_death
        default 
        create_panel_message id = leaving_message text = 'NO AREA SPECIFIED!!!!' style = panel_message_death
        SK3_TeleportToNode nodeName = TRG_BA_Restart_Start NoMessage
    endswitch
    skater ::getspeed
    skater ::setspeed (<Speed> + (<Speed> * 0.5000))
endscript


script BA_KillWater 
    if GetFlag flag = FLAG_BA_SKATER_IS_ON_FIRE
        SpawnSkaterScript BA_FireParticlesOff
        SpawnSkaterScript BA_SmokeParticlesOff
        UnSetFlag flag = FLAG_BA_SKATER_IS_ON_FIRE
    endif
    switch <area>
        case WFLeft
        SK3_KillSkater_Water nodeName = TRG_BA_Kill_WFLeft
        case WFRight
        SK3_KillSkater_Water nodeName = TRG_BA_Kill_WFRight
        case BridgeNorth
        SK3_KillSkater_Water nodeName = TRG_BA_Restart_Water02
        case BridgeSouth
        if NOT ((BA_BRIDGE_STATE = passable)|| (GoalManager_HasWonGoal name = BA_Goal_Gaps2))
            SK3_KillSkater_Water nodeName = TRG_BA_Restart_Water02
        else
            SK3_KillSkater_Water nodeName = TRG_BA_Restart_Water03
        endif
        case Secret
        if NOT ((BA_BRIDGE_STATE = passable)|| (GoalManager_HasWonGoal name = BA_Goal_Gaps2))
            SK3_KillSkater_Water nodeName = TRG_BA_Restart_Water02
        else
            SK3_KillSkater_Water nodeName = TRG_BA_Restart_Water04
        endif
        default 
        create_panel_message id = leaving_message text = 'NO AREA SPECIFIED!!!!' style = panel_message_death
        SK3_TeleportToNode nodeName = TRG_BA_Restart_Start NoMessage
    endswitch
endscript


script BA_KillWire 
    if NOT InMultiPlayerGame
        if NOT ((BA_BRIDGE_STATE = passable)|| (GoalManager_HasWonGoal name = BA_Goal_Gaps2))
            Sk3_KillSkater nodeName = TRG_BA_Restart_Water02
        endif
    endif
endscript


script BA_KillGuell 
    switch <area>
        case left
        Sk3_KillSkater bail nodeName = TRG_BA_Kill_GuellLeft01
        case RIGHT
        Sk3_KillSkater bail nodeName = TRG_BA_Kill_GuellRight01
        case back
        Sk3_KillSkater bail nodeName = TRG_BA_Kill_GuellBack
        default 
        create_panel_message id = leaving_message text = 'NO AREA SPECIFIED!!!!' style = panel_message_death
        SK3_TeleportToNode nodeName = TRG_BA_Restart_Start NoMessage
    endswitch
endscript


script BA_LeavingMessage 
    if NOT GotParam DontKill
        if NOT InSplitScreenGame
            if GotParam fire
                create_panel_message id = leaving_message text = 'Hot!!!' style = panel_message_death
            else
                create_panel_message id = leaving_message text = 'Please stay in the play area!!!' style = panel_message_death
            endif
        endif
        pulse_blur start = 255 Speed = 5
        Sk3_KillSkater bail nodeName = <nodeName> NoMessage
    endif
endscript


script BA_RDM_DividerShatter 
    BA_SFX_WindowBreak
    GetBonus Score = 1000 text = 'Destruction Bonus'
    ShatterAndDie name = <DividerName> texture_swap = ba_apm_brokenglass01 area = 1000 variance = 4 vibrate use_skater_vel Scale = 0.05000
    Kill name = <shadow>
endscript


script BA_Paralel_WinShatter 
    BA_SFX_WindowBreak
    GetBonus Score = 1000 text = 'Destruction Bonus'
    ShatterAndDie name = <WinName> area = 1000 variance = 4 vel_x = 50 vel_y = 50 vel_z = 50 spread = 1 vibrate use_skater_vel Scale = 0.05000
    Kill name = <shadow>
endscript


script BA_LaPadrera_Shatter 
    BA_SFX_WindowBreak
    ShatterAndDie name = <DividerName> texture_swap = ba_apm_brokenglass01 area = 1000 variance = 4 vel_x = 50 vel_y = 50 vel_z = 50 spread = 1 vibrate
endscript


script THUG2_SpeedBoost boost = 2 maxspeed = 600
    skater ::getspeed
    Speed = (<Speed> * <boost>)
    if (<Speed> < <maxspeed>)
        skater ::setspeed <Speed>
    else
        skater ::setspeed <maxspeed>
    endif
    printf '##### skater speed = %s' s = <Speed>
endscript


script BA_Boost_HospitalQP 
    THUG2_SpeedBoost boost = 1.250
endscript


script BA_Boost_HospitalRail 
    THUG2_SpeedBoost boost = 1.350
endscript


script BA_Train_ClockSwing_Trigger camlength = 40
    GetTriggerArray wallplant onto
    if triggertype <trigger_array>
        GetGap text = 'Tick toc' Score = 100
        PauseSkaters
        showcamoffset
        BA_Train_Clock_Minute ::obj_rotx Angle = 720 Speed = 450
        BA_Train_Clock_Hour ::obj_rotx Angle = 360 Speed = 225
        PlaySkaterCamAnim {virtual_cam
            TargetID = world
            targetOffset = (8992.099609375, -1844.5999755859375, 9317.099609375)
            positionOffset = (2108.699951171875, 446.29998779296875, 2434.5)
            frames = <camlength>
            skippable = 0}
        wait (<camlength> - 5)frames
        UnpauseSkaters
    endif
endscript


script BA_Train_ClockSwing 
    printf '#### clockswing called ####'
    obj_roty Angle = 180 Speed = 360
    Obj_WaitRotate
    obj_roty Angle = -180 Speed = 360
    Obj_WaitRotate
endscript


script BA_Car_EndPath type = car
    obj_getid
    if GotParam scooter
        Car_Generic01 {
            CarLoopSFX = SK6_BA_Scooter_Engine
            SkaterCheckOffset = (0.0, 0.0, 4.0)
            SkaterCheckWidth = 5
            scooter
        }
    else
        Car_Generic01 {
            SkaterCheckOffset = (0.0, 0.0, 8.0)
        }
    endif
    Obj_WaitMove
    SpawnScript BA_Car_Create params = <...> 
    Die
endscript


script BA_Car_Create 
    wait 1 gameframe
    Create name = <ObjID>
endscript


script BA_Teleport_Catapult_Trigger 
    if inside
        printf '#### catapult trigger ####'
        if GotParam zaxis
            BA_Teleport_Catapult nodeName = TRG_BA_RE_Castle_Fan02 catapultarm = BA_Catapult_Arm03 zaxis
        else
            BA_Teleport_Catapult nodeName = TRG_BA_RE_Castle_Fan01 catapultarm = BA_Catapult_Arm02 ForWardPush = 755
        endif
    endif
endscript


script BA_Teleport_Catapult {
        boost = 3.400
        ForWardPush = 500
        nodeName = TRG_BA_RE_Castle_Fan02
        catapultarm = BA_Catapult_Arm03
    }
    obj_movetonode name = <nodeName> orient NoReset
    Obj_WaitMove
    Debounce x Clear = 1
    forceautokickoff
    setspeed 0
    if NOT InMultiPlayerGame
        if GotParam zaxis
            printf '#### z axis ###'
            PlaySkaterCamAnim {virtual_cam
                TargetID = world
                targetOffset = (-5255.89990234375, -582.2000122070312, 4302.7001953125)
                positionOffset = (3887.0, 597.2999877929688, 427.70001220703125)
                frames = 40
                skippable = 0}
        else
            PlaySkaterCamAnim {virtual_cam
                TargetID = world
                targetOffset = (8672.5, 744.5, 9064.599609375)
                positionOffset = (2934.199951171875, 497.79998779296875, 878.5999755859375)
                frames = 40
                skippable = 0}
        endif
    endif
    if walking
        CleanUp_WalkingtoSkating
    endif
    if NOT IsSkaterOnVehicle
        MakeSkaterGoto GroundGone
    endif
    setspeed <ForWardPush>
    jump
    trigger_jump_boost multi = <boost>
    playsound SK6_BA_CatapultShoot vol = 300
    GetGap text = 'Catapult launch' Score = 100 gapscript = BA_Goal_Catapult720_Counter
    forceautokickon
    <catapultarm> ::BA_Catapult_Arm <...> 
endscript


script BA_Bull_Trigger 
    GetTriggerArray projectile
    if triggertype <trigger_array>
        printf '### Hit Bull\'s cage'
        BA_Bull_TomatoCounter
    endif
endscript


script BA_Bull_TomatoCounter 
    if NOT GetFlag flag = FLAG_BA_BULL_FREE
        SetFlag flag = FLAG_BA_BULL_FREE
        BA_Event_BullTrigger
    endif
endscript


script BA_Event_BullTrigger 
    play_cutscene name = 'cutscenes\BA_LevelEvent.cut'
endscript


script BA_Bull_PlaySound 
    BA_Event_Bull_ShakeCam
    Random (
        @ TRG_SFX_Ghost_BullInCage ::obj_playstream SK6_BA_BullScream01 vol = 150 dropoff = 150 id = BullStream
        @ TRG_SFX_Ghost_BullInCage ::obj_playstream SK6_BA_BullScream02 vol = 150 dropoff = 150 id = BullStream
        @ TRG_SFX_Ghost_BullInCage ::obj_playstream SK6_BA_BullScream03 vol = 150 dropoff = 150 id = BullStream
        @ TRG_SFX_Ghost_BullInCage ::obj_playstream SK6_BA_BullScream04 vol = 150 dropoff = 150 id = BullStream
        @ TRG_SFX_Ghost_BullInCage ::obj_playstream SK6_BA_BullScream05 vol = 150 dropoff = 150 id = BullStream
        @ TRG_SFX_Ghost_BullInCage ::obj_playstream SK6_BA_BullScream06 vol = 150 dropoff = 150 id = BullStream
    )
endscript


script BA_Event_Bull_ShakeCam 
    pulse_blur start = 255 Speed = 5
    ShakeCamera {
        duration = 0.5000
        vert_amp = 9.0
        horiz_amp = 3.0
        vert_vel = 10.27
        horiz_vel = 5.920}
endscript


script BA_Event_BullBefore 
    printf '#### Before Bull'
    Kill prefix = 'BA_BullAfter'
    Kill prefix = 'TRG_BA_BullAfter'
    forced_create prefix = 'BA_BullBefore'
    forced_create prefix = 'TRG_BA_BullBefore'
endscript


script BA_Event_BullAfter 
    printf '********************BA_Event_BullAfter'
    printf '#### After Bull'
    KillAllTextureSplats box = {height = 15 dist = 15 width = 5 Offset = (373.0, 7.0, -100.0)}
    BA_Bull_After_Kill
    BA_Goal_BullFighter_Got
    BA_Bull_KillParticles
    Kill prefix = 'BA_BullBefore'
    Kill prefix = 'TRG_BA_BullBefore'
    forced_create prefix = 'BA_BullAfter'
    forced_create prefix = 'TRG_BA_BullAfter'
    forced_create name = BA_BullAfter_TruckDoor01
    Kill name = TRG_SFX_TrigBox_CarFire
    forced_create name = TRG_SFX_TrigBox_CarFire
    Kill name = Nighton_07_Smokestack01_lights02
    TODManager_MarkPermanentlyDead name = Nighton_07_Smokestack01_lights02
endscript


script BA_Bull_After_Kill 
    Kill name = BA_Hospital_Paintcan_Bull02
    Kill name = BA_Hospital_Paintcan_Bull03
    Kill name = TRG_BA_BullBefore_BullFighter01
    Kill name = TRG_BA_BullBefore_Bull01
    Kill name = TRG_BA_TomatoThrower
    if ScreenElementExists id = ped_speech_dialog
        DestroyScreenElement id = ped_speech_dialog
    endif
    Kill name = BA_BullBefore_TRGP_Truck
    Kill name = BA_BullBefore_TruckDoor
    Kill name = BA_BullBefore_ProximBox
endscript


script BA_Gap_BridgeEvent 
    if GotParam start
        if (BA_SFX_DrawBridgeDone = 0)
            SpawnScript BA_SFX_OpenDrawBridge
        endif
        StartGap {
            GapID = BA_BridgeEvent
            flags = [ CANCEL_GROUND CANCEL_MANUAL ]}
    else
        if GotParam end
            Gap_Gen_Rail end GapID = BA_BridgeEvent text = 'Arghhh!' Score = 500 gapscript = BA_Event_Bridge_Passable_Cam
        else
            printf '### NO GAP TYPE SET FOR ID %g.  MUST BE START OR END ###' g = <GapID>
        endif
    endif
endscript


script BA_Event_Bridge_Passable_Cam 
    if NOT InMultiPlayerGame
        if NOT ((BA_BRIDGE_STATE = passable)|| (GoalManager_HasWonGoal name = BA_Goal_Gaps2))
            change BA_BRIDGE_STATE = passable
            PlaySkaterCamAnim {virtual_cam
                TargetID = world
                targetOffset = (9753.400390625, -1554.199951171875, -320.70001220703125)
                positionOffset = (3864.89990234375, 617.4000244140625, 7464.39990234375)
                frames = 130
                skippable = 0}
            BA_Event_Bridge_Passable
        endif
    endif
endscript


script BA_Event_Bridge_Net 
    if GotParam boat
        TRG_BA_Bridge_Boat01 ::obj_movetonode name = TRG_BA_Bridge_Node02 orient
    endif
    BA_Bridge_South01 ::obj_roty Angle = 70 Speed = <Speed>
    BA_Bridge_South_Shadow01 ::obj_roty Angle = 70 Speed = <Speed>
    BA_Bridge_South_Reflection01 ::obj_roty Angle = 70 Speed = <Speed>
    BA_Bridge_North01 ::obj_roty Angle = 70 Speed = <Speed>
    BA_Bridge_North_Shadow01 ::obj_roty Angle = 70 Speed = <Speed>
    BA_Bridge_North_Reflection01 ::obj_roty Angle = 70 Speed = <Speed>
    BA_Bridge_North01_nolights ::obj_roty Angle = 70 Speed = <Speed>
    BA_Bridge_South01_nolights ::obj_roty Angle = 70 Speed = <Speed>
    if IsAlive name = xNightOn_BA_Bridge_North01_glow
        xNightOn_BA_Bridge_North01_glow ::obj_roty Angle = 70 Speed = <Speed>
    endif
    if IsAlive name = xNightOn_BA_Bridge_South01_glow
        xNightOn_BA_Bridge_South01_glow ::obj_roty Angle = 70 Speed = <Speed>
    endif
    forced_create prefix = 'BA_Bridge_Passable'
    forced_create prefix = 'TRG_BA_Rail_Bridge_Passable'
    forced_create prefix = 'TRG_BA_Bridge_Passable'
    Kill prefix = 'BA_Bridge_Impassable'
    Kill prefix = 'TRG_BA_Rail_Bridge_Impassable'
    Kill prefix = 'TRG_BA_Bridge_Impassable'
endscript


script BA_Event_Bridge_Passable 
    Debounce x Clear = 1
    PauseSkaters
    skater ::hide
    BA_Bridge_South01 ::obj_roty Angle = 70 Speed = 40
    BA_Bridge_South_Shadow01 ::obj_roty Angle = 70 Speed = 40
    BA_Bridge_South_Reflection01 ::obj_roty Angle = 70 Speed = 40
    BA_Bridge_North01 ::obj_roty Angle = 70 Speed = 40
    BA_Bridge_North_Shadow01 ::obj_roty Angle = 70 Speed = 40
    BA_Bridge_North_Reflection01 ::obj_roty Angle = 70 Speed = 40
    BA_Bridge_North01_nolights ::obj_roty Angle = 70 Speed = 40
    BA_Bridge_South01_nolights ::obj_roty Angle = 70 Speed = 40
    if IsAlive name = xNightOn_BA_Bridge_North01_glow
        xNightOn_BA_Bridge_North01_glow ::obj_roty Angle = 70 Speed = 40
    endif
    if IsAlive name = xNightOn_BA_Bridge_South01_glow
        xNightOn_BA_Bridge_South01_glow ::obj_roty Angle = 70 Speed = 40
    endif
    TRG_BA_Bridge_Boat01 ::Obj_SwitchScript BA_Boat_Move
    forced_create prefix = 'BA_Bridge_Passable'
    forced_create prefix = 'TRG_BA_Rail_Bridge_Passable'
    forced_create prefix = 'TRG_BA_Bridge_Passable'
    Kill prefix = 'BA_Bridge_Impassable'
    Kill prefix = 'TRG_BA_Rail_Bridge_Impassable'
    Kill prefix = 'TRG_BA_Bridge_Impassable'
    DestroyFastParticleSystem name = TramSmoke01
    DestroyFastParticleSystem name = TramSmoke02
    DestroyFastParticleSystem name = TramSmoke03
    DestroyFastParticleSystem name = TramSmoke04
    DestroyFastParticleSystem name = TramSpark01
    KillSpawnedScript name = BA_TRAMsparks01
    wait 130 frames
    skater ::unhide
    UnpauseSkaters
    BA_Goal_BoatCaptain_Got
endscript


script BA_Event_Bridge_Impassable 
    forced_create prefix = 'BA_Bridge_Impassable'
    forced_create prefix = 'TRG_BA_Rail_Bridge_Impassable'
    forced_create prefix = 'TRG_BA_Bridge_Impassable'
    Kill prefix = 'BA_Bridge_Passable'
    Kill prefix = 'TRG_BA_Rail_Bridge_Passable'
    Kill prefix = 'TRG_BA_Bridge_Passable'
endscript


script BA_Boat_Move Speed = 25
    obj_setpathturndist 40
    obj_pathheading on
    obj_setpathminstopvel 50
    obj_setpathvelocity <Speed> mph
    obj_followpath name = TRG_BA_Bridge_Node01
    Obj_WaitMove
    obj_setpathvelocity 0 mph
endscript


script BA_Head_Collide 
    if NOT GetFlag flag = FLAG_BA_HEAD_DECAP
        SetFlag flag = FLAG_BA_HEAD_DECAP
        skater ::GetBonus Score = 1000 text = 'Destruction Bonus'
        printf '#### creating new fountain'
        Kill prefix = 'Particle_BA_HeadSpit'
        Create prefix = 'Particle_BA_HeadDecap'
        DestroyFastParticleSystem name = HEDSpray03
        DestroyFastParticleSystem name = HEDSpray01
    endif
endscript


script Ba_boat 
    obj_hover amp = 4 freq = 0.5000
endscript


script BA_Catapult_Arm 
    printstruct <...> 
    if GotParam zaxis
        RotationCommand = obj_rotz
    else
        RotationCommand = obj_rotx
    endif
    <RotationCommand> Angle = 75 Speed = 500
    Obj_WaitRotate
    wait 2 seconds
    <RotationCommand> Angle = -75 Speed = 200
    Obj_WaitRotate
endscript


script BA_FanBoost boost = 2
    getsingletag state
    if GotParam SmallParallel
        if NOT (<state> = Skater_InHang)
            printf '#### no parallel boost ####'
            if NOT GetFlag flag = FLAG_BA_FANBOOST
                SetFlag flag = FLAG_BA_FANBOOST
                printf '#### parallel boost ####'
                Debounce x Clear = 1
                if walking
                    CleanUp_WalkingtoSkating
                    MakeSkaterGoto WalkingAirToSkating
                endif
                GetGap text = 'Fan boost' Score = 100 gapscript = BA_Goal_BullTrick_Checker
                jump
                trigger_jump_boost multi = 2
                wait 2 seconds
                UnSetFlag flag = FLAG_BA_FANBOOST
                forceautokickon
            endif
        endif
    else
        if GotParam Dragon
            if NOT GetFlag flag = FLAG_BA_FANBOOST
                SetFlag flag = FLAG_BA_FANBOOST
                GetGap text = 'Dragon\'s breath' Score = 100
                Debounce x Clear = 1
                if walking
                    CleanUp_WalkingtoSkating
                    MakeSkaterGoto WalkingAirToSkating
                endif
                jump
                trigger_jump_boost multi = <boost>
                wait 2 seconds
                UnSetFlag flag = FLAG_BA_FANBOOST
            endif
        endif
    endif
endscript


script BA_FanBoost_Proxim boost = 2
    if inside
        GetTriggerArray jump Off
        trigger_jump_boost Speed = 900
    else
    endif
endscript


script BA_Boost Speed = 200
    trigger_speed_boost multi = 5
endscript


script BA_Guell_Lizard_Tail_Move 
    BA_Boost_HospitalRail
    if NOT obj_flagset FLAG_GUELL_LIZARD_TAIL_ISROTATING
        obj_setflag FLAG_GUELL_LIZARD_TAIL_ISROTATING
        if GotParam left
            RotationAngle = 35
        else
            RotationAngle = -35
        endif
        BA_Guell_Lizard_Tail ::obj_roty Angle = <RotationAngle> Speed = 500
        playsound SK6_TrashCanHitSpin02
        BA_Guell_Lizard_Tail ::Obj_WaitRotate
        wait 2 seconds
        RotationAngle = (<RotationAngle> * -1)
        BA_Guell_Lizard_Tail ::obj_roty Angle = <RotationAngle> Speed = 200
        BA_Guell_Lizard_Tail ::Obj_WaitRotate
        obj_clearflag FLAG_GUELL_LIZARD_TAIL_ISROTATING
    endif
endscript


script BA_Hospital_Stretcher 
    begin 
    obj_movetorelpos (0.0, 2.0, 0.0) Speed = 3
    Obj_WaitMove
    obj_movetorelpos (0.0, -2.0, 0.0) Speed = 3
    Obj_WaitMove
    wait 1 frame
    repeat 
endscript


script BA_Bouy 
    obj_rotx Angle = -10 Speed = 3
    Obj_WaitRotate
    begin 
    obj_rotx Angle = 20 Speed = 6
    Obj_WaitRotate
    wait 4 frames
    obj_rotx Angle = -20 Speed = 6
    Obj_WaitRotate
    wait 4 frames
    repeat 
endscript


script BA_Fan_Spin 
    obj_roty Speed = 500
endscript


script SE_boost wait = 120
    PauseSkaters
    SpawnScript BA_SFX_SuckedUpThroughVent
    forced_create name = SE_AirCon_Shatter01
    PlaySkaterCamAnim {virtual_cam
        TargetID = world
        targetOffset = (695.2999877929688, -3110.5, 10124.5)
        positionOffset = (9111.0, 1398.9000244140625, 7151.2998046875)
        frames = <wait>
        skippable = 0}
    wait (<wait> - 30)frames
    GetGap GapID = SE_boost text = 'AC boost' Score = 50
    Debounce x Clear = 1
    if walking
        CleanUp_WalkingtoSkating
    endif
    if NOT IsSkaterOnVehicle
        MakeSkaterGoto GroundGone
    endif
    obj_movetonode name = TRG_SE_Boat_Top_Tele01 orient NoReset
    Obj_WaitMove
    UnpauseSkaters
    trigger_speed_boost Speed = 480 DefSkaterVO = 1
    jump
    trigger_jump_boost multi = 2
endscript


script SE_Water_Spouts 
    GetTriggerArray Manual onto
    if triggertype <trigger_array>
        if NOT GetFlag flag = FLAG_SPOUTS
            SetFlag flag = FLAG_SPOUTS
            if GotParam SpoutA
                Create prefix = BA_SE_Particle_SpoutA
                SpawnScript BA_SFX_WaterShootUpStart params = { node = 1 }
            else
                if GotParam SpoutB
                    Create prefix = BA_SE_Particle_SpoutB
                    SpawnScript BA_SFX_WaterShootUpStart params = { node = 2 }
                else
                    if GotParam SpoutC
                        Create prefix = BA_SE_Particle_SpoutC
                        SpawnScript BA_SFX_WaterShootUpStart params = { node = 3 }
                    endif
                endif
            endif
            wait 200 frames
            if GotParam SpoutA
                Kill prefix = BA_SE_Particle_SpoutA
                SpawnScript BA_SFX_WaterShootUpSTOP params = { node = 1 }
            else
                if GotParam SpoutB
                    Kill prefix = BA_SE_Particle_SpoutB
                    SpawnScript BA_SFX_WaterShootUpSTOP params = { node = 2 }
                else
                    if GotParam SpoutC
                        Kill prefix = BA_SE_Particle_SpoutC
                        SpawnScript BA_SFX_WaterShootUpSTOP params = { node = 3 }
                    endif
                endif
            endif
            wait 20 frames
            UnSetFlag flag = FLAG_SPOUTS
        endif
    endif
endscript


script SE_Water_Spouts2 
    GetTriggerArray Manual onto
    if triggertype <trigger_array>
        if NOT GetFlag flag = FLAG_SPOUTSA
            SetFlag flag = FLAG_SPOUTSA
            Create prefix = BA_SE_Particle_B
            wait 200 frames
            Kill prefix = BA_SE_Particle_B
            UnSetFlag flag = FLAG_SPOUTSA
        endif
    endif
endscript


script BA_Phoenix 
    obj_getid
    obj_shadowoff
    Obj_PlayAnim anim = Fly Cycle
    wait randomrange (0.0, 30.0) frames
    obj_hover amp = 10 freq = 0.8000
    begin 
    if GetFlag flag = FLAG_BA_SKATER_IS_ON_FIRE
        if NOT GetFlag flag = FLAG_BA_PHOENIX
            if obj_objectinradius type = skater Radius = 20
                printf '#### skater on fire and hit bird %o ####' o = <ObjID>
                if GameModeEquals is_career
                    printf 'career'
                    if NOT GoalManager_HasWonGoal name = BA_Goal_Gaps1
                        printf 'not won goal'
                        if NOT GoalManager_GoalIsLocked name = BA_Goal_Gaps1
                            printf '#### skater on fire and going to win goal ####'
                            SetFlag flag = FLAG_BA_PHOENIX
                            SpawnScript BA_SFX_BurningBird
                            PauseSkaters
                            skater ::hide
                            SpawnSkaterScript BA_FireParticlesOff
                            SpawnSkaterScript BA_SmokeParticlesOff
                            KillSkaterCamAnim all
                            BA_thePhoenix phoenix = <ObjID>
                            if GotParam WaterFrontEntrance
                                PlaySkaterCamAnim {virtual_cam
                                    TargetID = world
                                    frames = 70
                                    targetOffset = (1345.699951171875, 7064.2998046875, -5698.2001953125)
                                    positionOffset = (2953.699951171875, 446.1000061035156, 1623.9000244140625)
                                    skippable = 0
                                }
                                <ObjID> ::obj_movetonode name = TRG_BA_Waypoint_Phoenix01 Speed = 40 mph
                                BA_WaitForCamAnimFinished
                                PlaySkaterCamAnim {virtual_cam
                                    TargetID = world
                                    frames = 80
                                    targetOffset = (-5485.2001953125, -1602.4000244140625, 5178.60009765625)
                                    positionOffset = (3422.199951171875, 1389.5999755859375, 1757.0999755859375)
                                    skippable = 0
                                }
                                BA_WaitForCamAnimFinished
                            else
                                PlaySkaterCamAnim {virtual_cam
                                    TargetID = world
                                    frames = 70
                                    targetOffset = (2072.699951171875, 6449.10009765625, -5037.7001953125)
                                    positionOffset = (3511.39990234375, 696.4000244140625, 3014.300048828125)
                                    skippable = 0
                                }
                                <ObjID> ::obj_movetonode name = TRG_BA_Waypoint_Phoenix01 Speed = 40 mph
                                BA_WaitForCamAnimFinished
                                PlaySkaterCamAnim {virtual_cam
                                    TargetID = world
                                    frames = 80
                                    targetOffset = (-4054.300048828125, -4376.7001953125, 6596.5)
                                    positionOffset = (3572.10009765625, 1222.699951171875, 3358.5)
                                    skippable = 0
                                }
                                BA_WaitForCamAnimFinished
                            endif
                            PlaySkaterCamAnim {virtual_cam
                                TargetID = <ObjID>
                                targetOffset = (30.0, 40.0, 40.0)
                                positionOffset = (30.0, 30.0, 30.0)
                                frames = 100
                                skippable = 0
                            }
                            BA_WaitForCamAnimFinished
                            SpawnScript BA_Phoenix_Kill params = <...> 
                            Block
                        endif
                    endif
                endif
            endif
        endif
    endif
    wait 5 frames
    repeat 
endscript


script BA_WaitForCamAnimFinished 
    begin 
    if SkaterCamAnimFinished skater = 0
        break 
    endif
    wait 1 frame
    repeat 
endscript


script BA_Phoenix_Kill 
    skater ::unhide
    SpawnSkaterScript BA_FireParticlesOn
    SpawnSkaterScript BA_SmokeParticlesOn
    UnpauseSkaters
    BA_Goal_Phoenix_Got
    DestroyFastParticleSystem name = phoenixF01 attachobjid = <ObjID>
    DestroyFastParticleSystem name = phoenixF02 attachobjid = <ObjID>
    DestroyFastParticleSystem name = phoenixF03 attachobjid = <ObjID>
    <ObjID> ::DestroyFlexibleParticleSystem name = phoenix01
    <ObjID> ::DestroyFlexibleParticleSystem name = phoenix02
    UnSetFlag flag = FLAG_BA_PHOENIX
    Kill name = <ObjID>
endscript


script BA_flame 
    get_current_skater_name
    if NOT (<name> = MechBullrider)
        if NOT GetFlag flag = FLAG_BA_SKATER_IS_ON_FIRE
            SetFlag flag = FLAG_BA_SKATER_IS_ON_FIRE
            SpawnSkaterScript BA_FireParticlesOff
            SpawnSkaterScript BA_SmokeParticlesOff
            wait 1 frame
            SpawnSkaterScript BA_FireParticlesOn
            SpawnSkaterScript BA_SmokeParticlesOn
            wait 25 seconds
            SpawnSkaterScript BA_FireParticlesOff
            UnSetFlag flag = FLAG_BA_SKATER_IS_ON_FIRE
            wait 3 seconds
            SpawnSkaterScript BA_SmokeParticlesOff
        endif
    endif
endscript


script BA_FireParticlesOn 
    BA_SFX_Skater_Ignite
    CreateFlexibleParticleSystem name = BurnMoFo params_script = APM_flamingBOARD_particle_params
endscript


script BA_FireParticlesOff 
    BA_SFX_Skater_Put_Out_Fire
    DestroyFlexibleParticleSystem name = BurnMoFo
endscript


script BA_SmokeParticlesOn 
    CreateFlexibleParticleSystem name = SmokeyMoFo params_script = apm_OILYsmoke_particle_params
endscript


script BA_SmokeParticlesOff 
    DestroyFlexibleParticleSystem name = SmokeyMoFo
endscript


script BA_Gap_GuellPlanter 
    if GotParam start
        Gap_Gen_PureAir start GapID = <GapID>
    else
        if GotParam end
            if GotParam Got1
                Gap_Gen_PureAir end GapID = <GapID> text = 'Guell Planter Spine Transfer' Score = 100 gapscript = BA_Goal_GuellSpines_Got1
            else
                if GotParam Got2
                    Gap_Gen_PureAir end GapID = <GapID> text = 'Guell Planter Spine Transfer' Score = 100 gapscript = BA_Goal_GuellSpines_Got2
                else
                    if GotParam Got3
                        Gap_Gen_PureAir end GapID = <GapID> text = 'Guell Planter Spine Transfer' Score = 100 gapscript = BA_Goal_GuellSpines_Got3
                    endif
                endif
            endif
        endif
    endif
endscript


script BA_Gap_LaPadreraSpiral 
    if GotParam start
        Gap_Gen_Rail start GapID = <GapID>
    else
        if GotParam end
            Gap_Gen_Rail end GapID = <GapID> text = 'La Perdrera Spiral' Score = 100 gapscript = BA_Goal_LaPadreraSpiral_Got
        endif
    endif
endscript


script BA_Gap_BullTruck 
    if GotParam start
        Gap_Gen_PureAir start GapID = <GapID>
    else
        if GotParam end
            Gap_Gen_PureAir end GapID = <GapID> text = 'Bull Fighter!' Score = 100 gapscript = BA_Goal_BullFighter_Got
        endif
    endif
endscript


script BA_Gap_GuellTransfer 
    if GotParam start
        Gap_Gen_PureAir start GapID = <GapID>
    else
        if GotParam end
            Gap_Gen_PureAir end GapID = <GapID> text = 'Guell Planter Dragon Transfer' Score = 100 gapscript = BA_Goal_GuellTransfer_Got1
        endif
    endif
endscript


script BA_SwitchSkaters 
    KillSpawnedScript name = BA_Spawn_SwitchSkaters
    SpawnSkaterScript BA_Spawn_SwitchSkaters
endscript


script BA_Spawn_SwitchSkaters 
    wait 2 frames
    pulse_blur
    swap_skaters_get_current_name
    switch <name>
        case custom
        BA_Unlock_Custom_Goals
        case BullFighter
        SetGlobalFlag flag = GUEST_FOUND_BULLFIGHTER
        SetGlobalFlag flag = SKATER_UNLOCKED_BULLFIGHTER
        BA_Unlock_BullFighter_Goals
        case pro_teammate
        SetGlobalFlag flag = PRO_FOUND_02
        BA_Unlock_Pro_Goals
        case MechBullrider
        SetGlobalFlag flag = GUEST_FOUND_STEVEO
        BA_Unlock_SteveO_Goals
        if GetFlag flag = FLAG_BA_SKATER_IS_ON_FIRE
            SpawnSkaterScript BA_FireParticlesOff
            SpawnSkaterScript BA_SmokeParticlesOff
            UnSetFlag flag = FLAG_BA_SKATER_IS_ON_FIRE
        endif
        case pro_teammatea
        default 
    endswitch
endscript


script BA_Find_SteveO 
    if GameModeEquals is_career
        if NOT GoalManager_HasWonGoal name = BA_Goal_Gaps13
            if inside
                BA_Find_SteveO_Talk
            endif
        endif
    endif
endscript


script BA_Find_SteveO_Idle 
    Obj_PlayAnim anim = (mechbull_params.idle_anim)Cycle
endscript


script BA_Find_SteveO_Talk 
    Obj_ClearExceptions
    BA_Goal_SteveO_Got
endscript


script BA_SteveO 
    Obj_PlayAnim anim = (mechbull_params.idle_anim)Cycle
    swap_skaters_setup {
        profile_name = MechBullrider
        activation_script = BA_SwitchSkaters
    }
endscript


script BA_BullFighter 
    swap_skaters_setup {
        profile_name = BullFighter
        activation_script = BA_SwitchSkaters
    }
    Ped_InitAI stand should_look_at_skater = 0 GetAttention
endscript


script BA_TeammatePro 
    swap_skaters_setup {
        profile_name = skater_swapping_teammate_name
        activation_script = BA_SwitchSkaters
    }
    Ped_InitAI stand should_look_at_skater = 0 GetAttention
endscript


script BA_SE_Grass 
    BA_SFX_MowGrass
    switch <Grass>
        case 1
        name = highgrass_01
        GrassMowed = highgrass_01_stubble
        case 2
        name = highgrass_02
        GrassMowed = highgrass_02_stubble
        case 3
        name = highgrass_03
        GrassMowed = highgrass_03_stubble
        case 4
        name = highgrass_04
        GrassMowed = highgrass_04_stubble
        case 5
        name = highgrass_05
        GrassMowed = highgrass_05_stubble
        case 6
        name = highgrass_06
        GrassMowed = highgrass_06_stubble
        case 7
        name = highgrass_07
        GrassMowed = highgrass_07_stubble
        case 8
        name = highgrass_08
        GrassMowed = highgrass_08_stubble
        case 9
        name = highgrass_09
        GrassMowed = highgrass_09_stubble
        case 10
        name = highgrass_10
        GrassMowed = highgrass_10_stubble
        case 11
        name = highgrass_11
        GrassMowed = highgrass_11_stubble
        case 12
        name = highgrass_12
        GrassMowed = highgrass_12_stubble
        case 13
        name = highgrass_13
        GrassMowed = highgrass_13_stubble
        case 14
        name = highgrass_14
        GrassMowed = highgrass_14_stubble
        case 15
        name = highgrass_15
        GrassMowed = highgrass_15_stubble
        case 16
        name = highgrass_16
        GrassMowed = highgrass_16_stubble
        case 17
        name = highgrass_17
        GrassMowed = highgrass_17_stubble
        case 18
        name = highgrass_18
        GrassMowed = highgrass_18_stubble
        case 19
        name = highgrass_19
        GrassMowed = highgrass_19_stubble
        case 20
        name = highgrass_20
        GrassMowed = highgrass_20_stubble
        case 21
        name = highgrass_21
        GrassMowed = highgrass_21_stubble
        case 22
        name = highgrass_22
        GrassMowed = highgrass_22_stubble
        default 
    endswitch
    ShatterAndDie {
        name = <name>
        texture_swap = BA_cp_grass_mow_particle
        area = 6000
        variance = 4
        vel_x = 0
        vel_y = 20
        vel_z = 0
        spread = 1
        Scale = 0.5000
        vibrate}
    Create name = <GrassMowed>
endscript


script BA_Bull_PedThrow 
    obj_getid
    obj_spawnscript BA_Bull_ThrowPed_Idle <...> 
    setup_ped_speech {
        ped_id = <ObjID>
        accept_text = 'Press \m5 to talk.'
        text = 'Get some tomatoes and help me out!'
        inner_radius = 8
        outer_radius = 30
        activation_script = BA_Bull_PedThrow_Talk
        outer_radius_script = BA_Bull_PedThrow_Talk_Dialog_Exit
        dont_deactivate_goals
    }
    obj_setattentionradius 40
endscript


script BA_Bull_PedThrow_Talk pedname = TomatoThrower wait = 2
    PlayStream BA_Ped_Tomato3_VO vol = 200 priority = StreamPriorityHighest
    UnpauseSkaters
endscript


script BA_Bull_PedThrow_Talk_Dialog_Exit 
    speech_box_exit
endscript


script BA_Bull_ThrowPed_Idle 
    begin 
    Obj_PlayAnim anim = Standing_Throw from = start to = 18
    Obj_WaitAnimFinished
    forced_create name = BA_Bouncy_Tomato
    BA_Bouncy_Tomato ::rigidbody_disableplayercollision
    BA_Bouncy_Tomato ::rigidbody_kick vel = (500.0, 180.0, -150.0) rotvel = (10.0, 10.0, 10.0)
    Obj_PlayAnim anim = Standing_Throw from = 19 to = end
    Obj_WaitAnimFinished
    SpawnScript BA_SFX_Ped_Throw_Hit_Cage
    begin 
    Obj_CycleAnim anim = Ped_M_Idle1
    repeat randomrange (2.0, 4.0)
    repeat 
endscript


script BA_BoatCaptain 
    obj_locktoobject objectname = TRG_BA_Bridge_Boat01 (0.0, 70.0, -180.0)
    Ped_InitAI stand fall
endscript


script BA_Help_Boat 
    obj_getid
    obj_locktoobject objectname = TRG_BA_Bridge_Boat01 (0.0, 70.0, -180.0)
    Ped_Utils_SetupHintSpeech {
        ped_id = <ObjID>
        accept_text = 'Press \m5 to talk.'
        hint_text = 'Arghhh! Can you help me out?  Me boat is stuck.'
        hint_text_time = 15
        vo = BA_Ped_BoatCaptain_VO
        volume = 250
        inner_radius = 8
        outer_radius = 30
        dont_deactivate_goals
    }
    obj_setattentionradius 40
    Ped_InitAI stand fall GetAttention
endscript


script BA_Help_Spiral 
    Ped_Utils_SetupHintSpeech {
        ped_id = TRG_BA_HurtSkater_Spiral
        accept_text = 'Press \m5 to talk.'
        hint_text = 'Man...  Grinding this entire rail is tough.  Start from the roof and try it!'
        hint_text_time = 15
        vo = BA_Ped_Hint_LaPadrera_VO
        volume = 250
        inner_radius = 8
        outer_radius = 30
        dont_deactivate_goals
    }
    obj_setattentionradius 40
    Ped_InitAI stand fall GetAttention should_look_at_skater = 0
endscript


script BA_Help_SantsCombo 
    Ped_Utils_SetupHintSpeech {
        ped_id = TRG_BA_HurtSkater_SantsCombo
        accept_text = 'Press \m5 to talk.'
        hint_text = 'Try grinding the chain rails in-front of the train station across the street...  Then continue on and see if you can finish the combo.'
        hint_text_time = 15
        vo = BA_Ped_Hint_Estacion_Sants_VO
        volume = 250
        inner_radius = 8
        outer_radius = 30
        dont_deactivate_goals
    }
    obj_setattentionradius 40
    Ped_InitAI stand fall GetAttention should_look_at_skater = 0
endscript


script BA_Help_Tomato01 
    setup_ped_speech {
        ped_id = TRG_BA_Tomato_Dude01
        accept_text = 'Press \m5 to get some tomatoes.'
        text = 'Here\'s some tomatoes.  \n Throw them by pressing \b1'
        inner_radius = 8
        outer_radius = 30
        activation_script = BA_Tomato_Give
        activation_script_params = { tomato01 }
        outer_radius_script = BA_Tomato_Give_Dialog_Exit
        dont_deactivate_goals
    }
    obj_setattentionradius 40
    Ped_InitAI stand fall GetAttention should_look_at_skater = 0
endscript


script BA_Help_Tomato02 
    setup_ped_speech {
        ped_id = TRG_BA_Tomato_Dude02
        accept_text = 'Press \m5 to get some tomatoes.'
        text = 'Hola, here\'s some tomatoes.  \n Throw them by pressing \b1'
        inner_radius = 8
        outer_radius = 30
        activation_script = BA_Tomato_Give
        activation_script_params = { tomato02 }
        outer_radius_script = BA_Tomato_Give_Dialog_Exit
        dont_deactivate_goals
    }
    obj_setattentionradius 40
    Ped_InitAI stand fall GetAttention should_look_at_skater = 0 default_Fat_anim_assets
endscript


script BA_Tomato_Give 
    if GotParam tomato01
        PlayStream BA_Ped_Tomato1_VO vol = 200 priority = StreamPriorityHighest
    else
        PlayStream BA_Ped_Tomato2_VO vol = 200 priority = StreamPriorityHighest
    endif
    UnpauseSkaters
    skater ::give_skater_ammo num = 10 type = tomato
endscript


script BA_Tomato_Give_Dialog_Exit 
    if ScreenElementExists id = ped_speech_dialog
        DestroyScreenElement id = ped_speech_dialog
    endif
    speech_box_exit
endscript


script BA_Bull_Air 
    Obj_ClearExceptions
    get_current_skater_name
    if (<name> = MechBullrider)
        skater ::getspeed
        printf '#### bull v bull speed = %s ####' s = <Speed>
        if (<Speed> > 750)
            printf '#### bull lose! ####'
            if NOT GoalManager_HasWonGoal name = BA_Goal_Gaps16
                skater ::GetGap text = 'bull vs bull!' Score = 500
                BA_Goal_BullVsBull_Got
            else
                skater ::BA_Bull_Air_Get
            endif
        else
            printf '#### you lose! ####'
            skater ::BA_Bull_Air_Get
        endif
    else
        skater ::BA_Bull_Air_Get
    endif
    seteventhandler Ex = SkaterExitAir scr = BA_Bull_Air_Land group = BA_Bull_Air
endscript


script BA_Bull_Air_Get 
    printf '#### bull air! ####'
    ClearExceptionGroup BA_Bull_Air
    if InTantrum
        return 
    endif
    if IsInBail
        return 
    endif
    Debounce x Clear = 1
    if walking
        CleanUp_WalkingtoSkating
    endif
    if NOT IsSkaterOnVehicle
        MakeSkaterGoto GroundGone
    endif
    jump
    trigger_jump_boost multi = 1.500
    skater ::GetGap text = 'bull air' Score = 100
    if GoalManager_GoalExists name = BA_goal_Gaps20
        BA_AddGoal_TeamChallenge_Got
    endif
endscript


script BA_Bull_Air_Land 
    printf '#### bull air again! ####'
    ClearExceptionGroup BA_Bull_Air
    TRG_BA_BullAfter_Bull ::Obj_ClearExceptions
    TRG_BA_BullAfter_Bull ::Obj_SetException Ex = objectinradius scr = BA_Bull_Air
endscript


script BA_Bullfighter_Hanging 
    obj_shadowoff
    begin 
    Random (
        @ Obj_CycleAnim anim = HangIdle
        @ Obj_CycleAnim anim = hangright
        @ Obj_CycleAnim anim = hangleft)
    repeat 
endscript


script BA_Bull_vs_Bull 
    begin 
    skater ::getspeed
    printf '###### speed = %s ####' s = <Speed>
    wait 10 frames
    repeat 
endscript


script BA_Mime 
    begin 
    Obj_LookAtObject type = skater time = 0.5000
    Random (
        @ printf '#### mime wall ####'
        Obj_CycleAnim anim = PED_Mime_idle2Wall
        Obj_CycleAnim anim = PED_Mime_Wall2Push
        Obj_CycleAnim anim = PED_Mime_Push2Wall
        Obj_CycleAnim anim = PED_Mime_Wall2idle
        @ printf '#### mime push ####'
        Obj_CycleAnim anim = PED_Mime_idle2Push
        Obj_CycleAnim anim = PED_Mime_Push2Wall
        Obj_CycleAnim anim = PED_Mime_Wall2Push
        Obj_CycleAnim anim = PED_Mime_Push2idle
        @ printf '#### mime pull ####'
        Obj_CycleAnim anim = PED_Mime_idle2Pull
        Obj_CycleAnim anim = PED_Mime_Pull
        Obj_CycleAnim anim = PED_Mime_Pull2idle
    )
    Obj_LookAtObject type = skater time = 0.5000
    begin 
    Obj_CycleAnim anim = PED_Mime_idle
    repeat randomrange (1.0, 3.0)
    repeat 
endscript


script BA_Tony_Advance 
    Obj_ClearExceptions
    setup_ped_speech {
        ped_id = TRG_Ped_Hawk
        activation_script = ChapterAdvanceDialog
        accept_text = 'Tony Hawk press \m5 to talk'
    }
    Ped_InitAI stand should_look_at_skater = 0 Cop_Ticketing
endscript


script BA_Butterfinger_After 
    if NOT GetFlag flag = FLAG_BA_BUTTERFINGER
        GetGap text = 'Butterfinger!' Score = 1000
        SetFlag flag = FLAG_BA_BUTTERFINGER
        Kill name = BA_butterfinger
        Kill name = BA_butterfinger_indoor
        Kill name = BA_butterfinger_indoor2
        forced_create name = BA_butterfinger_BROKEN
        forced_create name = BA_butterfinger_indoor_BROKEN
        forced_create name = BA_butterfinger_indoor_BROKEN2
        forced_create name = butterfinger_barsA01_Start
        forced_create name = butterfinger_SmokeA01_Start
        forced_create name = butterfinger_SparkA01_Start
    endif
endscript


script BA_Classic_Tapas 
    Obj_ClearExceptions
    obj_applyscaling x = 1.400 y = 1.400 z = 1.400
    Obj_SetException Ex = objectinradius scr = BA_Classic_Tapas_Got params = <...> 
    obj_setinnerradius 7
    obj_roty Speed = 250
    obj_hover amp = 10 freq = 1
endscript


script BA_Classic_Tapas_Got 
    Obj_ClearExceptions
    goal_collect_got_object goal_id = BA_Classic_Goal_Collect flag = <flag>
    Die
endscript


script BA_Gap_Subway_Manual 
    Gap_Gen_Manual GapID = <GapID> text = 'Subway manual' Score = 100 <...> gapscript = BA_Classic_Subway_Manual_Got
endscript


script BA_Gap_SantsTable 
    GetTriggerArray [{ jump Off }{ skate Off }{ walk Off }{ grind Off }]
    if triggertype <trigger_array>
        seteventhandler Ex = SkaterEnterFlip scr = BA_SantsTable_Gap_Flip group = BA_SantsTable_Gap
        seteventhandler Ex = SkaterEnterGround scr = BA_SantsTable_Gap_Bailed group = BA_SantsTable_Gap
        seteventhandler Ex = SkaterBailed scr = BA_SantsTable_Gap_Bailed group = BA_SantsTable_Gap
        Block
    endif
endscript


script BA_SantsTable_Gap_Flip 
    ClearExceptionGroup BA_SantsTable_Gap
    if NOT GetFlag flag = FLAG_BA_SANTSBENCH
        SetFlag flag = FLAG_BA_SANTSBENCH
        GetGap text = 'Sants bench flip' Score = 100
        seteventhandler Ex = SkaterEnterGround scr = BA_SantsTable_Gap_Landed group = BA_SantsTable_Gap
        seteventhandler Ex = SkaterBailed scr = BA_SantsTable_Gap_Bailed group = BA_SantsTable_Gap
    endif
endscript


script BA_SantsTable_Gap_Landed 
    ClearExceptionGroup BA_SantsTable_Gap
    UnSetFlag flag = FLAG_BA_SANTSBENCH
    BA_Goal_GreatestSpots_Got1
    KillSpawnedScript name = BA_Gap_SantsTable
endscript


script BA_SantsTable_Gap_Bailed 
    ClearExceptionGroup BA_SantsTable_Gap
    UnSetFlag flag = FLAG_BA_SANTSBENCH
    KillSpawnedScript name = BA_Gap_SantsTable
endscript


script BA_Gap_Besos_FlipA 
    Gap_Gen_PureAir <...> gapscript = BA_Gap_Besos_Flip
endscript


script BA_Gap_Besos_Flip 
    GetTriggerArray [{ jump Off }{ skate Off }{ walk Off }{ grind Off }]
    if triggertype <trigger_array>
        seteventhandler Ex = SkaterEnterFlip scr = BA_Gap_Besos_Flip_Flip group = BA_Besos_Flip_Gap
        seteventhandler Ex = SkaterExitFlip scr = BA_Gap_Besos_Flip_Flip group = BA_Besos_Flip_Gap
        seteventhandler Ex = SkaterEnterGround scr = BA_Gap_Besos_Flip_Bailed group = BA_Besos_Flip_Gap
        seteventhandler Ex = SkaterBailed scr = BA_Gap_Besos_Flip_Bailed group = BA_Besos_Flip_Gap
        Block
    endif
endscript


script BA_Gap_Besos_Flip_Flip 
    ClearExceptionGroup BA_Besos_Flip_Gap
    if NOT GetFlag flag = FLAG_BA_BESOSFLIP
        SetFlag flag = FLAG_BA_BESOSFLIP
        StartGap GapID = GetGap_DefaultID
        endgap GapID = GetGap_DefaultID Score = 100 text = 'Besos flip'
        seteventhandler Ex = SkaterEnterGround scr = BA_Gap_Besos_Flip_Landed group = BA_Besos_Flip_Gap
        seteventhandler Ex = SkaterBailed scr = BA_Gap_Besos_Flip_Bailed group = BA_Besos_Flip_Gap
    endif
endscript


script BA_Gap_Besos_Flip_Landed 
    ClearExceptionGroup BA_Besos_Flip_Gap
    UnSetFlag flag = FLAG_BA_BESOSFLIP
    BA_Goal_GreatestSpots_Got2
    KillSpawnedScript name = BA_Gap_Besos_Flip
endscript


script BA_Gap_Besos_Flip_Bailed 
    ClearExceptionGroup BA_Besos_Flip_Gap
    UnSetFlag flag = FLAG_BA_BESOSFLIP
    KillSpawnedScript name = BA_Gap_Besos_Flip
endscript


script BA_Gap_MamoLedge 
    GetTriggerArray [{ jump Off }{ skate Off }{ walk Off }{ grind Off }]
    if triggertype <trigger_array>
        seteventhandler Ex = SkaterEnterFlip scr = BA_MAMO_Ledge_Gap_Flip group = BA_MAMO_Ledge_Gap
        seteventhandler Ex = SkaterEnterGround scr = BA_MAMO_Ledge_Gap_Bailed group = BA_MAMO_Ledge_Gap
        seteventhandler Ex = SkaterBailed scr = BA_MAMO_Ledge_Gap_Bailed group = BA_MAMO_Ledge_Gap
        Block
    endif
endscript


script BA_MAMO_Ledge_Gap_Flip 
    ClearExceptionGroup BA_MAMO_Ledge_Gap
    if NOT GetFlag flag = FLAG_BA_MAMOLEDGE
        SetFlag flag = FLAG_BA_MAMOLEDGE
        GetGap text = 'MAMO flip' Score = 100
        seteventhandler Ex = SkaterEnterGround scr = BA_MAMO_Ledge_Gap_Landed group = BA_MAMO_Ledge_Gap
        seteventhandler Ex = SkaterBailed scr = BA_MAMO_Ledge_Gap_Bailed group = BA_MAMO_Ledge_Gap
    endif
endscript


script BA_MAMO_Ledge_Gap_Landed 
    ClearExceptionGroup BA_MAMO_Ledge_Gap
    UnSetFlag flag = FLAG_BA_MAMOLEDGE
    BA_Goal_GreatestSpots_Got3
    KillSpawnedScript name = BA_Gap_MamoLedge
endscript


script BA_MAMO_Ledge_Gap_Bailed 
    ClearExceptionGroup BA_MAMO_Ledge_Gap
    UnSetFlag flag = FLAG_BA_MAMOLEDGE
    KillSpawnedScript name = BA_Gap_MamoLedge
endscript


script BA_Gap_Sants_Awning 
    Gap_Gen_Rail GapID = <GapID> text = 'Sants awning' Score = 100 <...> 
endscript


script BA_Gap_BesosManual 
    Gap_Gen_Manual GapID = <GapID> text = 'Besos' Score = 100 <...> 
endscript


script BA_Gap_Guell_Bench 
    Gap_Gen_Rail GapID = <GapID> text = 'World\'s longest bench' Score = 100 <...> gapscript = BA_Classic_Guell_Bench_Got
endscript


script BA_Gap_GuellWall 
    Gap_Gen_Rail GapID = <GapID> text = 'Guell entrance' Score = 100 <...> 
endscript


script BA_Gap_HospitalTransfer 
    Gap_Gen_PureAir GapID = <GapID> text = 'Hospital transfer' Score = 100 <...> 
endscript


script BA_Gap_SantsBenches 
    Gap_Gen_Rail GapID = <GapID> text = 'Sants benches' Score = 100 <...> 
endscript


script BA_Gap_RDMSign 
    Gap_Gen_Rail GapID = <GapID> text = 'Rambla del Agua' Score = 100 <...> 
endscript


script BA_Gap_DragonTail 
    Gap_Gen_Rail GapID = <GapID> text = 'Dragon\'s tail' Score = 300 <...> 
endscript


script BA_Gap_Tower2Tower 
    Gap_Gen_Rail GapID = <GapID> text = 'Tower 2 Tower' Score = 2000 <...> 
endscript


script BA_Gap_Bridge_Rail2Rail 
    Gap_Gen_Rail GapID = <GapID> text = 'Bridge rail transfer' Score = 50 <...> 
endscript


script BA_Gap_Nixon_Plant 
    GetTriggerArray wallplant onto
    if triggertype <trigger_array>
        GetGap GapID = SE_boost text = 'Nixon plant' Score = 100
    endif
endscript


script BA_Gap_RamblaNoGround 
    if GotParam start
        printf '#### bridge no ground start %i ####' i = <GapID>
        StartGap {
            GapID = <GapID>
            flags = [ CANCEL_GROUND CANCEL_HANG ]
            <...> }
    else
        if GotParam end
            printf '#### bridge no ground end %i ####' i = <GapID>
            Gap_Gen_End GapID = <GapID> text = 'Rambla no terrano' Score = 300 gapscript = BA_Goal_BridgeNoGround_Got <...> 
        else
            printf '### NO GAP TYPE SET FOR ID %g.  MUST BE START OR END ###' g = <GapID>
        endif
    endif
endscript


script BA_Classic_Subway_Manual_Got 
    GoalManager_SetGoalFlag name = ba_classic_goal_gaps got_1 1
endscript


script BA_Classic_Guell_Bench_Got 
    GoalManager_SetGoalFlag name = ba_classic_goal_gaps2 got_1 1
endscript


script BA_Talking 
    Obj_CycleAnim anim = Ped_M_Talk2_RightHere
    Obj_CycleAnim anim = Ped_M_Talk2_MixIt
    Obj_CycleAnim anim = Ped_M_Talk2_SureThing
    Obj_CycleAnim anim = Ped_M_Talk2_Idle2
    Obj_CycleAnim anim = Ped_M_Talk2_RightHere
    Obj_CycleAnim anim = Ped_M_Talk2_MixIt
    Obj_CycleAnim anim = Ped_M_Talk2_SureThing
endscript


script BA_LeafTriggerA 
    SpawnScript ALL_Levels_Going_Through_Tree
    wait 2 frames
    printf 'leaves should fall A'
    CreateFlexibleParticleSystem name = skaterleafA params_script = apm_BA_leafTrail01_particle_params
    CreateFastParticleSystem name = leafA1 params_script = apm_BA_leaf01_fast_particle_params
    leafA1 ::obj_setposition position = (2723.0, 350.0, -2231.0)
    CreateFastParticleSystem name = leafA2 params_script = apm_BA_leaf02_fast_particle_params
    leafA2 ::obj_setposition position = (2723.0, 350.0, -2231.0)
    CreateFastParticleSystem name = leafA3 params_script = apm_BA_leaf03_fast_particle_params
    leafA3 ::obj_setposition position = (2723.0, 350.0, -2231.0)
    CreateFastParticleSystem name = leafA4 params_script = apm_BA_leaf04_fast_particle_params
    leafA4 ::obj_setposition position = (2723.0, 350.0, -2231.0)
endscript


script BA_LeafTriggerB 
    SpawnScript ALL_Levels_Going_Through_Tree
    wait 2 frames
    printf 'leaves should fall B'
    CreateFlexibleParticleSystem name = skaterleafB params_script = apm_BA_leafTrail01_particle_params
    CreateFastParticleSystem name = leafB1 params_script = apm_BA_leaf01_fast_particle_params
    leafB1 ::obj_setposition position = (3324.0, 350.0, -2231.0)
    CreateFastParticleSystem name = leafB2 params_script = apm_BA_leaf02_fast_particle_params
    leafB2 ::obj_setposition position = (3324.0, 350.0, -2231.0)
    CreateFastParticleSystem name = leafB3 params_script = apm_BA_leaf03_fast_particle_params
    leafB3 ::obj_setposition position = (3324.0, 350.0, -2231.0)
    CreateFastParticleSystem name = leafB4 params_script = apm_BA_leaf04_fast_particle_params
    leafB4 ::obj_setposition position = (3324.0, 350.0, -2231.0)
endscript


script BA_LeafTriggerC 
    SpawnScript ALL_Levels_Going_Through_Tree
    wait 2 frames
    printf 'leaves should fall C'
    CreateFlexibleParticleSystem name = skaterleafC params_script = apm_BA_leafTrail01_particle_params
    CreateFastParticleSystem name = leafc1 params_script = apm_BA_leaf01_fast_particle_params
    leafc1 ::obj_setposition position = (2723.0, 425.0, -2761.0)
    CreateFastParticleSystem name = leafc2 params_script = apm_BA_leaf02_fast_particle_params
    leafc2 ::obj_setposition position = (2723.0, 425.0, -2761.0)
    CreateFastParticleSystem name = leafc3 params_script = apm_BA_leaf03_fast_particle_params
    leafc3 ::obj_setposition position = (2723.0, 425.0, -2761.0)
    CreateFastParticleSystem name = leafc4 params_script = apm_BA_leaf04_fast_particle_params
    leafc4 ::obj_setposition position = (2723.0, 425.0, -2761.0)
endscript


script BA_LeafTriggerD 
    SpawnScript ALL_Levels_Going_Through_Tree
    wait 2 frames
    printf 'leaves should fall D'
    CreateFlexibleParticleSystem name = skaterleafD params_script = apm_BA_leafTrail01_particle_params
    CreateFastParticleSystem name = leafd1 params_script = apm_BA_leaf01_fast_particle_params
    leafd1 ::obj_setposition position = (3324.0, 425.0, -2761.0)
    CreateFastParticleSystem name = leafd2 params_script = apm_BA_leaf02_fast_particle_params
    leafd2 ::obj_setposition position = (3324.0, 425.0, -2761.0)
    CreateFastParticleSystem name = leafd3 params_script = apm_BA_leaf03_fast_particle_params
    leafd3 ::obj_setposition position = (3324.0, 425.0, -2761.0)
    CreateFastParticleSystem name = leafd4 params_script = apm_BA_leaf04_fast_particle_params
    leafd4 ::obj_setposition position = (3324.0, 425.0, -2761.0)
endscript


script BA_LeafTriggerE 
    SpawnScript ALL_Levels_Going_Through_Tree
    wait 2 frames
    printf 'leaves should fall E'
    CreateFlexibleParticleSystem name = skaterleafA params_script = apm_BA_leafTrail01_particle_params
    CreateFastParticleSystem name = leafe1 params_script = apm_BA_leaf01_fast_particle_params
    leafe1 ::obj_setposition position = (1224.0, 457.0, -2890.0)
    CreateFastParticleSystem name = leafe2 params_script = apm_BA_leaf02_fast_particle_params
    leafe2 ::obj_setposition position = (1224.0, 457.0, -2890.0)
    CreateFastParticleSystem name = leafe3 params_script = apm_BA_leaf03_fast_particle_params
    leafe3 ::obj_setposition position = (1224.0, 457.0, -2890.0)
    CreateFastParticleSystem name = leafe4 params_script = apm_BA_leaf04_fast_particle_params
    leafe4 ::obj_setposition position = (1224.0, 457.0, -2890.0)
endscript


script BA_LeafTriggerF 
    SpawnScript ALL_Levels_Going_Through_Tree
    wait 2 frames
    printf 'leaves should fall F'
    CreateFlexibleParticleSystem name = skaterleafA params_script = apm_BA_leafTrail01_particle_params
    CreateFastParticleSystem name = leaff1 params_script = apm_BA_leaf01_fast_particle_params
    leaff1 ::obj_setposition position = (900.0, 457.0, -2890.0)
    CreateFastParticleSystem name = leaff2 params_script = apm_BA_leaf02_fast_particle_params
    leaff2 ::obj_setposition position = (900.0, 457.0, -2890.0)
    CreateFastParticleSystem name = leaff3 params_script = apm_BA_leaf03_fast_particle_params
    leaff3 ::obj_setposition position = (900.0, 457.0, -2890.0)
    CreateFastParticleSystem name = leaff4 params_script = apm_BA_leaf04_fast_particle_params
    leaff4 ::obj_setposition position = (900.0, 457.0, -2890.0)
endscript


script BA_LeafTriggerG 
    SpawnScript ALL_Levels_Going_Through_Tree
    wait 2 frames
    printf 'leaves should fall G'
    obj_getid
    CreateFastParticleSystem name = leafBush01 params_script = apm_BA_leafBUSH01_fast_particle_params attachobjid = <ObjID>
    CreateFastParticleSystem name = leafBush02 params_script = apm_BA_leafBUSH02_fast_particle_params attachobjid = <ObjID>
    CreateFastParticleSystem name = leafBush03 params_script = apm_BA_leafBUSH03_fast_particle_params attachobjid = <ObjID>
endscript


script BA_LeafTriggerH 
    SpawnScript ALL_Levels_Going_Through_Tree
    wait 2 frames
    printf 'leaves should fall H'
    CreateFlexibleParticleSystem name = skaterleafA params_script = apm_BA_leafTrail01_particle_params
    CreateFastParticleSystem name = leaff1 params_script = apm_BA_leaf01_fast_particle_params
    leaff1 ::obj_setposition position = (3143.0, 202.0, 1545.0)
    CreateFastParticleSystem name = leaff2 params_script = apm_BA_leaf02_fast_particle_params
    leaff2 ::obj_setposition position = (3143.0, 202.0, 1545.0)
    CreateFastParticleSystem name = leaff3 params_script = apm_BA_leaf03_fast_particle_params
    leaff3 ::obj_setposition position = (3143.0, 202.0, 1545.0)
    CreateFastParticleSystem name = leaff4 params_script = apm_BA_leaf04_fast_particle_params
    leaff4 ::obj_setposition position = (3143.0, 202.0, 1545.0)
endscript


script BA_Startup_Particles 
    CreateFastParticleSystem name = dragonspray01 params_script = apm_DragonSpray01_fast_particle_params
    CreateFastParticleSystem name = dragonspray02 params_script = apm_DragonSpray02_fast_particle_params
    CreateFastParticleSystem name = dragonspray03 params_script = apm_DragonSpray03_fast_particle_params
    if NOT ((BA_BRIDGE_STATE = passable)|| (GoalManager_HasWonGoal name = BA_Goal_Gaps2))
        CreateFastParticleSystem name = TramSmoke01 params_script = apm_TramSmoke01_fast_particle_params
        TramSmoke01 ::obj_setposition position = (4058.980224609375, 1025.393310546875, 4397.88671875)
        CreateFastParticleSystem name = TramSmoke02 params_script = apm_TramSmoke01_fast_particle_params
        TramSmoke02 ::obj_setposition position = (4205.84765625, 1024.941162109375, 4721.4345703125)
        CreateFastParticleSystem name = TramSmoke03 params_script = apm_TramSmoke01_fast_particle_params
        TramSmoke03 ::obj_setposition position = (4359.51806640625, 1027.638916015625, 4249.45166015625)
        CreateFastParticleSystem name = TramSmoke04 params_script = apm_TramSmoke01_fast_particle_params
        TramSmoke04 ::obj_setposition position = (4219.8623046875, 1034.20947265625, 3946.25927734375)
    endif
    CreateFastParticleSystem name = HEDSpray01 params_script = apm_HEDSpray01_fast_particle_params
    CreateFastParticleSystem name = HEDSpray03 params_script = apm_HEDSpray03_fast_particle_params
    BA_TrashCan_Spinny08 ::CreateFlexibleParticleSystem name = TrashFire01 params_script = apm_BA_TRASH_fire01_particle_params
endscript


script BA_TRAMsparks01 
    if NOT ((BA_BRIDGE_STATE = passable)|| (GoalManager_HasWonGoal name = BA_Goal_Gaps2))
        begin 
        CreateFastParticleSystem name = TramSpark01 params_script = apm_TramSpark01_fast_particle_params
        TramSpark01 ::obj_setposition position = Random (
            @ (4058.980224609375, 1025.393310546875, 4397.88671875)
            @ (4205.84765625, 1024.941162109375, 4721.4345703125)
            @ (4359.51806640625, 1027.638916015625, 4249.45166015625)
            @ (4219.8623046875, 1034.20947265625, 3946.25927734375)
        )
        wait randomrange (1.0, 3.0) seconds
        repeat 
    endif
endscript


script BA_thePhoenix 
    <phoenix> ::CreateFlexibleParticleSystem name = phoenix01 params_script = apm_BA_fire01_particle_params
    <phoenix> ::CreateFlexibleParticleSystem name = phoenix02 params_script = apm_BA_fire02_particle_params
    CreateFastParticleSystem name = phoenixF01 params_script = apm_BA_phoenix01_fast_particle_params attachobjid = <phoenix>
    CreateFastParticleSystem name = phoenixF02 params_script = apm_BA_phoenix02_fast_particle_params attachobjid = <phoenix>
    CreateFastParticleSystem name = phoenixF03 params_script = apm_BA_phoenix03_fast_particle_params attachobjid = <phoenix>
endscript


script BA_Sants_BusStop_Shatter 
    if NOT InMultiPlayerGame
        <Bouncy1> ::rigidbody_matchvelocityto skater applyrandomadjustment
        <Bouncy2> ::rigidbody_matchvelocityto skater applyrandomadjustment
    endif
    if GotParam Kill
        Kill name = <Kill>
    endif
    if GotParam ExtraShatter
        Kill name = <ExtraShatter>
    endif
    BA_SFX_WindowBreak
    GetBonus Score = 1000 text = 'Destruction Bonus'
    ShatterAndDie {
        name = <name>
        area = 3000
        variance = 4
        vel_x = 0
        vel_y = 20
        vel_z = 0
        spread = 10
        Scale = 0.05000
        use_skater_vel
        vibrate}
endscript


script BA_Intro_Line1 
    TRG_Ped_Hawk ::obj_playfam BA_Intro_01_Lip vol = 145 priority = StreamPriorityHighest
endscript


script BA_Intro_Line2 
    TRG_Ped_Hawk ::obj_playfam BA_Intro_02_Lip vol = 145 priority = StreamPriorityHighest
endscript


script BA_Intro_Line3 
    TRG_Ped_Hawk ::obj_playfam BA_Intro_03_Lip vol = 145 priority = StreamPriorityHighest
endscript


script BA_ProSwitch_Line1 
    get_current_skater_name
    switch <name>
        case Burnquist
        printf 'Burnquist'
        TRG_Ped_TeammateIntroPro ::obj_playfam Burnquist_FirstSwap_Lip vol = 200 priority = StreamPriorityHighest
        case Mullen
        printf 'Mullen'
        TRG_Ped_TeammateIntroPro ::obj_playfam Mullen_FirstSwap_Lip vol = 200 priority = StreamPriorityHighest
        case Muska
        printf 'Muska'
        TRG_Ped_TeammateIntroPro ::obj_playfam Muska_FirstSwap_Lip vol = 200 priority = StreamPriorityHighest
        case Vallely
        printf 'Vallely'
        TRG_Ped_TeammateIntroPro ::obj_playfam Vallely_FirstSwap_Lip vol = 200 priority = StreamPriorityHighest
    endswitch
endscript


script BA_BullfighterSwitch_Line1 
    TRG_Ped_BullFighter_Intro ::obj_playfam Ped_Bullfighter_FirstSwap_Lip vol = 200 priority = StreamPriorityHighest
endscript


script BA_SteveOSwitch_Line1 
    StopStream BA_Steveo_GoalFound_VO
    wait 1 gameframe
    TRG_Ped_SteveO_Intro ::obj_playfam SteveO_FirstSwap_Lip vol = 200 priority = StreamPriorityHighest
endscript


script BA_2d_sign_element_create parent = menu3d_anchor
    if GetGlobalFlag flag = SCREEN_MODE_WIDE
        <Offset> = (-8.0, 0.0)
    else
        <Offset> = (0.0, 0.0)
    endif
    ufo_pos = ((-10.0, 150.0) + <Offset>)
    CreateScreenElement {
        type = SpriteElement
        parent = <parent>
        texture = BA_icon_1
        id = BA_UFO
        Scale = 2.800
        rgba = [ 128 128 128 128 ]
        Pos = <ufo_pos>
        rot_angle = -20
        just = [ left top ]
        z_priority = -51
    }
    CreateScreenElement {
        type = SpriteElement
        parent = <parent>
        texture = BA_icon_2
        id = BA_smoke
        Scale = 1.800
        rgba = [ 128 128 128 128 ]
        Pos = ((50.0, 375.0) + <Offset>)
        rot_angle = 0
        just = [ center top ]
        z_priority = -51
    }
    RunScriptOnScreenElement id = BA_UFO BA_UFO_anim params = { orig_pos = <ufo_pos> }
    RunScriptOnScreenElement id = BA_smoke BA_smoke_anim
endscript


script BA_UFO_anim orig_pos = (0.0, 0.0)
    begin 
    y_off = Random (@ (0.0, -10.0) @ (0.0, -30.0) @ (0.0, -50.0) @ (0.0, -20.0))
    DoMorph time = 0 Pos = ((-100.0, 0.0) + <orig_pos> + <y_off>)
    DoMorph time = 0.1000 Pos = <orig_pos>
    begin 
    x_off = Random (@ (-3.0, 0.0) @ (-1.0, 0.0) @ (0.0, 0.0) @ (1.0, 0.0) @ (-1.0, 0.0) @ (0.0, 0.0) @ (1.0, 0.0) @ (0.0, 3.0))
    y_off = Random (@ (0.0, -3.0) @ (0.0, -1.0) @ (0.0, 0.0) @ (0.0, 1.0) @ (0.0, -1.0) @ (0.0, 0.0) @ (0.0, 1.0) @ (0.0, 3.0))
    DoMorph time = 0.1000 Pos = (<orig_pos> + <x_off> + <y_off>)
    repeat Random (@ 10 @ 20 @ 30)
    y_off = Random (@ (0.0, -50.0) @ (0.0, -10.0) @ (0.0, -30.0) @ (0.0, -20.0))
    DoMorph time = 0.2000 Pos = ((-100.0, 0.0) + <orig_pos> + <y_off>)
    wait Random (@ 2 @ 3 @ 4 @ 5) seconds
    repeat 
endscript


script BA_smoke_anim 
    begin 
    DoMorph alpha = 0 Scale = 0 time = 0
    DoMorph time = 0.3000 alpha = 0.8000 Scale = 1.300
    DoMorph time = 0.9000 alpha = 0 Scale = 2.800
    wait 1 seconds
    repeat 
endscript


script BA_TOD 
    switch <next_tod>
        case Morning
        Kill name = xNightOn_BA_Bridge_North01_glow01
        Kill name = xNightOn_BA_Bridge_South01_glow01
        Kill name = xNightOn_BA_Bridge_North01_glow
        Kill name = xNightOn_BA_Bridge_South01_glow
        case Afternoon
        Kill name = xNightOn_BA_Bridge_North01_glow01
        Kill name = xNightOn_BA_Bridge_South01_glow01
        Kill name = xNightOn_BA_Bridge_North01_glow
        Kill name = xNightOn_BA_Bridge_South01_glow
        case Evening
        Kill name = xNightOn_BA_Bridge_North01_glow01
        Kill name = xNightOn_BA_Bridge_South01_glow01
        Kill name = xNightOn_BA_Bridge_North01_glow
        Kill name = xNightOn_BA_Bridge_South01_glow
        case Night
        if NOT ((BA_BRIDGE_STATE = passable)|| (GoalManager_HasWonGoal name = BA_Goal_Gaps2))
            forced_create name = xNightOn_BA_Bridge_North01_glow
            forced_create name = xNightOn_BA_Bridge_South01_glow
        else
            forced_create name = xNightOn_BA_Bridge_North01_glow01
            forced_create name = xNightOn_BA_Bridge_South01_glow01
        endif
        default 
        printf '### no tod set ###'
    endswitch
endscript

BA_StateLogic_Table = {
    BA_STATE_Mime = {
        script_ped_state = BA_STATECONTROL_Mime
        exit_state_action = wait_anim_finished
    }
}

script BA_STATECONTROL_Mime 
    begin 
    Random (
        @ 
        PlayAnimWithPartialAnimIfExists anim = PED_Mime_idle
        @ 
        PlayAnimWithPartialAnimIfExists anim = PED_Mime_idle2Wall
        Obj_WaitAnimFinished
        PlayAnimWithPartialAnimIfExists anim = PED_Mime_Wall2Push
        Obj_WaitAnimFinished
        Random (
            @ 
            PlayAnimWithPartialAnimIfExists anim = PED_Mime_Push2idle
            @ PlayAnimWithPartialAnimIfExists anim = PED_Mime_Push2Wall
            Obj_WaitAnimFinished
            PlayAnimWithPartialAnimIfExists anim = PED_Mime_Wall2idle
        )
        @ 
        PlayAnimWithPartialAnimIfExists anim = PED_Mime_idle2Pull
        Obj_WaitAnimFinished
        PlayAnimWithPartialAnimIfExists anim = PED_Mime_Pull
        Obj_WaitAnimFinished
        PlayAnimWithPartialAnimIfExists anim = PED_Mime_Pull2idle
    )
    Obj_WaitAnimFinished
    repeat 
endscript


script BA_Skater 
    Ped_InitAI skater Speed = 50
endscript

